const a19_0x51f12a=a19_0x2bda;(function(_0x82c4ab,_0x6fe244){const _0x2f0f3d=a19_0x2bda,_0x15db94=_0x82c4ab();while(!![]){try{const _0x323332=-parseInt(_0x2f0f3d(0x1e8))/0x1*(parseInt(_0x2f0f3d(0x1df))/0x2)+parseInt(_0x2f0f3d(0x1c7))/0x3+parseInt(_0x2f0f3d(0x1d9))/0x4*(parseInt(_0x2f0f3d(0x1f9))/0x5)+-parseInt(_0x2f0f3d(0x1cd))/0x6*(parseInt(_0x2f0f3d(0x1f4))/0x7)+-parseInt(_0x2f0f3d(0x20d))/0x8*(parseInt(_0x2f0f3d(0x1e2))/0x9)+parseInt(_0x2f0f3d(0x200))/0xa*(-parseInt(_0x2f0f3d(0x1d1))/0xb)+parseInt(_0x2f0f3d(0x1ca))/0xc*(parseInt(_0x2f0f3d(0x1da))/0xd);if(_0x323332===_0x6fe244)break;else _0x15db94['push'](_0x15db94['shift']());}catch(_0x1f394f){_0x15db94['push'](_0x15db94['shift']());}}}(a19_0x20fc,0x7f77d));function a19_0x2bda(_0x220654,_0x20bdf4){const _0x20fc44=a19_0x20fc();return a19_0x2bda=function(_0x2bda0c,_0x4df244){_0x2bda0c=_0x2bda0c-0x1bd;let _0x1015fc=_0x20fc44[_0x2bda0c];return _0x1015fc;},a19_0x2bda(_0x220654,_0x20bdf4);}function a19_0x20fc(){const _0x334ed2=['3652130bltToc','rQSoq','bstackUsername','cloudProvider','message','username','statusCode','IiKzU','invalid-grid-id','help','MbQgm','default','error','479296zNKZOp','info','../../utils/utilityMethods','readFileSync','type','wNzRi','parse','sEyPy','Skip\x20insecure\x20cert\x20verification.','fgQNz','Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20','INFO','Starting\x20grid\x20','VCZsC','unauthorised','xElmP','clusterName','2078823PQFwyt','replace','grid-id','180GxQRNi','epilogue','user','42bXiMYT','ZNlaC','clusterRegion','argv','11XVuJly','connectionTimeout','addListeners','skipTlsCertVerify','Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.','handler','Adding\x20Websocket\x20listeners','nHnfj','3653416wLPdXq','515047ZBPJVp','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','start','iZZfc','string','16dnKYUz','WebSocket','FUecj','54mUAFwq','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','skip-tls-cert-verify','region','<PasswordPlaceholder>','name','6588bFcNhw','usage','../../utils/gridComponents','<UsernamePlaceholder>','Browserstack','boolean','cXWJx','ERROR','desc','gridId','WKmDx','GIJCZ','901082NcnGUV','stringify','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','bstackAccesskey','Qhhuc','5pHDpEX','builder','password','exit','debug','body','YmciY'];a19_0x20fc=function(){return _0x334ed2;};return a19_0x20fc();}const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require('reconnecting-websocket'),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require('../../config/constants'),{logger}=require('../../config/logger'),{getCredentialsPath,getGridDetails}=require(a19_0x51f12a(0x20f)),{scaleUpHubDeployment}=require(a19_0x51f12a(0x1ea)),{sendInstrumentationEvent}=require('../../utils/instrumentationUtils'),webSocketUtils=require('../../utils/webSocketUtils'),{createK8sClient}=require('../../utils/createk8sClient'),{getCloudProviderObject}=require('../../cloudproviders/utils');exports['command']='grid',exports[a19_0x51f12a(0x1f0)]='Start\x20an\x20existing\x20Automation\x20grid.',exports[a19_0x51f12a(0x1fa)]=function(_0xcb0796){const _0x531d09=a19_0x51f12a,_0x28f89e={};_0x28f89e[_0x531d09(0x20a)]=_0x531d09(0x1d5),_0x28f89e[_0x531d09(0x1bd)]=_0x531d09(0x1de),_0x28f89e[_0x531d09(0x1d8)]=_0x531d09(0x1be),_0x28f89e[_0x531d09(0x1ce)]=_0x531d09(0x1ed),_0x28f89e['FUecj']=_0x531d09(0x209);const _0x440197=_0x28f89e,_0x3d73b5={};_0x3d73b5['description']=_0x440197[_0x531d09(0x20a)],_0x3d73b5[_0x531d09(0x211)]=_0x440197[_0x531d09(0x1bd)];const _0x2bf9a9={};_0x2bf9a9['description']=_0x440197[_0x531d09(0x1d8)],_0x2bf9a9[_0x531d09(0x211)]=_0x440197[_0x531d09(0x1ce)],_0x2bf9a9[_0x531d09(0x20b)]=![];const _0x2e0eb3={};return _0x2e0eb3[_0x531d09(0x1c9)]=_0x3d73b5,_0x2e0eb3[_0x531d09(0x1e4)]=_0x2bf9a9,_0xcb0796[_0x531d09(0x1e9)](HELP_HEADER_MESSAGE[_0x531d09(0x1dc)])[_0x531d09(0x1cb)](HELP_FOOTER_MESSAGE)['options'](_0x2e0eb3)[_0x531d09(0x209)](_0x440197[_0x531d09(0x1e1)])[_0x531d09(0x1d0)];},exports[a19_0x51f12a(0x1d6)]=async function(_0x4a9320){const _0x3715ea=a19_0x51f12a,_0x2d5376={'ggVjt':_0x3715ea(0x1db),'WKmDx':function(_0x20df90){return _0x20df90();},'dyHgJ':'Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','iZZfc':function(_0x1c4e5c,_0x275b2b,_0xf1e4e0,_0xb293,_0x59776b,_0x421f36,_0x31fb79){return _0x1c4e5c(_0x275b2b,_0xf1e4e0,_0xb293,_0x59776b,_0x421f36,_0x31fb79);},'cXWJx':'start-grid-called','yCnyH':'init-not-called','PuATd':_0x3715ea(0x1eb),'dAsDX':_0x3715ea(0x1e6),'YmciY':_0x3715ea(0x1d7),'VCZsC':function(_0x4d285a,_0x2ddb0a,_0x1ddbf2,_0x1dc70a){return _0x4d285a(_0x2ddb0a,_0x1ddbf2,_0x1dc70a);},'GIJCZ':function(_0x4706b9,_0x12f05b,_0x293398){return _0x4706b9(_0x12f05b,_0x293398);},'Qhhuc':function(_0x12e273,_0x5e40d9,_0xa68647){return _0x12e273(_0x5e40d9,_0xa68647);},'wNzRi':'Grid\x20started','IiKzU':function(_0x15a24a,_0x254d87){return _0x15a24a===_0x254d87;},'rQSoq':_0x3715ea(0x1e3),'arVfd':function(_0x1a3661,_0x16b890,_0x107ede,_0x565d72,_0x2d1f17,_0x57361f,_0x27796f){return _0x1a3661(_0x16b890,_0x107ede,_0x565d72,_0x2d1f17,_0x57361f,_0x27796f);},'TEEVA':_0x3715ea(0x1c4),'Plqrc':function(_0x8f15d1,_0x231eaa,_0x39ccef,_0x3129c5,_0x41198a,_0x31f1d9,_0x2d616c){return _0x8f15d1(_0x231eaa,_0x39ccef,_0x3129c5,_0x41198a,_0x31f1d9,_0x2d616c);},'LMvFc':_0x3715ea(0x208),'xElmP':function(_0x2dd0dd,_0x3de05a,_0x2f33e2,_0x569bd8,_0x5be9aa,_0x506f8e,_0x43895f){return _0x2dd0dd(_0x3de05a,_0x2f33e2,_0x569bd8,_0x5be9aa,_0x506f8e,_0x43895f);},'fgQNz':'server-error'};let _0xef9668;try{!_0x4a9320[_0x3715ea(0x1f1)]&&(logger['error'](_0x2d5376['ggVjt']),process[_0x3715ea(0x1fc)](0x1));!fs['existsSync'](_0x2d5376[_0x3715ea(0x1f2)](getCredentialsPath))&&(logger[_0x3715ea(0x20c)](_0x2d5376['dyHgJ']),await _0x2d5376[_0x3715ea(0x1dd)](sendInstrumentationEvent,_0x4a9320,_0x2d5376[_0x3715ea(0x1ee)],messageTypes[_0x3715ea(0x1ef)],_0x2d5376['yCnyH'],null,_0x4a9320),process[_0x3715ea(0x1fc)](0x1));logger[_0x3715ea(0x20e)](_0x3715ea(0x1c2)+_0x4a9320[_0x3715ea(0x1f1)]),await _0x2d5376[_0x3715ea(0x1dd)](sendInstrumentationEvent,_0x4a9320,_0x2d5376[_0x3715ea(0x1ee)],messageTypes[_0x3715ea(0x1c1)],null,null,_0x4a9320);const _0x5d1f24=JSON[_0x3715ea(0x213)](fs[_0x3715ea(0x210)](_0x2d5376[_0x3715ea(0x1f2)](getCredentialsPath)));global_registry[_0x3715ea(0x202)]=_0x5d1f24[_0x3715ea(0x1ec)][_0x3715ea(0x205)],global_registry[_0x3715ea(0x1f7)]=_0x5d1f24[_0x3715ea(0x1ec)][_0x3715ea(0x1fb)];const _0x19be8d=WS_ENDPOINT[_0x3715ea(0x1c8)](_0x2d5376['PuATd'],_0x5d1f24[_0x3715ea(0x1ec)][_0x3715ea(0x205)])[_0x3715ea(0x1c8)](_0x2d5376['dAsDX'],_0x5d1f24[_0x3715ea(0x1ec)][_0x3715ea(0x1fb)]),_0x339d10={};_0x339d10[_0x3715ea(0x1e0)]=ws,_0x339d10[_0x3715ea(0x1d2)]=0x36ee80,_0xef9668=new ReconnectingWebSocket(_0x19be8d,[],_0x339d10),logger[_0x3715ea(0x1fd)](_0x2d5376[_0x3715ea(0x1ff)]),webSocketUtils[_0x3715ea(0x1d3)](_0xef9668,_0x4a9320[_0x3715ea(0x1cc)],_0x4a9320[_0x3715ea(0x1fb)]);const [_0x3cadab,_0x4f30bb]=await _0x2d5376[_0x3715ea(0x1c3)](getGridDetails,_0x5d1f24['Browserstack'][_0x3715ea(0x205)],_0x5d1f24[_0x3715ea(0x1ec)][_0x3715ea(0x1fb)],_0x4a9320[_0x3715ea(0x1f1)]);if(_0x4f30bb){const _0x5025ea=_0x4f30bb[_0x3715ea(0x20e)];global_registry['cloudProvider']=_0x5025ea[_0x3715ea(0x203)],global_registry[_0x3715ea(0x1cf)]=_0x5025ea[_0x3715ea(0x1e5)],global_registry[_0x3715ea(0x1c6)]=_0x5025ea[_0x3715ea(0x1c6)];const _0x4fe101=await _0x2d5376[_0x3715ea(0x1dd)](getCloudProviderObject,_0x5025ea[_0x3715ea(0x203)],_0x5025ea[_0x3715ea(0x1c6)],_0x5025ea['name'],_0xef9668,webSocketUtils,_0x4a9320),[_0x7951b3,_0x48ed25,_0x7afe15,_0x595ee7,_0x443548,_0x5ca652]=await _0x2d5376[_0x3715ea(0x1f3)](createK8sClient,_0x4fe101,_0x4a9320[_0x3715ea(0x1d4)]);await _0x2d5376[_0x3715ea(0x1f8)](scaleUpHubDeployment,_0x48ed25,_0x5025ea[_0x3715ea(0x1e7)]),logger[_0x3715ea(0x20e)](_0x2d5376[_0x3715ea(0x212)]),process['exit'](0x0);}_0x2d5376[_0x3715ea(0x207)](_0x3cadab[_0x3715ea(0x206)],0x191)&&(logger[_0x3715ea(0x20c)](_0x2d5376[_0x3715ea(0x201)]),await _0x2d5376['arVfd'](sendInstrumentationEvent,_0x4a9320,_0x2d5376['cXWJx'],messageTypes['ERROR'],_0x2d5376['TEEVA'],null,_0x4a9320),process[_0x3715ea(0x1fc)](0x1)),_0x2d5376[_0x3715ea(0x207)](_0x3cadab[_0x3715ea(0x206)],0x190)&&(logger[_0x3715ea(0x20c)](JSON[_0x3715ea(0x213)](_0x3cadab[_0x3715ea(0x1fe)])[_0x3715ea(0x204)]),await _0x2d5376['Plqrc'](sendInstrumentationEvent,_0x4a9320,_0x2d5376['cXWJx'],messageTypes['ERROR'],_0x2d5376['LMvFc'],null,_0x4a9320),process[_0x3715ea(0x1fc)](0x1)),logger[_0x3715ea(0x20c)](_0x3715ea(0x1f6)+JSON['stringify'](_0x3cadab)),await _0x2d5376[_0x3715ea(0x1c5)](sendInstrumentationEvent,_0x4a9320,_0x2d5376[_0x3715ea(0x1ee)],messageTypes[_0x3715ea(0x1ef)],_0x2d5376[_0x3715ea(0x1bf)],_0x3cadab,_0x4a9320),process[_0x3715ea(0x1fc)](0x1);}catch(_0x58fe9b){const _0x2913e3=_0x3715ea(0x1c0)+_0x58fe9b+'\x20\x0a'+JSON[_0x3715ea(0x1f5)](_0x58fe9b['stack'])+'\x20';logger[_0x3715ea(0x20c)](_0x2913e3),process[_0x3715ea(0x1fc)](0x1);}};