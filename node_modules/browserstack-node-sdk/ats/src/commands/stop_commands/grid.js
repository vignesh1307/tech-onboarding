function a21_0x3a17(_0x4edd63,_0x58bfb1){const _0x5a4e81=a21_0x5a4e();return a21_0x3a17=function(_0x3a1733,_0x4900c9){_0x3a1733=_0x3a1733-0x16e;let _0x5a8d2b=_0x5a4e81[_0x3a1733];return _0x5a8d2b;},a21_0x3a17(_0x4edd63,_0x58bfb1);}const a21_0x1a5a06=a21_0x3a17;function a21_0x5a4e(){const _0x58eddb=['handler','exit','cloudProvider','boolean','49xAlpca','statusCode','JnOZl','bstackAccesskey','skipTlsCertVerify','Unable\x20to\x20stop\x20the\x20Grid!\x20Error:\x20','../../cloudproviders/utils','PUCPr','parse','djwgc','Kokgn','1991403AKoNBW','stop','unauthorised','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','stringify','rwalK','desc','eAVVw','type','ERROR','HXKlj','twTxk','ZmsOf','server-error','skip-tls-cert-verify','bvXPQ','clusterRegion','../../utils/gridComponents','PjYml','2189qxsVEs','456hUsnBK','922452gTNJEv','../../config/constants','clusterName','name','readFileSync','AsaIK','addListeners','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','debug','command','Stopping\x20grid\x20','2798rwBQjh','stop-grid-called','JWeYE','32510IxoOSc','VjmdT','<PasswordPlaceholder>','replace','mbknY','init-not-called','user','../../utils/instrumentationUtils','error','../../config/logger','bstackUsername','message','14967qvaPrf','Adding\x20Websocket\x20listeners','pOXtc','default','4oiJclv','invalid-grid-id','126042NqODMc','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20stop','username','string','Stop\x20a\x20running\x20Automation\x20grid.','gridId','721985yVlGnT','description','Browserstack','existsSync','INFO','WebSocket','../../utils/utilityMethods','usage','Grid\x20stoppped.','password','<UsernamePlaceholder>','argv','3296joOQHw','156XShFcm','../../utils/createk8sClient','info','region','stack','../../utils/webSocketUtils','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','body','qddRk','pKeJX','qUZDB','YWzqP','kZBha','help'];a21_0x5a4e=function(){return _0x58eddb;};return a21_0x5a4e();}(function(_0x361ef7,_0x2b15d4){const _0x2f84e7=a21_0x3a17,_0x3efc56=_0x361ef7();while(!![]){try{const _0x2516ef=parseInt(_0x2f84e7(0x1b2))/0x1*(-parseInt(_0x2f84e7(0x1be))/0x2)+parseInt(_0x2f84e7(0x19e))/0x3+-parseInt(_0x2f84e7(0x1d1))/0x4*(parseInt(_0x2f84e7(0x174))/0x5)+parseInt(_0x2f84e7(0x16e))/0x6*(parseInt(_0x2f84e7(0x193))/0x7)+-parseInt(_0x2f84e7(0x180))/0x8*(-parseInt(_0x2f84e7(0x1cd))/0x9)+-parseInt(_0x2f84e7(0x1c1))/0xa*(-parseInt(_0x2f84e7(0x1b1))/0xb)+-parseInt(_0x2f84e7(0x1b3))/0xc*(parseInt(_0x2f84e7(0x181))/0xd);if(_0x2516ef===_0x2b15d4)break;else _0x3efc56['push'](_0x3efc56['shift']());}catch(_0x37c395){_0x3efc56['push'](_0x3efc56['shift']());}}}(a21_0x5a4e,0x6af92));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require('reconnecting-websocket'),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a21_0x1a5a06(0x1b4)),{logger}=require(a21_0x1a5a06(0x1ca)),{getCredentialsPath,getGridDetails}=require(a21_0x1a5a06(0x17a)),{scaleDownHubDeployment}=require(a21_0x1a5a06(0x1af)),{sendInstrumentationEvent}=require(a21_0x1a5a06(0x1c8)),webSocketUtils=require(a21_0x1a5a06(0x186)),{createK8sClient}=require(a21_0x1a5a06(0x182)),{getCloudProviderObject}=require(a21_0x1a5a06(0x199));exports[a21_0x1a5a06(0x1bc)]='grid',exports[a21_0x1a5a06(0x1a4)]=a21_0x1a5a06(0x172),exports['builder']=function(_0x15b59e){const _0x1737d9=a21_0x1a5a06,_0x381964={};_0x381964['PjYml']='Pass\x20the\x20ID\x20of\x20the\x20running\x20Automation\x20grid\x20you\x20want\x20to\x20stop.',_0x381964[_0x1737d9(0x18d)]=_0x1737d9(0x171),_0x381964['Kokgn']='Skip\x20insecure\x20cert\x20verification.',_0x381964[_0x1737d9(0x19c)]=_0x1737d9(0x192),_0x381964[_0x1737d9(0x18a)]=_0x1737d9(0x18e);const _0x1546aa=_0x381964,_0x3fe75b={};_0x3fe75b[_0x1737d9(0x175)]=_0x1546aa[_0x1737d9(0x1b0)],_0x3fe75b[_0x1737d9(0x1a6)]=_0x1546aa[_0x1737d9(0x18d)];const _0x111786={};_0x111786['description']=_0x1546aa[_0x1737d9(0x19d)],_0x111786[_0x1737d9(0x1a6)]=_0x1546aa[_0x1737d9(0x19c)],_0x111786[_0x1737d9(0x1d0)]=![];const _0x4691be={};return _0x4691be['grid-id']=_0x3fe75b,_0x4691be[_0x1737d9(0x1ac)]=_0x111786,_0x15b59e[_0x1737d9(0x17b)](HELP_HEADER_MESSAGE[_0x1737d9(0x19f)])['epilogue'](HELP_FOOTER_MESSAGE)['options'](_0x4691be)[_0x1737d9(0x18e)](_0x1546aa[_0x1737d9(0x18a)])[_0x1737d9(0x17f)];},exports[a21_0x1a5a06(0x18f)]=async function(_0x29ac6e){const _0x194d58=a21_0x1a5a06,_0x4464f4={'TRFam':_0x194d58(0x16f),'dftkg':function(_0x4e3dcf){return _0x4e3dcf();},'JWeYE':_0x194d58(0x187),'JnOZl':function(_0x2b9896,_0x41d4c5,_0x56dc60,_0x333f86,_0x5c8a83,_0x545a84,_0x2878c0){return _0x2b9896(_0x41d4c5,_0x56dc60,_0x333f86,_0x5c8a83,_0x545a84,_0x2878c0);},'ZmsOf':_0x194d58(0x1bf),'HXKlj':_0x194d58(0x1c6),'rwalK':function(_0x2deba6,_0x3a1d74,_0xf567e0,_0x51e22e,_0x4dd981,_0x44126f,_0x5ca1ae){return _0x2deba6(_0x3a1d74,_0xf567e0,_0x51e22e,_0x4dd981,_0x44126f,_0x5ca1ae);},'YWzqP':function(_0x3f62e8){return _0x3f62e8();},'eAVVw':_0x194d58(0x17e),'bvXPQ':_0x194d58(0x1c3),'PQZZu':_0x194d58(0x1ce),'qddRk':function(_0x424b82,_0x514197,_0x158997,_0x48bf75){return _0x424b82(_0x514197,_0x158997,_0x48bf75);},'liWUF':function(_0x28e165,_0x4362d0,_0x21afca){return _0x28e165(_0x4362d0,_0x21afca);},'VjmdT':function(_0x3fff48,_0x35f2d0,_0x23f0e1){return _0x3fff48(_0x35f2d0,_0x23f0e1);},'PUCPr':_0x194d58(0x17c),'twTxk':function(_0x1cd579,_0x395f8d){return _0x1cd579===_0x395f8d;},'AsaIK':_0x194d58(0x1ba),'qUZDB':_0x194d58(0x1a0),'mbknY':function(_0x39c7d8,_0x29122c){return _0x39c7d8===_0x29122c;},'pOXtc':function(_0x204b9b,_0x3af1a3,_0xdac4fb,_0x222004,_0x54b524,_0x4e9f04,_0x2b1c52){return _0x204b9b(_0x3af1a3,_0xdac4fb,_0x222004,_0x54b524,_0x4e9f04,_0x2b1c52);},'YkyDW':_0x194d58(0x1d2),'yrDFW':_0x194d58(0x1ab)};let _0x390273;try{!_0x29ac6e[_0x194d58(0x173)]&&(logger[_0x194d58(0x1c9)](_0x4464f4['TRFam']),process[_0x194d58(0x190)](0x1));!fs[_0x194d58(0x177)](_0x4464f4['dftkg'](getCredentialsPath))&&(logger[_0x194d58(0x1c9)](_0x4464f4[_0x194d58(0x1c0)]),await _0x4464f4[_0x194d58(0x195)](sendInstrumentationEvent,_0x29ac6e,_0x4464f4[_0x194d58(0x1aa)],messageTypes[_0x194d58(0x1a7)],_0x4464f4[_0x194d58(0x1a8)],null,_0x29ac6e),process[_0x194d58(0x190)](0x1));logger['info'](_0x194d58(0x1bd)+_0x29ac6e[_0x194d58(0x173)]),await _0x4464f4[_0x194d58(0x1a3)](sendInstrumentationEvent,_0x29ac6e,_0x4464f4[_0x194d58(0x1aa)],messageTypes[_0x194d58(0x178)],null,null,_0x29ac6e);const _0x44a96b=JSON[_0x194d58(0x19b)](fs[_0x194d58(0x1b7)](_0x4464f4[_0x194d58(0x18c)](getCredentialsPath)));global_registry[_0x194d58(0x1cb)]=_0x44a96b['Browserstack'][_0x194d58(0x170)],global_registry[_0x194d58(0x196)]=_0x44a96b[_0x194d58(0x176)]['password'];const _0x1f445c=WS_ENDPOINT[_0x194d58(0x1c4)](_0x4464f4[_0x194d58(0x1a5)],_0x44a96b['Browserstack'][_0x194d58(0x170)])[_0x194d58(0x1c4)](_0x4464f4[_0x194d58(0x1ad)],_0x44a96b[_0x194d58(0x176)][_0x194d58(0x17d)]),_0xab0419={};_0xab0419[_0x194d58(0x179)]=ws,_0xab0419['connectionTimeout']=0x36ee80,_0x390273=new ReconnectingWebSocket(_0x1f445c,[],_0xab0419),logger[_0x194d58(0x1bb)](_0x4464f4['PQZZu']),webSocketUtils[_0x194d58(0x1b9)](_0x390273,_0x29ac6e[_0x194d58(0x1c7)],_0x29ac6e[_0x194d58(0x17d)]);const [_0x373c93,_0x393180]=await _0x4464f4[_0x194d58(0x189)](getGridDetails,_0x44a96b[_0x194d58(0x176)][_0x194d58(0x170)],_0x44a96b[_0x194d58(0x176)]['password'],_0x29ac6e[_0x194d58(0x173)]);if(_0x393180){const _0x249377=_0x393180[_0x194d58(0x183)];global_registry[_0x194d58(0x191)]=_0x249377[_0x194d58(0x191)],global_registry[_0x194d58(0x1ae)]=_0x249377[_0x194d58(0x184)],global_registry['clusterName']=_0x249377[_0x194d58(0x1b5)];const _0x3e6b25=await _0x4464f4[_0x194d58(0x1a3)](getCloudProviderObject,_0x249377[_0x194d58(0x191)],_0x249377[_0x194d58(0x1b5)],_0x249377[_0x194d58(0x1b6)],_0x390273,webSocketUtils,_0x29ac6e),[_0x1bdef7,_0x582009,_0x406655,_0x13d4d1,_0x55aa65,_0x34d5b1]=await _0x4464f4['liWUF'](createK8sClient,_0x3e6b25,_0x29ac6e[_0x194d58(0x197)]);await _0x4464f4[_0x194d58(0x1c2)](scaleDownHubDeployment,_0x582009,_0x249377['name']),logger['info'](_0x4464f4[_0x194d58(0x19a)]),process[_0x194d58(0x190)](0x0);}_0x4464f4[_0x194d58(0x1a9)](_0x373c93[_0x194d58(0x194)],0x191)&&(logger['error'](_0x4464f4[_0x194d58(0x1b8)]),await _0x4464f4['rwalK'](sendInstrumentationEvent,_0x29ac6e,_0x4464f4[_0x194d58(0x1aa)],messageTypes['ERROR'],_0x4464f4[_0x194d58(0x18b)],null,_0x29ac6e),process[_0x194d58(0x190)](0x1)),_0x4464f4[_0x194d58(0x1c5)](_0x373c93['statusCode'],0x190)&&(logger[_0x194d58(0x1c9)](JSON[_0x194d58(0x19b)](_0x373c93[_0x194d58(0x188)])[_0x194d58(0x1cc)]),await _0x4464f4[_0x194d58(0x1cf)](sendInstrumentationEvent,_0x29ac6e,_0x4464f4[_0x194d58(0x1aa)],messageTypes['ERROR'],_0x4464f4['YkyDW'],null,_0x29ac6e),process[_0x194d58(0x190)](0x1)),logger[_0x194d58(0x1c9)](_0x194d58(0x1a1)+JSON[_0x194d58(0x1a2)](_0x373c93)),await _0x4464f4[_0x194d58(0x1a3)](sendInstrumentationEvent,_0x29ac6e,_0x4464f4['ZmsOf'],messageTypes['ERROR'],_0x4464f4['yrDFW'],_0x373c93,_0x29ac6e),process['exit'](0x1);}catch(_0x1c45b1){const _0x4102a5=_0x194d58(0x198)+_0x1c45b1+'\x20\x0a'+JSON[_0x194d58(0x1a2)](_0x1c45b1[_0x194d58(0x185)])+'\x20';logger['error'](_0x4102a5),process['exit'](0x1);}};