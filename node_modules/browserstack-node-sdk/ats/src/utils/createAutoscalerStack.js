const a26_0x1c3a8c=a26_0x9c81;(function(_0x583272,_0x2570ba){const _0x5953c2=a26_0x9c81,_0x116ee9=_0x583272();while(!![]){try{const _0x17f16f=parseInt(_0x5953c2(0x13a))/0x1*(parseInt(_0x5953c2(0x140))/0x2)+-parseInt(_0x5953c2(0x126))/0x3*(-parseInt(_0x5953c2(0x127))/0x4)+-parseInt(_0x5953c2(0x124))/0x5+parseInt(_0x5953c2(0x146))/0x6*(-parseInt(_0x5953c2(0x13b))/0x7)+-parseInt(_0x5953c2(0x12a))/0x8+-parseInt(_0x5953c2(0x13e))/0x9*(-parseInt(_0x5953c2(0x144))/0xa)+parseInt(_0x5953c2(0x13f))/0xb;if(_0x17f16f===_0x2570ba)break;else _0x116ee9['push'](_0x116ee9['shift']());}catch(_0x360e42){_0x116ee9['push'](_0x116ee9['shift']());}}}(a26_0x5353,0xbf7ac));const fs=require('fs'),path=require(a26_0x1c3a8c(0x122)),yaml=require('js-yaml'),{CLOUDFORMATION_SCHEMA}=require(a26_0x1c3a8c(0x145)),Promise=require('bluebird'),AWS=require(a26_0x1c3a8c(0x141))['awsObj'],{CLUSTER_AUTOSCALER_STACK_NAME,COMMON_HST_TAGS}=require('../config/constants'),{logger}=require('../config/logger');Promise[a26_0x1c3a8c(0x143)](fs);const addAutoscalerTags=async(_0x43976d,_0x4384cc,_0x36dcbc)=>{const _0x55bf14=a26_0x1c3a8c;for(const _0x327c17 in _0x43976d[_0x55bf14(0x12e)]){_0x43976d[_0x55bf14(0x12e)][_0x327c17][_0x55bf14(0x137)]&&_0x43976d[_0x55bf14(0x12e)][_0x327c17][_0x55bf14(0x137)][_0x55bf14(0x129)]&&_0x43976d[_0x55bf14(0x12e)][_0x327c17][_0x55bf14(0x137)][_0x55bf14(0x129)][_0x55bf14(0x12d)](..._0x36dcbc);}};function a26_0x9c81(_0x5e9c0b,_0x356367){const _0x535392=a26_0x5353();return a26_0x9c81=function(_0x9c8182,_0x255bc9){_0x9c8182=_0x9c8182-0x119;let _0x204183=_0x535392[_0x9c8182];return _0x204183;},a26_0x9c81(_0x5e9c0b,_0x356367);}function a26_0x5353(){const _0x51c084=['./AWSUtils','schema','promisifyAll','1891270iFuhFU','js-yaml-cloudformation-schema','2700rCaOji','valueOf','DELETE','axRoC','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','osIxm','apiVersion','xJbOo','TemplateBody','2010-05-15','join','path','load','5528335pBpTte','debug','1615233bwizab','4VGbXop','utf-8','Tags','2683192jWhVHX','VOSQW','CloudFormation','push','Resources','Value','promise','eAhvA','OnFailure','stringify','StackName','ClusterName','toString','Properties','waitFor','createStack','163ifaHpC','7189qvjHWI','Parameters','createAutoscalerStack','45iyWOFz','2270389dOteNp','12234IzYpvD'];a26_0x5353=function(){return _0x51c084;};return a26_0x5353();}exports[a26_0x1c3a8c(0x13d)]=async _0x4c5c8e=>{const _0x1e9758=a26_0x1c3a8c,_0x510c65={'FykvS':'browserstack:cluster','eAhvA':'browserstack:creationDate','xJbOo':_0x1e9758(0x120),'axRoC':'templates','tURKf':'autoscaler-role-creation.yaml','THaaF':_0x1e9758(0x128),'hbVvG':function(_0x3be579,_0x1467af,_0x365437,_0x42189c){return _0x3be579(_0x1467af,_0x365437,_0x42189c);},'ydNvm':_0x1e9758(0x119),'qLjyI':_0x1e9758(0x135),'osIxm':'CAPABILITY_NAMED_IAM','VOSQW':_0x1e9758(0x11b),'hpOeJ':'stackCreateComplete'},_0x412e8f=COMMON_HST_TAGS,_0x15751a={};_0x15751a['Key']=_0x510c65['FykvS'],_0x15751a[_0x1e9758(0x12f)]=_0x4c5c8e,_0x412e8f['push'](_0x15751a),_0x412e8f['push']({'Key':_0x510c65[_0x1e9758(0x131)],'Value':new Date()[_0x1e9758(0x147)]()[_0x1e9758(0x136)]()});const _0x3533ce={};_0x3533ce[_0x1e9758(0x11d)]=_0x510c65[_0x1e9758(0x11e)];const _0x2bf814=new AWS[(_0x1e9758(0x12c))](_0x3533ce),_0xc1542d=await fs['readFileAsync'](path[_0x1e9758(0x121)](__dirname,'..',_0x510c65[_0x1e9758(0x11a)],_0x510c65['tURKf']),_0x510c65['THaaF']),_0x13fda9={};_0x13fda9[_0x1e9758(0x142)]=CLOUDFORMATION_SCHEMA;const _0x53ad6d=yaml[_0x1e9758(0x123)](_0xc1542d,_0x13fda9);_0x510c65['hbVvG'](addAutoscalerTags,_0x53ad6d,_0x4c5c8e,_0x412e8f);const _0x21fb2f=JSON[_0x1e9758(0x133)](_0x53ad6d),_0x1a3dee={};_0x1a3dee[_0x1e9758(0x134)]=CLUSTER_AUTOSCALER_STACK_NAME+'-'+_0x4c5c8e,_0x1a3dee[_0x1e9758(0x132)]=_0x510c65['ydNvm'],_0x1a3dee[_0x1e9758(0x11f)]=_0x21fb2f,_0x1a3dee[_0x1e9758(0x13c)]=[{'ParameterKey':_0x510c65['qLjyI'],'ParameterValue':_0x4c5c8e}],_0x1a3dee['Capabilities']=[_0x510c65[_0x1e9758(0x11c)]],_0x1a3dee['Tags']=_0x412e8f;const _0x590aa5=_0x1a3dee,_0x599ffc=await _0x2bf814[_0x1e9758(0x139)](_0x590aa5)['promise']();logger[_0x1e9758(0x125)](_0x510c65[_0x1e9758(0x12b)]);const _0x4915c7={};return _0x4915c7['StackName']=_0x599ffc['StackId'],_0x2bf814[_0x1e9758(0x138)](_0x510c65['hpOeJ'],_0x4915c7)[_0x1e9758(0x130)]();};