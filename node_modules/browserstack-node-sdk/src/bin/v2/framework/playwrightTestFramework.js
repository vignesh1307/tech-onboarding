const a63_0x238b34=a63_0x49f7;function a63_0x49f7(_0x56f6a3,_0x2b89f2){const _0x1336e1=a63_0x1336();return a63_0x49f7=function(_0x49f70d,_0x5f20e7){_0x49f70d=_0x49f70d-0xbd;let _0x141580=_0x1336e1[_0x49f70d];return _0x141580;},a63_0x49f7(_0x56f6a3,_0x2b89f2);}(function(_0x31275c,_0x1cdd24){const _0x2aa222=a63_0x49f7,_0xbfcc34=_0x31275c();while(!![]){try{const _0x584f16=-parseInt(_0x2aa222(0x144))/0x1+parseInt(_0x2aa222(0x10a))/0x2+-parseInt(_0x2aa222(0x172))/0x3+-parseInt(_0x2aa222(0x11f))/0x4*(-parseInt(_0x2aa222(0x159))/0x5)+parseInt(_0x2aa222(0xf4))/0x6+parseInt(_0x2aa222(0x189))/0x7+-parseInt(_0x2aa222(0x18b))/0x8*(parseInt(_0x2aa222(0x131))/0x9);if(_0x584f16===_0x1cdd24)break;else _0xbfcc34['push'](_0xbfcc34['shift']());}catch(_0xaae0df){_0xbfcc34['push'](_0xbfcc34['shift']());}}}(a63_0x1336,0x66b5a));const TestFramework=require('./testFramework'),TestFrameworkState=require(a63_0x238b34(0xc7)),HookState=require(a63_0x238b34(0x100)),{createClassLogger}=require(a63_0x238b34(0x133)),TestFrameworkInstance=require(a63_0x238b34(0xd9)),CLIUtils=require('../cliUtils.js'),TrackedInstance=require(a63_0x238b34(0x157)),TestFrameworkConstants=require(a63_0x238b34(0xf0)),logger=createClassLogger('PlaywrightTestFramework'),{v4:uuidv4}=require('uuid'),util=require('util'),{getPlaywrightSessionName,getPlaywrightTestFilePath,getPlaywrightTestId,getPlaywrightTestTitle,getPlaywrightTestLocation,getPlaywrightTestTags,getPlaywrightTestCode,getPlaywrightTestScope,getPlaywrightTestScopes,getStepsAndLogs,getScreenshots,getPlaywrightCustomRerunParam,getMediaArtifactsLogs,getManualUploadLogs,updatePayloadForTraceLogs}=require('../../../helpers/helper.js'),TestInfo=require('../TestInfo.js'),GrpcClient=require(a63_0x238b34(0xef)),{removeAnsiColors,getFailureType,failureData}=require(a63_0x238b34(0x114)),{getFailureData,getTestTags}=require('../../playwright/reporter/pwUtils'),{findNestedKey,sendTraceZip,validateFilePath}=require('../../playwright/reporter/pwUtils'),path=require(a63_0x238b34(0xe2)),fs=require('fs'),helper=require(a63_0x238b34(0xf5)),{PLAYWRIGHT_TRACE_LOGS}=require(a63_0x238b34(0x179));class PlaywrightTestFramework extends TestFramework{constructor(_0x1b5ebf,_0x5e266a,_0x2abb0f){super(_0x1b5ebf,_0x5e266a,_0x2abb0f);}async[a63_0x238b34(0x14f)](_0xd232b0,_0x370d90,_0x41bdc7={}){const _0x19a626=a63_0x238b34,_0x30c478={};_0x30c478[_0x19a626(0x14d)]=function(_0x1ffbe0,_0x1f8997){return _0x1ffbe0===_0x1f8997;},_0x30c478[_0x19a626(0xff)]=function(_0xae32d0,_0x3d87b2){return _0xae32d0===_0x3d87b2;},_0x30c478['auftr']=_0x19a626(0xfd),_0x30c478[_0x19a626(0xc5)]=_0x19a626(0xd8);const _0x3f2175=_0x30c478;await super['trackEvent'](_0xd232b0,_0x370d90,_0x41bdc7);const _0x55a176=this[_0x19a626(0x160)](_0xd232b0,_0x370d90,_0x41bdc7);if(!_0x55a176)return;logger[_0x19a626(0x135)](_0x19a626(0x139)+_0xd232b0+_0x19a626(0x106)+_0x370d90+_0x19a626(0x16d)+_0x55a176['getRef']());try{if(_0x3f2175[_0x19a626(0x14d)](_0x370d90,HookState[_0x19a626(0x150)])&&_0x3f2175[_0x19a626(0x14d)](_0xd232b0,TestFrameworkState[_0x19a626(0x181)])){const _0x4652c9=_0x41bdc7[_0x19a626(0xfd)];logger[_0x19a626(0x135)](_0x19a626(0x11d)+_0x4652c9['id']+'}');const _0x3653fc=TestInfo[_0x19a626(0x186)](_0x4652c9['id']);_0x55a176['addMultipleEntries'](this[_0x19a626(0x15e)](_0x3653fc,_0x4652c9)),logger[_0x19a626(0x135)](_0x19a626(0x162)+_0x4652c9['id']+_0x19a626(0x118)+_0xd232b0+_0x19a626(0x141)+_0x370d90+_0x19a626(0x173)+_0x55a176[_0x19a626(0x11b)]());}if(_0x3f2175[_0x19a626(0xff)](_0x370d90,HookState[_0x19a626(0x12d)])&&_0x3f2175[_0x19a626(0x14d)](_0xd232b0,TestFrameworkState[_0x19a626(0x181)])){const _0x4ffbbe=_0x41bdc7[_0x19a626(0xfd)],_0x555906=_0x41bdc7[_0x19a626(0xed)];logger['debug'](_0x19a626(0xd5)+_0x4ffbbe['id']),_0x55a176['addMultipleEntries'](this[_0x19a626(0x129)](_0x4ffbbe['id'],_0x555906,_0x4ffbbe)),this['sendLogCreatedEvent'](_0x55a176,_0xd232b0,_0x370d90,_0x3f2175[_0x19a626(0x107)],_0x41bdc7);}if(CLIUtils['matchHookRegex'](_0xd232b0[_0x19a626(0xe5)]()[_0x19a626(0x117)]('.')[0x1])){const _0x436411=await this[_0x19a626(0xfb)](_0x55a176,_0xd232b0,_0x370d90,_0x41bdc7);_0x55a176[_0x19a626(0x134)](_0x436411);}}catch(_0x2f9b39){logger[_0x19a626(0x18a)](util[_0x19a626(0x12e)](_0x3f2175[_0x19a626(0xc5)],_0xd232b0,_0x370d90,_0x41bdc7[_0x19a626(0xd7)],_0x2f9b39));}_0x41bdc7[_0x19a626(0xcd)]=_0x55a176,await this[_0x19a626(0x16e)](_0x55a176,_0xd232b0,_0x370d90,_0x41bdc7);}[a63_0x238b34(0x160)](_0x1200a3,_0x5d73b9,_0x370452={}){const _0x101bca=a63_0x238b34,_0xe1389f={};_0xe1389f[_0x101bca(0x149)]=function(_0x434dcf,_0x1dddca){return _0x434dcf===_0x1dddca;},_0xe1389f[_0x101bca(0xc2)]=function(_0x5f48ff,_0x5edbed){return _0x5f48ff===_0x5edbed;};const _0x13dd7b=_0xe1389f;let _0x4c907f=null;return(_0x13dd7b[_0x101bca(0x149)](_0x1200a3,TestFrameworkState[_0x101bca(0x138)])||_0x13dd7b[_0x101bca(0xc2)](_0x1200a3,TestFrameworkState[_0x101bca(0x14e)]))&&this[_0x101bca(0x11c)](_0x1200a3,_0x370452),_0x4c907f=TestFramework[_0x101bca(0xc1)](),_0x4c907f;}[a63_0x238b34(0x11c)](_0x4b9503,_0x36b6c0){const _0xc84b4=a63_0x238b34,_0x5779ee=CLIUtils[_0xc84b4(0xdc)](),_0x328970=TrackedInstance[_0xc84b4(0x184)](_0x5779ee);let _0x4dc35b=null;logger[_0xc84b4(0x188)](_0xc84b4(0xcc)+_0x5779ee+_0xc84b4(0x15c)+_0x4b9503),_0x4dc35b=new TestFrameworkInstance(_0x328970,this['getTestFrameworks'](),this[_0xc84b4(0xc4)](),_0x4b9503,HookState[_0xc84b4(0x14e)]),TestFramework[_0xc84b4(0x18c)](_0x328970,_0x4dc35b),logger[_0xc84b4(0x188)](_0xc84b4(0xdb)+_0x328970[_0xc84b4(0xce)]()+_0xc84b4(0x11a)+_0x5779ee);}[a63_0x238b34(0x15e)](_0x197309,_0x450dbf){const _0x25f149=a63_0x238b34,_0x5efdae={'ObMpD':function(_0x41f0ca,_0x3bb221){return _0x41f0ca(_0x3bb221);},'jnXkV':function(_0x29254f,_0x322139){return _0x29254f(_0x322139);},'IDmmH':function(_0x18f385,_0xfbc87e){return _0x18f385(_0xfbc87e);},'QRmxz':function(_0x183af7,_0x355b6b){return _0x183af7(_0x355b6b);}},_0x63b917=_0x5efdae[_0x25f149(0x17b)](getPlaywrightTestId,_0x450dbf),_0x30065a=_0x5efdae['ObMpD'](getPlaywrightTestTitle,_0x450dbf),_0x2e986a=_0x5efdae['jnXkV'](getTestTags,_0x450dbf),_0x5ef536=_0x5efdae['IDmmH'](getPlaywrightTestCode,_0x450dbf),_0x3fdc07=_0x5efdae['ObMpD'](getPlaywrightTestFilePath,_0x450dbf),_0x497315=_0x3fdc07+':'+_0x5efdae[_0x25f149(0xe7)](getPlaywrightTestLocation,_0x450dbf),_0x5b815b=_0x5efdae[_0x25f149(0xe7)](getPlaywrightTestScope,_0x450dbf),_0x26672d=_0x5efdae[_0x25f149(0xf9)](getPlaywrightTestScopes,_0x450dbf),_0x4dd7d9=_0x5efdae[_0x25f149(0xf9)](getPlaywrightSessionName,_0x450dbf),_0x82bda9=this[_0x25f149(0xc6)]()[0x0],_0x59affe={[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']]:_0x82bda9,[TestFrameworkConstants[_0x25f149(0x111)]]:this[_0x25f149(0xc4)]()[_0x82bda9],[TestFrameworkConstants['KEY_TEST_LOGS']]:[],[TestFrameworkConstants[_0x25f149(0xea)]]:{},[TestFrameworkConstants[_0x25f149(0x12b)]]:{},[TestFrameworkConstants[_0x25f149(0x17c)]]:_0x197309,[TestFrameworkConstants['KEY_TEST_RESULT']]:TestFrameworkConstants[_0x25f149(0xc3)],[TestFrameworkConstants[_0x25f149(0x128)]]:_0x4dd7d9,[TestFrameworkConstants[_0x25f149(0x10f)]]:_0x3fdc07,[TestFrameworkConstants[_0x25f149(0x126)]]:_0x63b917,[TestFrameworkConstants[_0x25f149(0x161)]]:_0x30065a,[TestFrameworkConstants[_0x25f149(0x169)]]:_0x497315,[TestFrameworkConstants[_0x25f149(0x17a)]]:_0x5ef536,[TestFrameworkConstants[_0x25f149(0x185)]]:_0x2e986a,[TestFrameworkConstants[_0x25f149(0x156)]]:_0x450dbf[_0x25f149(0x116)][0x0]['startTime'],[TestFrameworkConstants[_0x25f149(0x112)]]:_0x5b815b,[TestFrameworkConstants[_0x25f149(0x155)]]:_0x26672d,[TestFrameworkConstants[_0x25f149(0xbe)]]:_0x5efdae[_0x25f149(0xf9)](getPlaywrightCustomRerunParam,_0x450dbf)};TestInfo[_0x25f149(0xe9)](_0x450dbf['id'],_0x59affe);const _0x4a1330={};return _0x4a1330[_0x63b917]=_0x59affe,_0x4a1330;}[a63_0x238b34(0x129)](_0x1d9cbe,_0x586e62,_0x292d83){const _0x1603e4=a63_0x238b34,_0xdb8f62={'hTYsD':function(_0x3c32b7,_0x3822aa){return _0x3c32b7(_0x3822aa);},'mRNdf':_0x1603e4(0xd0),'ynaeg':function(_0x30fb2e,_0x5e3127){return _0x30fb2e===_0x5e3127;},'EKIaN':function(_0x988e22,_0x10f0ef){return _0x988e22===_0x10f0ef;},'GzKFU':function(_0x5df3c3,_0xf3ed43){return _0x5df3c3===_0xf3ed43;},'EIcjY':function(_0x24d016,_0x259d88){return _0x24d016(_0x259d88);},'odYMI':'No\x20reason\x20provided','qnpNF':_0x1603e4(0xf7),'nyGYe':function(_0x3cbbb9,_0x9187da){return _0x3cbbb9(_0x9187da);},'gNyaA':function(_0x3fcbae,_0x575bf9){return _0x3fcbae+_0x575bf9;},'TcsZn':_0x1603e4(0x103),'SxMbH':_0x1603e4(0x13b),'EFIkA':function(_0x3f338f,_0x2d5dd4){return _0x3f338f===_0x2d5dd4;},'LsMOq':'failed','nAJVi':function(_0x38c369,_0x55d453){return _0x38c369===_0x55d453;},'XsXzx':_0x1603e4(0x180),'FtVIA':function(_0x11a3c4,_0x372640){return _0x11a3c4===_0x372640;},'Vklnf':function(_0x127fcb,_0x3ab5fc){return _0x127fcb===_0x3ab5fc;},'JEXpv':'Expected\x20to\x20fail,\x20but\x20passed.','jQYMn':function(_0x345509,_0x457a90,_0x53bffc){return _0x345509(_0x457a90,_0x53bffc);},'dDfcm':function(_0x4c2fe5,_0x23b175){return _0x4c2fe5||_0x23b175;},'wBPAU':function(_0xfeb3a6,_0x3b15fc){return _0xfeb3a6(_0x3b15fc);},'dVqfK':function(_0x364485,_0x40af4d){return _0x364485(_0x40af4d);},'lJTzr':function(_0x20eaf2,_0x29e76a,_0x58403d){return _0x20eaf2(_0x29e76a,_0x58403d);},'Opvyz':_0x1603e4(0xe2),'uVdlU':function(_0x27f5aa,_0x30a8c3){return _0x27f5aa>_0x30a8c3;}};logger[_0x1603e4(0x135)](_0x1603e4(0xde)+_0x1d9cbe);const _0x86b7b=new Date(_0x586e62[_0x1603e4(0xe4)]),_0x3e261e=_0x586e62['duration'],_0x1a535a=new Date(_0xdb8f62[_0x1603e4(0x13e)](_0x86b7b[_0x1603e4(0xd6)](),_0x3e261e)),_0x57ed83=_0x586e62[_0x1603e4(0x13a)],_0x136b44=TestInfo[_0x1603e4(0x16b)](_0x1d9cbe)[TestFrameworkConstants[_0x1603e4(0xf6)]]||{};let _0x2b9158=_0x57ed83;if(_0xdb8f62[_0x1603e4(0xd3)](_0x586e62[_0x1603e4(0x13a)],_0x292d83[_0x1603e4(0x102)]))_0x2b9158=_0xdb8f62[_0x1603e4(0x142)](_0x586e62[_0x1603e4(0x13a)],_0xdb8f62['TcsZn'])?_0xdb8f62[_0x1603e4(0x105)]:_0xdb8f62['SxMbH'];else{(_0xdb8f62['EFIkA'](_0x2b9158,_0xdb8f62[_0x1603e4(0x136)])||_0xdb8f62['EKIaN'](_0x2b9158,_0xdb8f62[_0x1603e4(0xd1)])||_0xdb8f62[_0x1603e4(0x130)](_0x2b9158,_0xdb8f62[_0x1603e4(0xd2)]))&&(_0x2b9158=_0xdb8f62[_0x1603e4(0xd1)]);if(_0xdb8f62[_0x1603e4(0xbd)](_0x586e62[_0x1603e4(0x13a)],_0xdb8f62[_0x1603e4(0x136)])&&_0xdb8f62[_0x1603e4(0xf8)](_0x292d83['expectedStatus'],_0xdb8f62[_0x1603e4(0xd1)])){const _0x133513={};_0x133513[_0x1603e4(0x168)]=_0xdb8f62[_0x1603e4(0xee)],_0x133513[_0x1603e4(0x12c)]=_0xdb8f62[_0x1603e4(0xee)],_0x586e62[_0x1603e4(0x18a)]=_0x133513,_0x586e62[_0x1603e4(0x124)]=[_0x586e62[_0x1603e4(0x18a)]];}}const {failureData:_0x3a99f9,logs:_0x5bdca5}=_0xdb8f62['jQYMn'](getFailureData,_0x586e62?.[_0x1603e4(0x124)],{}),_0x397d52={[TestFrameworkConstants['KEY_TEST_FAILURE']]:_0xdb8f62[_0x1603e4(0x12a)](_0x3a99f9,null),[TestFrameworkConstants[_0x1603e4(0xec)]]:_0x586e62?.[_0x1603e4(0x18a)]&&_0xdb8f62[_0x1603e4(0x113)](getFailureType,_0x586e62[_0x1603e4(0x18a)][_0x1603e4(0x168)]),[TestFrameworkConstants['KEY_TEST_FAILURE_REASON']]:_0x586e62?.[_0x1603e4(0x18a)]&&_0xdb8f62[_0x1603e4(0x109)](removeAnsiColors,_0x586e62[_0x1603e4(0x18a)]['message']),[TestFrameworkConstants['KEY_LOGS']]:[],[TestFrameworkConstants[_0x1603e4(0xe1)]]:_0x2b9158,[TestFrameworkConstants[_0x1603e4(0x177)]]:_0x1a535a[_0x1603e4(0xda)](),[TestFrameworkConstants['KEY_TEST_RESULT_AT']]:new Date()['toISOString'](),[TestFrameworkConstants[_0x1603e4(0xf6)]]:_0x136b44},_0x414523={};_0x414523[_0x1603e4(0xfd)]=_0x292d83;const _0x1ce133=this[_0x1603e4(0x160)](TestFrameworkState[_0x1603e4(0x181)],HookState[_0x1603e4(0x12d)],_0x414523),_0x240318=_0x1ce133[_0x1603e4(0x170)]()[_0x1603e4(0x120)](_0x1d9cbe)[TestFrameworkConstants[_0x1603e4(0x17c)]],_0x2acaf7=[],_0x40def4=_0xdb8f62[_0x1603e4(0x163)](findNestedKey,_0x586e62,_0xdb8f62[_0x1603e4(0x174)]);if(_0x40def4&&_0xdb8f62[_0x1603e4(0x109)](validateFilePath,_0x40def4))try{_0x2acaf7[_0x1603e4(0xcf)]({'kind':_0xdb8f62[_0x1603e4(0xf2)],'timestamp':new Date()['toISOString'](),'test_run_uuid':_0x240318,'file_name':path[_0x1603e4(0x13c)](_0x40def4),'file_size':fs[_0x1603e4(0x14b)](_0x40def4)[_0x1603e4(0xfa)],'attachment_type':PLAYWRIGHT_TRACE_LOGS});}catch(_0xc5cd7e){logger[_0x1603e4(0x18a)]('Error\x20processing\x20direct\x20trace\x20file\x20'+_0x40def4+':\x20'+_0xc5cd7e[_0x1603e4(0x168)]);}const _0x5cdeab=TestInfo[_0x1603e4(0x175)](),_0x191ec4=_0x5cdeab[_0x1603e4(0x140)](_0x1ee3c2=>_0x1ee3c2[_0x1603e4(0xf3)]===_0x240318);_0x191ec4['forEach'](_0x4bcd91=>{const _0xa7c4ba=_0x1603e4;if(_0x4bcd91[_0xa7c4ba(0x15f)]&&_0xdb8f62['hTYsD'](validateFilePath,_0x4bcd91['filePath'])&&!_0x2acaf7[_0xa7c4ba(0xfc)](_0x5225bb=>_0x5225bb[_0xa7c4ba(0x151)]===path[_0xa7c4ba(0x13c)](_0x4bcd91[_0xa7c4ba(0x15f)])))try{_0x2acaf7[_0xa7c4ba(0xcf)]({'kind':_0xdb8f62['mRNdf'],'timestamp':new Date()[_0xa7c4ba(0xda)](),'test_run_uuid':_0x240318,'file_name':path[_0xa7c4ba(0x13c)](_0x4bcd91[_0xa7c4ba(0x15f)]),'file_size':fs[_0xa7c4ba(0x14b)](_0x4bcd91['filePath'])['size'],'attachment_type':PLAYWRIGHT_TRACE_LOGS});}catch(_0x2b3f67){logger[_0xa7c4ba(0x18a)](_0xa7c4ba(0x14a)+_0x4bcd91[_0xa7c4ba(0x15f)]+_0xa7c4ba(0xe8)+_0x2b3f67[_0xa7c4ba(0x168)]);}});if(_0xdb8f62['uVdlU'](_0x2acaf7[_0x1603e4(0xd7)],0x0)){const _0x1352fe=_0x397d52[TestFrameworkConstants[_0x1603e4(0x12f)]]||[];_0x397d52[TestFrameworkConstants[_0x1603e4(0x12f)]]=[..._0x1352fe,..._0x2acaf7];}const _0x4bdbb5=TestInfo['getTestDetails'](_0x1d9cbe)[TestFrameworkConstants[_0x1603e4(0x115)]]||{},_0x4a2e10=_0xdb8f62[_0x1603e4(0x163)](getManualUploadLogs,_0x4bdbb5,_0x1ce133[_0x1603e4(0x170)]()['get'](_0x1d9cbe)[TestFrameworkConstants[_0x1603e4(0x17c)]]);if(_0xdb8f62[_0x1603e4(0x16c)](_0x4a2e10[_0x1603e4(0xd7)],0x0)){const _0x482566=_0x397d52[TestFrameworkConstants[_0x1603e4(0x12f)]]||[];_0x397d52[TestFrameworkConstants[_0x1603e4(0x12f)]]=[..._0x482566,..._0x4a2e10];}const _0x3f0a20=_0x292d83[_0x1603e4(0x108)]||[],_0x21c86a=_0x397d52[TestFrameworkConstants[_0x1603e4(0xf6)]]||{};_0x3f0a20[_0x1603e4(0x101)](_0x45b410=>{const _0x283f68=_0x1603e4,{type:_0x5c16f3}=_0x45b410;let _0x20c160=_0x45b410[_0x283f68(0x17e)];if(!_0x5c16f3)return;(_0xdb8f62[_0x283f68(0xd3)](_0x20c160,undefined)||_0xdb8f62['EKIaN'](_0x20c160,null)||_0xdb8f62[_0x283f68(0x142)](_0xdb8f62[_0x283f68(0x119)](String,_0x20c160)['trim'](),''))&&(_0x20c160=_0xdb8f62['odYMI']);if(!_0x21c86a[_0x5c16f3]){const _0x2c1ed6={};_0x2c1ed6[_0x283f68(0x17f)]=_0xdb8f62['qnpNF'],_0x2c1ed6[_0x283f68(0x17d)]=[],_0x21c86a[_0x5c16f3]=_0x2c1ed6;}else!_0x21c86a[_0x5c16f3][_0x283f68(0x17f)]&&(_0x21c86a[_0x5c16f3][_0x283f68(0x17f)]=_0xdb8f62[_0x283f68(0x178)]),!Array['isArray'](_0x21c86a[_0x5c16f3][_0x283f68(0x17d)])&&(_0x21c86a[_0x5c16f3]['values']=[]);const _0x17b6fd=_0xdb8f62[_0x283f68(0x123)](String,_0x20c160)[_0x283f68(0x117)](',')[_0x283f68(0xf1)](_0x5633b8=>_0x5633b8[_0x283f68(0x16f)]());_0x21c86a[_0x5c16f3][_0x283f68(0x17d)]=[...new Set([..._0x21c86a[_0x5c16f3][_0x283f68(0x17d)],..._0x17b6fd])];}),_0x397d52[TestFrameworkConstants['KEY_CUSTOM_TAGS']]=_0x21c86a,TestInfo[_0x1603e4(0xe9)](_0x1d9cbe,_0x397d52);const _0x57ebfb={};return _0x57ebfb[_0x1d9cbe]=_0x397d52,_0x57ebfb;}async[a63_0x238b34(0xfb)](_0x1bea36,_0x361baa,_0x383d06,_0x2bfcfe){const _0x12c7c1=a63_0x238b34,_0x721097={'aMKKY':function(_0x401675,_0x58816b){return _0x401675 in _0x58816b;},'zotDM':function(_0x22954b,_0x2555c7){return _0x22954b in _0x2555c7;},'CkIIO':function(_0x337a78,_0x32ae93){return _0x337a78(_0x32ae93);},'NVMYs':function(_0x3936c8,_0x379f15){return _0x3936c8(_0x379f15);},'wXzJG':function(_0x129015,_0x1bc879){return _0x129015===_0x1bc879;},'jKYMf':function(_0x1b58bc){return _0x1b58bc();},'XwDUT':function(_0x54bc43,_0x4664bc){return _0x54bc43>_0x4664bc;},'bdZVO':function(_0x232023,_0x48968a,_0x56601b){return _0x232023(_0x48968a,_0x56601b);},'UOWqq':_0x12c7c1(0x10c),'tRwXJ':_0x12c7c1(0xe0),'HkCqq':_0x12c7c1(0x13b),'vTIlC':function(_0x3aae76,_0x354837){return _0x3aae76!==_0x354837;},'hPvDr':function(_0x51513b,_0x5d103e){return _0x51513b+_0x5d103e;},'wYfyg':_0x12c7c1(0xc8)},_0x187ddb=_0x2bfcfe[_0x12c7c1(0xfd)],_0x553f91=_0x2bfcfe[_0x12c7c1(0x153)],_0x407c5f=_0x2bfcfe[_0x12c7c1(0xfd)]['id'],_0x30a3d6=_0x361baa[_0x12c7c1(0xe5)]()[_0x12c7c1(0x117)]('.')[0x1];let _0x4aa925=_0x1bea36[_0x12c7c1(0x170)]()['get'](_0x407c5f)[TestFrameworkConstants[_0x12c7c1(0x12b)]];!_0x4aa925&&(_0x4aa925={});!_0x721097[_0x12c7c1(0x10b)](_0x30a3d6,_0x4aa925)&&(_0x4aa925[_0x30a3d6]=[]);let _0x5cd014=_0x1bea36[_0x12c7c1(0x170)]()[_0x12c7c1(0x120)](_0x407c5f)[TestFrameworkConstants[_0x12c7c1(0xea)]];!_0x5cd014&&(_0x5cd014={});!_0x721097[_0x12c7c1(0x158)](_0x30a3d6,_0x5cd014)&&(_0x5cd014[_0x30a3d6]=[]);const _0x57b856={[TestFrameworkConstants[_0x12c7c1(0x12b)]]:_0x4aa925,[TestFrameworkConstants['KEY_HOOKS_FINISHED']]:_0x5cd014},_0x5e1410={};_0x5e1410[_0x407c5f]=_0x57b856;const _0x2cdafc=_0x5e1410,_0x3e4838=_0x721097['CkIIO'](getPlaywrightTestFilePath,_0x187ddb),_0x550bea=_0x3e4838+':'+_0x721097[_0x12c7c1(0xcb)](getPlaywrightTestLocation,_0x187ddb),_0x553157=TestInfo[_0x12c7c1(0x16b)](_0x407c5f)[TestFrameworkConstants[_0x12c7c1(0xf6)]]||{};if(_0x721097[_0x12c7c1(0x145)](_0x383d06,HookState[_0x12c7c1(0x150)])){const _0xee637c={'key':_0x30a3d6,[TestFrameworkConstants['KEY_HOOK_ID']]:_0x721097[_0x12c7c1(0x13f)](uuidv4),[TestFrameworkConstants[_0x12c7c1(0x183)]]:TestFrameworkConstants['DEFAULT_HOOK_RESULT'],[TestFrameworkConstants[_0x12c7c1(0x15a)]]:_0x553f91['startTime'],[TestFrameworkConstants[_0x12c7c1(0xc0)]]:[],[TestFrameworkConstants[_0x12c7c1(0xca)]]:_0x553f91[_0x12c7c1(0x15d)],[TestFrameworkConstants['KEY_TEST_FILE_PATH']]:_0x3e4838,[TestFrameworkConstants[_0x12c7c1(0x169)]]:_0x550bea,[TestFrameworkConstants[_0x12c7c1(0xf6)]]:_0x553157};_0x4aa925[_0x30a3d6][_0x12c7c1(0xcf)](_0xee637c),_0x2cdafc[_0x407c5f][TestFrameworkConstants['KEY_HOOK_LAST_STARTED']]=_0x30a3d6,logger['debug'](_0x12c7c1(0xd4)+_0x30a3d6+_0x12c7c1(0xdf)+_0xee637c+_0x12c7c1(0x110)+_0x2bfcfe);}else{if(_0x721097[_0x12c7c1(0x145)](_0x383d06,HookState['POST'])){const _0x4756de=await _0x2bfcfe[_0x12c7c1(0xed)],_0x36c797=_0x4aa925[_0x30a3d6]||[],_0x3d1631=_0x2bfcfe[_0x12c7c1(0x153)];logger[_0x12c7c1(0x135)](_0x12c7c1(0x182)+_0x36c797+_0x12c7c1(0x125)+_0x2bfcfe);if(_0x721097[_0x12c7c1(0xbf)](_0x36c797['length'],0x0)){const _0x47f240=_0x36c797[_0x12c7c1(0x137)]();if(_0x3d1631[_0x12c7c1(0x18a)]){const _0x4f43b8=_0x721097['bdZVO'](failureData,_0x3d1631[_0x12c7c1(0x18a)],_0x721097[_0x12c7c1(0xfe)]);_0x47f240[TestFrameworkConstants[_0x12c7c1(0x165)]]=_0x721097[_0x12c7c1(0xcb)](getFailureType,_0x3d1631?.['error']['message']),_0x47f240[TestFrameworkConstants[_0x12c7c1(0xdd)]]=_0x721097[_0x12c7c1(0xcb)](removeAnsiColors,_0x3d1631?.[_0x12c7c1(0x18a)]['message']),_0x47f240[TestFrameworkConstants[_0x12c7c1(0x183)]]=_0x721097[_0x12c7c1(0x104)],_0x47f240[TestFrameworkConstants[_0x12c7c1(0x187)]]=_0x4f43b8;}else _0x47f240[TestFrameworkConstants[_0x12c7c1(0x183)]]=_0x721097[_0x12c7c1(0x164)];_0x721097[_0x12c7c1(0x148)](_0x4756de,TestFrameworkConstants[_0x12c7c1(0x13d)])&&(_0x47f240[TestFrameworkConstants[_0x12c7c1(0x183)]]=!_0x3d1631[_0x12c7c1(0x18a)]?_0x721097[_0x12c7c1(0x164)]:_0x721097[_0x12c7c1(0x104)]);const _0xcafd4a=new Date(_0x3d1631[_0x12c7c1(0xe4)]),_0x4cc1f9=new Date(_0x721097[_0x12c7c1(0x122)](_0xcafd4a[_0x12c7c1(0xd6)](),_0x3d1631[_0x12c7c1(0x15b)]));_0x47f240[TestFrameworkConstants['KEY_EVENT_ENDED_AT']]=_0x4cc1f9[_0x12c7c1(0xda)](),_0x47f240[TestFrameworkConstants['KEY_CUSTOM_TAGS']]=_0x553157;const _0x26db95=_0x47f240[TestFrameworkConstants[_0x12c7c1(0x14c)]];await this['sendLogCreatedEvent'](_0x1bea36,_0x361baa,_0x26db95,_0x721097[_0x12c7c1(0x146)],_0x2bfcfe),!_0x5cd014[_0x30a3d6]&&(_0x5cd014[_0x30a3d6]=[]),_0x5cd014[_0x30a3d6][_0x12c7c1(0xcf)](_0x47f240),_0x2cdafc[_0x407c5f][TestFrameworkConstants[_0x12c7c1(0x167)]]=_0x30a3d6;}}}return _0x2cdafc;}async[a63_0x238b34(0x147)](_0x429c7e,_0x2a71cc,_0x49d24c,_0x59ad9e,_0x2469bf){const _0x333edf=a63_0x238b34,_0x31f38f={'mmlXI':function(_0x46b576,_0x3f22ba){return _0x46b576===_0x3f22ba;},'kTXKJ':_0x333edf(0xfd),'xWXXE':function(_0x5a382a,_0x3a32eb,_0x2ee05d){return _0x5a382a(_0x3a32eb,_0x2ee05d);},'sJDzX':function(_0xd200fd,_0x5965cb,_0x5ee4d0,_0x35a873){return _0xd200fd(_0x5965cb,_0x5ee4d0,_0x35a873);},'UunZn':function(_0x2f724c,_0x3383ff,_0x31a3d6){return _0x2f724c(_0x3383ff,_0x31a3d6);},'Rxbaa':function(_0x4a4593,_0x732c78,_0x27b0b9){return _0x4a4593(_0x732c78,_0x27b0b9);},'jHaLw':function(_0x2e6740,_0x28daa8,_0x5d809d,_0x18114d,_0x11cc87){return _0x2e6740(_0x28daa8,_0x5d809d,_0x18114d,_0x11cc87);},'ephnU':function(_0x5627c9,_0x16e03b,_0x2a79dc,_0xcc9b27){return _0x5627c9(_0x16e03b,_0x2a79dc,_0xcc9b27);},'BnWhF':'hook'};try{if(_0x31f38f[_0x333edf(0x166)](_0x59ad9e,_0x31f38f['kTXKJ'])){const _0x435cc0=await _0x2469bf[_0x333edf(0xed)],_0x4f811d=_0x2469bf[_0x333edf(0xfd)]['id'],_0x575a95=_0x2469bf[_0x333edf(0xfd)];logger[_0x333edf(0x135)](_0x333edf(0xc9)+_0x4f811d);const _0x5d6139=_0x429c7e['getAllData']()['get'](_0x4f811d)[TestFrameworkConstants[_0x333edf(0x17c)]];await _0x31f38f[_0x333edf(0x16a)](sendTraceZip,_0x435cc0,_0x5d6139);const {steps:_0x479a2f,logs:_0x5e96de}=_0x31f38f[_0x333edf(0x132)](getStepsAndLogs,_0x435cc0[_0x333edf(0x176)],_0x429c7e[_0x333edf(0x170)]()[_0x333edf(0x120)](_0x4f811d)[TestFrameworkConstants[_0x333edf(0x17c)]],_0x31f38f[_0x333edf(0x154)]),_0x34a4f3=_0x31f38f[_0x333edf(0x16a)](getScreenshots,_0x435cc0,_0x429c7e[_0x333edf(0x170)]()[_0x333edf(0x120)](_0x4f811d)[TestFrameworkConstants[_0x333edf(0x17c)]]),{_:_0x58e47a,logs:_0x1041f1}=_0x31f38f[_0x333edf(0x152)](getFailureData,_0x435cc0[_0x333edf(0x124)],{'test_run_uuid':_0x429c7e[_0x333edf(0x170)]()[_0x333edf(0x120)](_0x4f811d)[TestFrameworkConstants[_0x333edf(0x17c)]]}),_0x570844=TestInfo[_0x333edf(0x16b)](_0x4f811d)[TestFrameworkConstants[_0x333edf(0x115)]]||{},_0x4f935c=_0x31f38f['Rxbaa'](getMediaArtifactsLogs,_0x570844,_0x429c7e[_0x333edf(0x170)]()[_0x333edf(0x120)](_0x4f811d)[TestFrameworkConstants['KEY_TEST_UUID']]),_0x253866=_0x429c7e[_0x333edf(0x170)]()[_0x333edf(0x120)](_0x4f811d),{[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']]:_0x8d2deb='',[TestFrameworkConstants[_0x333edf(0x111)]]:_0x37cf56=''}=_0x253866,_0x10ad18={'platformIndex':'0','logs':[..._0x5e96de||[],..._0x34a4f3||[],..._0x1041f1||[],..._0x4f935c||[]],'testFrameworkName':_0x8d2deb,'testFrameworkVersion':_0x37cf56,'testFrameworkState':_0x2a71cc[_0x333edf(0xe5)]()[_0x333edf(0x117)]('.')[0x1]};_0x31f38f[_0x333edf(0x10d)](updatePayloadForTraceLogs,_0x10ad18,_0x2469bf,_0x4f811d,_0x429c7e),logger[_0x333edf(0x135)](_0x333edf(0xeb)+_0x4f811d+_0x333edf(0xe6)+util[_0x333edf(0x143)](_0x10ad18));const _0x1a8810=await GrpcClient[_0x333edf(0xe3)]()[_0x333edf(0x10e)](_0x10ad18);}else{const {steps:_0x2f1ab0,logs:_0x3554e0}=_0x31f38f[_0x333edf(0x121)](getStepsAndLogs,_0x2469bf['step'][_0x333edf(0x176)],_0x49d24c,_0x31f38f[_0x333edf(0x171)]),_0x1f9921=_0x2469bf['test']['id'];logger[_0x333edf(0x135)](_0x333edf(0xc9)+_0x1f9921);const _0x341e06=_0x429c7e[_0x333edf(0x170)]()[_0x333edf(0x120)](_0x1f9921),{[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']]:_0x19f11b='',[TestFrameworkConstants[_0x333edf(0x111)]]:_0x4ad636=''}=_0x341e06,_0x5d1093={'platformIndex':'0','logs':_0x3554e0,'testFrameworkName':_0x19f11b,'testFrameworkVersion':_0x4ad636,'testFrameworkState':_0x2a71cc[_0x333edf(0xe5)]()[_0x333edf(0x117)]('.')[0x1]};_0x31f38f[_0x333edf(0x10d)](updatePayloadForTraceLogs,_0x5d1093,_0x2469bf,_0x1f9921,_0x429c7e),logger[_0x333edf(0x135)](_0x333edf(0xeb)+_0x1f9921+_0x333edf(0xe6)+util[_0x333edf(0x143)](_0x5d1093));const _0x1261c6=await GrpcClient['getInstance']()['logCreatedEvent'](_0x5d1093);}}catch(_0x25e6b7){logger[_0x333edf(0x18a)](_0x333edf(0x11e)+util[_0x333edf(0x12e)](_0x25e6b7));}}}module[a63_0x238b34(0x127)]=PlaywrightTestFramework;function a63_0x1336(){const _0x508490=['trackEvent:\x20found\x20instance,\x20testFrameworkState=','status','passed','basename','DEFAULT_HOOK_RESULT','gNyaA','jKYMf','filter','\x20testHookState=','GzKFU','inspect','579628AjqBAo','wXzJG','wYfyg','sendLogCreatedEvent','vTIlC','RqDas','Error\x20processing\x20trace\x20file\x20','statSync','KEY_HOOK_ID','OCghb','NONE','trackEvent','PRE','file_name','UunZn','step','kTXKJ','KEY_TEST_SCOPES','KEY_TEST_STARTED_AT','../instances/trackedInstance.js','zotDM','5WbvxWG','KEY_EVENT_STARTED_AT','duration',',\x20state=','title','parsePlaywrightTest','filePath','resolveInstance','KEY_TEST_NAME','trackEvent:\x20loaded\x20testData\x20for\x20testId:\x20','lJTzr','HkCqq','KEY_HOOK_FAILURE_TYPE','mmlXI','KEY_HOOK_LAST_FINISHED','message','KEY_TEST_LOCATION','xWXXE','getTestDetails','uVdlU','\x20instanceId=','runHooks','trim','getAllData','BnWhF','143724MkxJln','\x20instance=','Opvyz','getTraceFilePaths','steps','KEY_TEST_ENDED_AT','qnpNF','../../utils/constants','KEY_TEST_CODE','ObMpD','KEY_TEST_UUID','values','description','field_type','timedOut','TEST','Hook\x20List\x20in\x20Post\x20','KEY_HOOK_RESULT','createContext','KEY_TEST_TAGS','getTestUUID','KEY_HOOK_FAILURE','info','5486411CTHmvV','error','4534416iugOxZ','setTrackedInstance','FtVIA','KEY_TEST_RERUN_NAME','XwDUT','KEY_HOOK_LOGS','getTrackedInstance','bEsdx','DEFAULT_TEST_RESULT','getTestFrameworksVersions','dxUEV','getTestFrameworks','../state/testFrameworkState.js','hook','sendLogCreatedEvent:\x20testId=','KEY_HOOK_NAME','NVMYs','trackPlaywrightInstance:\x20created\x20instance\x20for\x20target=','instance','getId','push','TEST_ATTACHMENT','LsMOq','XsXzx','ynaeg','Hook\x20Started\x20in\x20PRE\x20key\x20=\x20','trackEvent\x20loading\x20testResults\x20for\x20testId:\x20','getTime','length','trackEvent:\x20Exception\x20in\x20event\x20tracking,\x20testFrameworkState=%s\x20hookState=%s\x20argsLength=%s,\x20exception=%s','../instances/testFrameworkInstance.js','toISOString','trackPlaywrightInstance:\x20saved\x20instance\x20contextId=','getCurrentInstanceName','KEY_HOOK_FAILURE_REASON','parsePlaywrightTestResult:\x20testId=','\x20&\x20hook\x20=\x20','failed','KEY_TEST_RESULT','path','getInstance','startTime','toString','\x20payload=','jnXkV','\x20from\x20TestDetails:\x20','setTestDetails','KEY_HOOKS_FINISHED','sendLogCreatedEvent\x20for\x20testId:\x20','KEY_TEST_FAILURE_TYPE','result','JEXpv','../grpcClient','./constants/testFrameworkConstants.js','map','mRNdf','testUId','2101416eoQrJp','../../../../src/helpers/helper','KEY_CUSTOM_TAGS','multi_dropdown','Vklnf','QRmxz','size','trackHookEvent','some','test','UOWqq','DDFxu','../state/hookState.js','forEach','expectedStatus','skipped','tRwXJ','TcsZn','\x20hookState=','auftr','annotations','dVqfK','422262hAeQMD','aMKKY','err','jHaLw','logCreatedEvent','KEY_TEST_FILE_PATH','\x20\x20and\x20args\x20=\x20','KEY_TEST_FRAMEWORK_VERSION','KEY_TEST_SCOPE','wBPAU','../../../helpers/test-observability/utils','KEY_TEST_ATTACHMENTS','results','split',',\x20testFrameworkState=','EIcjY','\x20target=','getRef','trackPlaywrightInstance','trackEvent\x20loading\x20testData\x20for\x20testId:\x20','Error\x20in\x20sendLogCreatedEvent:\x20','3346792YwyzAN','get','ephnU','hPvDr','nyGYe','errors','\x20and\x20args\x20=\x20','KEY_TEST_ID','exports','KEY_AUTOMATE_SESSION_NAME','parsePlaywrightTestResult','dDfcm','KEY_HOOKS_STARTED','stack','POST','format','KEY_LOGS','nAJVi','18qXpQPP','sJDzX','../../../helpers/classLogger.js','addMultipleEntries','debug','SxMbH','pop','INIT_TEST'];a63_0x1336=function(){return _0x508490;};return a63_0x1336();}