function a78_0x3298(){const _0x434f08=['join','LrFGx','KEY_FILE_LEVEL','toObject','getState','3552582zXfeYi','289790eRjZzd','trackFile','homedir','dFySH','KEY_FILE_PATH','statusCode','fbsGY','Attachment\x20recevied\x20for\x20path:\x20%s','Attachment\x20file\x20tracked\x20for\x20upload:\x20%s','unlinkSync','PlWuC','path','3528903UVsrux','modules','./TestInfo','.browserstack','close','getInstance','13558hLxXLz','zppKW','FmxnB','https','KEY_TEST_ID','statSync','ltZXy','mkdirSync','http://','xaSGs','cDcVJ','715WWiuAy','9SUuDmQ','buildHashedId','format','getTrackedInstance','KEY_TEST_ATTACHMENTS','createWriteStream','rmSync','existsSync','./framework/constants/testFrameworkConstants','SnqXS','4UXFkBT','KEY_FILE_SIZE','force','VtEiA','Attachment\x20file\x20path\x20is\x20empty,\x20skipping\x20upload.','inCkn','setTestDetails','lMIgS','OekFE','exports','Error\x20tracking\x20file:\x20%s,\x20skipping\x20upload','.browserstack\x20folder\x20not\x20found\x20at:\x20%s','luwlM','uploadAttachments','FVsEf','KEY_FILE_NAME','6025930TEtYXc','startsWith','AjAsd','qRXnn','JNtrZ','size','pipe','./modules/playwrightDriverModule','OqcMR','8dPFHGI','HFEbM','lwGCJ','19DLEXaL','clearAttachments','BuildLevel','testhubConfig','util','LuAOv','Created\x20folder:\x20%s','logger','File\x20downloaded\x20to:\x20%s','basename','trim','NlbFa','http','541668fNKmWd','recursive','finish','../../helpers/classLogger.js','uploadAttachmentsManager','5653641JhOpnW','dMgUh','rBpKC','iBYzF','TestLevel','copyFileSync','debug','Failed\x20to\x20download\x20file.\x20Status\x20code:\x20%s,\x20skipping\x20upload','Error\x20downloading\x20file:\x20%s,\x20skipping\x20upload','TestHubModule'];a78_0x3298=function(){return _0x434f08;};return a78_0x3298();}const a78_0x67c3ed=a78_0x2641;(function(_0x18a1ba,_0x3d62d5){const _0x54dfda=a78_0x2641,_0x3e2f88=_0x18a1ba();while(!![]){try{const _0x297fb7=parseInt(_0x54dfda(0x1e1))/0x1*(-parseInt(_0x54dfda(0x1af))/0x2)+-parseInt(_0x54dfda(0x1a9))/0x3*(parseInt(_0x54dfda(0x1c5))/0x4)+-parseInt(_0x54dfda(0x1d5))/0x5+-parseInt(_0x54dfda(0x19c))/0x6+-parseInt(_0x54dfda(0x18d))/0x7*(-parseInt(_0x54dfda(0x1de))/0x8)+parseInt(_0x54dfda(0x1bb))/0x9*(-parseInt(_0x54dfda(0x19d))/0xa)+-parseInt(_0x54dfda(0x1ba))/0xb*(-parseInt(_0x54dfda(0x1ee))/0xc);if(_0x297fb7===_0x3d62d5)break;else _0x3e2f88['push'](_0x3e2f88['shift']());}catch(_0x2abb3b){_0x3e2f88['push'](_0x3e2f88['shift']());}}}(a78_0x3298,0x9501e));const os=require('os'),fs=require('fs'),path=require(a78_0x67c3ed(0x1a8)),util=require(a78_0x67c3ed(0x1e5)),BrowserstackCLI=require('./browserstackCLI'),https=require(a78_0x67c3ed(0x1b2)),http=require(a78_0x67c3ed(0x1ed)),AutomationFramework=require('./framework/automationFramework'),PlaywrightDriverModule=require(a78_0x67c3ed(0x1dc)),TestInfo=require(a78_0x67c3ed(0x1ab)),TestFrameworkConstants=require(a78_0x67c3ed(0x1c3)),{createClassLogger}=require(a78_0x67c3ed(0x1f1));function a78_0x2641(_0xee0b46,_0x2d62e2){const _0x3298af=a78_0x3298();return a78_0x2641=function(_0x2641b7,_0x5461f0){_0x2641b7=_0x2641b7-0x18d;let _0x477e65=_0x3298af[_0x2641b7];return _0x477e65;},a78_0x2641(_0xee0b46,_0x2d62e2);}class uploadAttachmentsManager{static [a78_0x67c3ed(0x1e8)]=createClassLogger(a78_0x67c3ed(0x1f2));static[a78_0x67c3ed(0x1d2)](_0x302553,_0x139603=![]){const _0x2aa423=a78_0x67c3ed,_0xa4a615={};_0xa4a615['LuAOv']=function(_0x1053c8,_0x4346b8){return _0x1053c8/_0x4346b8;},_0xa4a615['vuXDO']=function(_0x577b3b,_0x4ebbec){return _0x577b3b*_0x4ebbec;},_0xa4a615[_0x2aa423(0x1b5)]=function(_0x3f686b,_0x463882){return _0x3f686b>_0x463882;},_0xa4a615['owugx']='Downloaded\x20file\x20is\x20too\x20large\x20(%s\x20MB).\x20Deleting\x20file\x20and\x20skipping\x20upload.',_0xa4a615[_0x2aa423(0x1cd)]=_0x2aa423(0x1e9),_0xa4a615[_0x2aa423(0x1cc)]=function(_0x316989,_0x357f0e){return _0x316989===_0x357f0e;},_0xa4a615[_0x2aa423(0x1df)]=_0x2aa423(0x1f0),_0xa4a615[_0x2aa423(0x1c8)]=_0x2aa423(0x194),_0xa4a615[_0x2aa423(0x18e)]=_0x2aa423(0x195),_0xa4a615[_0x2aa423(0x1d7)]=_0x2aa423(0x1a4),_0xa4a615[_0x2aa423(0x1e0)]=_0x2aa423(0x1ac),_0xa4a615[_0x2aa423(0x1d9)]=_0x2aa423(0x1d0),_0xa4a615[_0x2aa423(0x1a3)]='Created\x20.browserstack\x20folder\x20at:\x20%s',_0xa4a615[_0x2aa423(0x1ec)]=_0x2aa423(0x1e7),_0xa4a615[_0x2aa423(0x1d1)]=_0x2aa423(0x1c9),_0xa4a615[_0x2aa423(0x1b1)]='https://',_0xa4a615['cDcVJ']=_0x2aa423(0x1b7),_0xa4a615[_0x2aa423(0x1ca)]='error',_0xa4a615[_0x2aa423(0x1c4)]='Attachment\x20file\x20does\x20not\x20exist\x20at:\x20%s',_0xa4a615['OqcMR']=function(_0x23bd7d,_0x1fbef9){return _0x23bd7d*_0x1fbef9;},_0xa4a615[_0x2aa423(0x1b8)]='File\x20size\x20is\x20too\x20large\x20(%s\x20MB).\x20Skipping\x20upload.';const _0x4283b9=_0xa4a615;this[_0x2aa423(0x1e8)]['debug'](util[_0x2aa423(0x1bd)](_0x4283b9['AjAsd'],_0x302553));const _0xd68497=os[_0x2aa423(0x19f)](),_0x1d6d47=path['join'](_0xd68497,_0x4283b9[_0x2aa423(0x1e0)]);!fs[_0x2aa423(0x1c2)](_0x1d6d47)&&(this[_0x2aa423(0x1e8)]['debug'](util[_0x2aa423(0x1bd)](_0x4283b9[_0x2aa423(0x1d9)],_0x1d6d47)),fs[_0x2aa423(0x1b6)](_0x1d6d47),this[_0x2aa423(0x1e8)][_0x2aa423(0x193)](util['format'](_0x4283b9['fbsGY'],_0x1d6d47)));const _0x589cc2=BrowserstackCLI[_0x2aa423(0x1ae)]()[_0x2aa423(0x1aa)]['TestHubModule']?.[_0x2aa423(0x1e4)]?.[_0x2aa423(0x19a)]()?.[_0x2aa423(0x1bc)],_0x2379ad=path['join'](_0x1d6d47,_0x589cc2);!fs['existsSync'](_0x2379ad)&&(fs['mkdirSync'](_0x2379ad),this['logger'][_0x2aa423(0x193)](util[_0x2aa423(0x1bd)](_0x4283b9[_0x2aa423(0x1ec)],_0x2379ad)));if(_0x4283b9['lMIgS'](_0x302553[_0x2aa423(0x1eb)](),'')){this['logger']['debug'](util[_0x2aa423(0x1bd)](_0x4283b9[_0x2aa423(0x1d1)]));return;}if(_0x302553['startsWith'](_0x4283b9[_0x2aa423(0x1b1)])||_0x302553[_0x2aa423(0x1d6)](_0x4283b9[_0x2aa423(0x1b9)])){const _0x42731b=_0x302553[_0x2aa423(0x1d6)](_0x4283b9[_0x2aa423(0x1b1)])?https:http,_0x48e017=path['basename'](_0x302553),_0x5baca9=path[_0x2aa423(0x197)](_0x2379ad,_0x48e017),_0xb07943=fs[_0x2aa423(0x1c0)](_0x5baca9);_0x42731b['get'](_0x302553,_0x49a789=>{const _0x3b1b67=_0x2aa423,_0x2d3027={'MIwcp':function(_0x102cac,_0x5ce8db){return _0x4283b9['LuAOv'](_0x102cac,_0x5ce8db);},'iBYzF':function(_0x121bcb,_0x35e13f){return _0x4283b9['vuXDO'](_0x121bcb,_0x35e13f);},'zGgvk':function(_0x5050ce,_0x5eacd7){const _0x6d346d=a78_0x2641;return _0x4283b9[_0x6d346d(0x1b5)](_0x5050ce,_0x5eacd7);},'LrFGx':_0x4283b9['owugx'],'rBpKC':_0x4283b9['OekFE']};if(_0x4283b9[_0x3b1b67(0x1cc)](_0x49a789[_0x3b1b67(0x1a2)],0xc8))_0x49a789[_0x3b1b67(0x1db)](_0xb07943),_0xb07943['on'](_0x4283b9[_0x3b1b67(0x1df)],()=>{const _0x1b4f58=_0x3b1b67;_0xb07943[_0x1b4f58(0x1ad)]();const _0x1f5856=fs[_0x1b4f58(0x1b4)](_0x5baca9),_0x4096a1=_0x2d3027['MIwcp'](_0x1f5856[_0x1b4f58(0x1da)],_0x2d3027[_0x1b4f58(0x190)](0x400,0x400));if(_0x2d3027['zGgvk'](_0x4096a1,0x64)){this[_0x1b4f58(0x1e8)][_0x1b4f58(0x193)](util['format'](_0x2d3027[_0x1b4f58(0x198)],_0x4096a1['toFixed'](0x2))),fs['unlinkSync'](_0x5baca9);return;}this[_0x1b4f58(0x1e8)][_0x1b4f58(0x193)](util['format'](_0x2d3027[_0x1b4f58(0x18f)],_0x5baca9)),uploadAttachmentsManager['trackFile'](_0x5baca9,_0x139603);});else{this['logger'][_0x3b1b67(0x193)](util[_0x3b1b67(0x1bd)](_0x4283b9[_0x3b1b67(0x1c8)],_0x49a789[_0x3b1b67(0x1a2)])),_0xb07943[_0x3b1b67(0x1ad)](),fs[_0x3b1b67(0x1a6)](_0x5baca9);return;}})['on'](_0x4283b9[_0x2aa423(0x1ca)],_0x21c78b=>{const _0x3a7d70=_0x2aa423;this[_0x3a7d70(0x1e8)][_0x3a7d70(0x193)](util[_0x3a7d70(0x1bd)](_0x4283b9['dMgUh'],_0x21c78b['message'])),_0xb07943[_0x3a7d70(0x1ad)](),fs[_0x3a7d70(0x1a6)](_0x5baca9);return;});}else{if(!fs[_0x2aa423(0x1c2)](_0x302553)){this[_0x2aa423(0x1e8)][_0x2aa423(0x193)](util[_0x2aa423(0x1bd)](_0x4283b9[_0x2aa423(0x1c4)],_0x302553));return;}const _0x67d51f=fs[_0x2aa423(0x1b4)](_0x302553),_0x4b6a63=_0x4283b9[_0x2aa423(0x1e6)](_0x67d51f[_0x2aa423(0x1da)],_0x4283b9[_0x2aa423(0x1dd)](0x400,0x400));if(_0x4283b9[_0x2aa423(0x1b5)](_0x4b6a63,0x64)){this[_0x2aa423(0x1e8)][_0x2aa423(0x193)](util[_0x2aa423(0x1bd)](_0x4283b9['xaSGs'],_0x4b6a63['toFixed'](0x2)));return;}const _0x12cbaa=path[_0x2aa423(0x1ea)](_0x302553),_0x124647=path['join'](_0x2379ad,_0x12cbaa);fs[_0x2aa423(0x192)](_0x302553,_0x124647),uploadAttachmentsManager[_0x2aa423(0x19e)](_0x124647,_0x139603);}}static[a78_0x67c3ed(0x19e)](_0xcae0b2,_0x214bfa){const _0x4e74da=a78_0x67c3ed,_0x428fc3={};_0x428fc3[_0x4e74da(0x1b0)]=_0x4e74da(0x1e3),_0x428fc3[_0x4e74da(0x1a0)]=_0x4e74da(0x191),_0x428fc3['PlWuC']=_0x4e74da(0x1a5),_0x428fc3[_0x4e74da(0x1d3)]=_0x4e74da(0x1cf);const _0x722a92=_0x428fc3;try{const _0x4d2ca3=AutomationFramework[_0x4e74da(0x1be)](),_0x183194=AutomationFramework[_0x4e74da(0x19b)](_0x4d2ca3,PlaywrightDriverModule[_0x4e74da(0x1b3)],''),_0x194003=TestInfo['getTestDetails'](_0x183194),_0xeca0cb=_0x194003[TestFrameworkConstants[_0x4e74da(0x1bf)]]||{};_0xeca0cb[_0xcae0b2]={[TestFrameworkConstants[_0x4e74da(0x1c6)]]:fs[_0x4e74da(0x1b4)](_0xcae0b2)[_0x4e74da(0x1da)],[TestFrameworkConstants[_0x4e74da(0x1d4)]]:path[_0x4e74da(0x1ea)](_0xcae0b2),[TestFrameworkConstants[_0x4e74da(0x1a1)]]:_0xcae0b2,[TestFrameworkConstants[_0x4e74da(0x199)]]:_0x214bfa?_0x722a92[_0x4e74da(0x1b0)]:_0x722a92[_0x4e74da(0x1a0)]},_0x194003[TestFrameworkConstants['KEY_TEST_ATTACHMENTS']]=_0xeca0cb,TestInfo[_0x4e74da(0x1cb)](_0x183194,_0x194003),this['logger']['debug'](util[_0x4e74da(0x1bd)](_0x722a92[_0x4e74da(0x1a7)],_0xcae0b2));}catch(_0x3da31a){this[_0x4e74da(0x1e8)][_0x4e74da(0x193)](util[_0x4e74da(0x1bd)](_0x722a92[_0x4e74da(0x1d3)],_0x3da31a['message']));}}static[a78_0x67c3ed(0x1e2)](){const _0x22a73c=a78_0x67c3ed,_0x1717f8={};_0x1717f8['xiDMw']=_0x22a73c(0x1ac),_0x1717f8[_0x22a73c(0x1d8)]='Cleared\x20attachment\x20folder';const _0x8f6c7a=_0x1717f8,_0x1462dc=os[_0x22a73c(0x19f)](),_0x234a6f=path[_0x22a73c(0x197)](_0x1462dc,_0x8f6c7a['xiDMw']);if(!fs[_0x22a73c(0x1c2)](_0x234a6f))return;const _0x2ecf44=BrowserstackCLI[_0x22a73c(0x1ae)]()[_0x22a73c(0x1aa)][_0x22a73c(0x196)]?.[_0x22a73c(0x1e4)]?.[_0x22a73c(0x19a)]()?.[_0x22a73c(0x1bc)],_0x11d7cb=path[_0x22a73c(0x197)](_0x234a6f,_0x2ecf44);if(!fs[_0x22a73c(0x1c2)](_0x11d7cb))return;const _0x3b5e3c={};_0x3b5e3c[_0x22a73c(0x1ef)]=!![],_0x3b5e3c[_0x22a73c(0x1c7)]=!![],fs[_0x22a73c(0x1c1)](_0x11d7cb,_0x3b5e3c),this[_0x22a73c(0x1e8)][_0x22a73c(0x193)](util[_0x22a73c(0x1bd)](_0x8f6c7a[_0x22a73c(0x1d8)]));}}module[a78_0x67c3ed(0x1ce)]=uploadAttachmentsManager;