const a74_0xb528eb=a74_0x448e;(function(_0x1864f1,_0x490fdd){const _0x54c91d=a74_0x448e,_0x5a9818=_0x1864f1();while(!![]){try{const _0x450172=-parseInt(_0x54c91d(0x179))/0x1*(parseInt(_0x54c91d(0x14e))/0x2)+parseInt(_0x54c91d(0x13f))/0x3+parseInt(_0x54c91d(0x159))/0x4+parseInt(_0x54c91d(0x143))/0x5+-parseInt(_0x54c91d(0x158))/0x6*(-parseInt(_0x54c91d(0x194))/0x7)+-parseInt(_0x54c91d(0x17e))/0x8+parseInt(_0x54c91d(0x181))/0x9;if(_0x450172===_0x490fdd)break;else _0x5a9818['push'](_0x5a9818['shift']());}catch(_0x17354a){_0x5a9818['push'](_0x5a9818['shift']());}}}(a74_0x4b49,0xed219));function a74_0x448e(_0x241d04,_0x4763b5){const _0x4b499b=a74_0x4b49();return a74_0x448e=function(_0x448e30,_0x58f564){_0x448e30=_0x448e30-0x132;let _0x1a50e4=_0x4b499b[_0x448e30];return _0x1a50e4;},a74_0x448e(_0x241d04,_0x4763b5);}function a74_0x4b49(){const _0x210ecc=['env','test_deferred','__workerDetails','../state/hookState.js','onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20','getThreadId','KEY_TEST_STARTED_AT','getProcessId','capabilities','564802DWkKsM','logger','getRef','name','forEach','error','testhubConfig','getBuildHashedId','getInstance','../../../helpers/testhub/constants','testInfo','../grpcClient.js','testFrameworkVersion','KEY_CAPABILITIES','CREATE','Error\x20in\x20sendTestFrameworkEvent:\x20','page','testId','JhVjB','testHookState','1673481DWWFNH','onAllTestEvents','onPageCreate\x20CBTSession\x20payload:\x20','bind','3353470sulXNB','KEY_TEST_DEFERRED','platformIndex','hookState','../cliUtils.js','../framework/testFramework.js','format','base64','../framework/constants/testFrameworkConstants.js','toString','debug','2oGNdsr','sendTestFrameworkEvent\x20testId:\x20','MODULE_NAME','BROWSERSTACK_TESTHUB_UUID','uuid','getCurrentTestState','split','TestHubModule','get','../state/automationFrameworkState.js','24igeYqY','2226812QMlfyn','frameworkName','instance','onPageCreate','kcxIy','./playwrightDriverModule.js','../../../helpers/classLogger.js','O11yHashedID','values','../state/testFrameworkState.js','parallelIndex','util','htZfR','getTestUUID','registerObserver','getState','getContext','sendTestFrameworkEvent\x20complete\x20for\x20testId:\x20','POST','../TestInfo.js','BROWSERSTACK_TESTHUB_JWT','testUuid','stringify','testFrameworkState','executionContext','KEY_PLATFORM_INDEX','KEY_TEST_ENDED_AT','onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20','qaJoj','KEY_TEST_FRAMEWORK_NAME','workerInfo','TEST','709601XcrJiQ','from','getId','Error\x20in\x20sending\x20CBTSession:\x20','RuZYf','4579088XKZHTM','sendTestFrameworkEvent','../browserstackCLI.js','1307772cyhWKd','KEY_TEST_FRAMEWORK_VERSION','exports','test','endedAt','testFrameworkName','getCurrentHookState','../framework/automationFramework.js','testSessionEvent','eventJson'];a74_0x4b49=function(){return _0x210ecc;};return a74_0x4b49();}const util=require(a74_0xb528eb(0x164)),BaseModule=require('./baseModule'),{createClassLogger}=require(a74_0xb528eb(0x15f)),AutomationFramework=require(a74_0xb528eb(0x188)),AutomationFrameworkState=require(a74_0xb528eb(0x157)),HookState=require(a74_0xb528eb(0x18e)),TestFramework=require(a74_0xb528eb(0x148)),TestFrameworkState=require(a74_0xb528eb(0x162)),PlaywrightDriverModule=require(a74_0xb528eb(0x15e)),TestFrameworkConstants=require(a74_0xb528eb(0x14b)),GrpcClient=require(a74_0xb528eb(0x136)),CLIUtils=require(a74_0xb528eb(0x147)),TestInfo=require(a74_0xb528eb(0x16c)),testHubConstants=require(a74_0xb528eb(0x134)),BrowserstackCLI=require(a74_0xb528eb(0x180)),{getPlaywrightProvider}=require('../../../helpers/helper.js');class TestHubModule extends BaseModule{['logger']=createClassLogger('TestHubModule');constructor(_0xfc3485){const _0x260e72=a74_0xb528eb,_0x2e086e={};_0x2e086e[_0x260e72(0x17d)]='7|4|3|5|1|2|0|6',_0x2e086e[_0x260e72(0x175)]=_0x260e72(0x155);const _0x426e91=_0x2e086e,_0x50c240=_0x426e91[_0x260e72(0x17d)]['split']('|');let _0x27b394=0x0;while(!![]){switch(_0x50c240[_0x27b394++]){case'0':process[_0x260e72(0x18b)][testHubConstants['ENV_VAR'][_0x260e72(0x151)]]=this[_0x260e72(0x19a)]['getBuildHashedId']();continue;case'1':Object[_0x260e72(0x161)](TestFrameworkState)[_0x260e72(0x198)](_0x5cfb1c=>{const _0x3cf7c8=_0x260e72;Object[_0x3cf7c8(0x161)](HookState)[_0x3cf7c8(0x198)](_0x2fd58d=>{const _0x47c9fc=_0x3cf7c8;TestFramework['registerObserver'](_0x5cfb1c,_0x2fd58d,this[_0x47c9fc(0x140)][_0x47c9fc(0x142)](this));});});continue;case'2':process[_0x260e72(0x18b)][testHubConstants['ENV_VAR'][_0x260e72(0x16d)]]=this['testhubConfig']['getJwt']();continue;case'3':this[_0x260e72(0x19a)]=_0xfc3485;continue;case'4':this[_0x260e72(0x197)]=_0x426e91[_0x260e72(0x175)];continue;case'5':AutomationFramework[_0x260e72(0x167)](AutomationFrameworkState[_0x260e72(0x139)],HookState[_0x260e72(0x16b)],this['onPageCreate'][_0x260e72(0x142)](this));continue;case'6':BrowserstackCLI[_0x260e72(0x160)]=this[_0x260e72(0x19a)][_0x260e72(0x132)]();continue;case'7':super();continue;}break;}}['getModuleName'](){return TestHubModule['MODULE_NAME'];}[a74_0xb528eb(0x140)](_0x20ad4a){const _0x167fdc=a74_0xb528eb,_0x366fe9={};_0x366fe9['vezyB']=function(_0x121525,_0x383adf){return _0x121525===_0x383adf;};const _0x34ead5=_0x366fe9,_0x58cdba=_0x20ad4a[_0x167fdc(0x15b)],_0x5c54dc=_0x58cdba[_0x167fdc(0x153)]();(_0x34ead5['vezyB'](_0x5c54dc,TestFrameworkState[_0x167fdc(0x178)])||CLIUtils['matchHookRegex'](_0x5c54dc[_0x167fdc(0x14c)]()[_0x167fdc(0x154)]('.')[0x1]))&&this['sendTestFrameworkEvent'](_0x20ad4a);}async[a74_0xb528eb(0x17f)](_0x201157){const _0x360344=a74_0xb528eb,_0x46bc92={};_0x46bc92[_0x360344(0x165)]=_0x360344(0x14a);const _0x3eb78b=_0x46bc92;try{const _0x1a4f50=_0x201157[_0x360344(0x184)]['id'],_0x280946=_0x201157[_0x360344(0x15b)],_0x2b49eb=_0x280946[_0x360344(0x169)](),_0x6f4bbb=_0x280946['getAllData']()[_0x360344(0x156)](_0x1a4f50);this['logger']['debug'](_0x360344(0x14f)+_0x1a4f50);const {[TestFrameworkConstants[_0x360344(0x176)]]:_0x24eaa7='',[TestFrameworkConstants[_0x360344(0x182)]]:_0x5540fd='',[TestFrameworkConstants[_0x360344(0x191)]]:_0x1a3642='',[TestFrameworkConstants[_0x360344(0x173)]]:_0x1a925a=''}=_0x6f4bbb,_0x4bd555=_0x280946[_0x360344(0x153)]()[_0x360344(0x14c)]()[_0x360344(0x154)]('.')[0x1],_0x3cfa70=_0x280946[_0x360344(0x187)]()[_0x360344(0x14c)]()[_0x360344(0x154)]('.')[0x1],_0xd0ba18=global?.[_0x360344(0x18d)]?.[_0x360344(0x177)]?.[_0x360344(0x163)];;const _0x57e1c8=_0x280946[_0x360344(0x196)](),_0x28c96f=Buffer[_0x360344(0x17a)](JSON[_0x360344(0x16f)](_0x6f4bbb))[_0x360344(0x14c)](_0x3eb78b[_0x360344(0x165)]),_0x20f759={'hash':_0x2b49eb[_0x360344(0x17b)](),'threadId':_0x2b49eb['getThreadId']()[_0x360344(0x14c)](),'processId':_0x2b49eb['getProcessId']()[_0x360344(0x14c)]()},_0x284999={};_0x284999[_0x360344(0x145)]=_0xd0ba18,_0x284999[_0x360344(0x186)]=_0x24eaa7,_0x284999[_0x360344(0x137)]=_0x5540fd,_0x284999[_0x360344(0x170)]=_0x4bd555,_0x284999[_0x360344(0x146)]=_0x3cfa70,_0x284999['startedAt']=_0x1a3642,_0x284999[_0x360344(0x185)]=_0x1a925a,_0x284999[_0x360344(0x152)]=_0x57e1c8,_0x284999[_0x360344(0x18a)]=_0x28c96f,_0x284999['executionContext']=_0x20f759;const _0x184d5f=_0x284999,_0x37e4de=await GrpcClient[_0x360344(0x133)]()['testFrameworkEvent'](_0x184d5f);this[_0x360344(0x195)][_0x360344(0x14d)](_0x360344(0x16a)+_0x1a4f50+'\x20testState:\x20'+_0x4bd555+'\x20hookState:\x20'+_0x3cfa70);}catch(_0x36b8f2){this[_0x360344(0x195)][_0x360344(0x199)](_0x360344(0x13a)+util['format'](_0x36b8f2));}}async[a74_0xb528eb(0x15c)](_0x29fa60){const _0x1249a5=a74_0xb528eb,_0x1db7f7={'kcxIy':function(_0x30d8c9,_0x323850){return _0x30d8c9(_0x323850);},'JhVjB':_0x1249a5(0x14a)};try{if(_0x29fa60[_0x1249a5(0x13b)]){const _0x262047=_0x29fa60[_0x1249a5(0x135)][_0x1249a5(0x13c)];this['logger'][_0x1249a5(0x14d)](_0x1249a5(0x18f)+_0x262047);const _0x5be8c6=TestInfo[_0x1249a5(0x166)](_0x262047),_0x38c787=TestInfo['getTestDetails'](_0x262047),_0x26d004=_0x29fa60[_0x1249a5(0x15b)],_0xacb79d=AutomationFramework[_0x1249a5(0x168)](_0x26d004,PlaywrightDriverModule[_0x1249a5(0x172)]),_0x5754b1=_0x38c787[TestFrameworkConstants[_0x1249a5(0x176)]],_0x459621=_0x38c787[TestFrameworkConstants[_0x1249a5(0x182)]],_0x1b28b6=TestFrameworkState[_0x1249a5(0x178)][_0x1249a5(0x14c)]()[_0x1249a5(0x154)]('.')[0x1],_0x55a967=HookState[_0x1249a5(0x16b)]['toString']()[_0x1249a5(0x154)]('.')[0x1],_0x474241=_0x26d004['getContext'](),_0x4ea162=AutomationFramework[_0x1249a5(0x168)](_0x26d004,PlaywrightDriverModule['KEY_HUB_URL'],''),_0x1f8b25={'provider':_0x1db7f7[_0x1249a5(0x15d)](getPlaywrightProvider,_0x4ea162),'frameworkName':_0x26d004[_0x1249a5(0x15a)],'frameworkVersion':_0x26d004['frameworkVersion'],'frameworkSessionId':AutomationFramework[_0x1249a5(0x168)](_0x26d004,PlaywrightDriverModule['KEY_SESSION_ID'],''),'ref':_0x26d004[_0x1249a5(0x196)](),'hubUrl':_0x4ea162};let _0x4953b1=AutomationFramework[_0x1249a5(0x168)](_0x26d004,PlaywrightDriverModule[_0x1249a5(0x138)],{});_0x4953b1=Buffer[_0x1249a5(0x17a)](JSON[_0x1249a5(0x16f)](_0x4953b1))[_0x1249a5(0x14c)](_0x1db7f7[_0x1249a5(0x13d)]);const _0x162de5={'hash':_0x474241[_0x1249a5(0x17b)](),'threadId':_0x474241[_0x1249a5(0x190)]()[_0x1249a5(0x14c)](),'processId':_0x474241[_0x1249a5(0x192)]()['toString']()},_0x367219={};_0x367219['platformIndex']=_0xacb79d,_0x367219[_0x1249a5(0x186)]=_0x5754b1,_0x367219[_0x1249a5(0x137)]=_0x459621,_0x367219[_0x1249a5(0x170)]=_0x1b28b6,_0x367219[_0x1249a5(0x13e)]=_0x55a967,_0x367219[_0x1249a5(0x16e)]=_0x5be8c6,_0x367219['automationSession']=_0x1f8b25,_0x367219[_0x1249a5(0x193)]=_0x4953b1,_0x367219[_0x1249a5(0x171)]=_0x162de5;const _0x4be5e6=_0x367219;this[_0x1249a5(0x195)]['debug'](_0x1249a5(0x141)+util[_0x1249a5(0x149)](_0x4be5e6));const _0x574102=await GrpcClient[_0x1249a5(0x133)]()[_0x1249a5(0x189)](_0x4be5e6);this[_0x1249a5(0x195)][_0x1249a5(0x14d)](_0x1249a5(0x174)+_0x262047);}}catch(_0xa1dd87){this['logger'][_0x1249a5(0x199)](_0x1249a5(0x17c)+util[_0x1249a5(0x149)](_0xa1dd87));}}}TestHubModule[a74_0xb528eb(0x150)]=a74_0xb528eb(0x155),TestHubModule[a74_0xb528eb(0x144)]=a74_0xb528eb(0x18c),module[a74_0xb528eb(0x183)]=TestHubModule;