const a73_0x329265=a73_0x243c;(function(_0x59e37b,_0x51d3e9){const _0x55287f=a73_0x243c,_0x2a936f=_0x59e37b();while(!![]){try{const _0x48690a=-parseInt(_0x55287f(0x1ae))/0x1+-parseInt(_0x55287f(0x1d0))/0x2*(-parseInt(_0x55287f(0x1e8))/0x3)+parseInt(_0x55287f(0x1da))/0x4*(-parseInt(_0x55287f(0x1a9))/0x5)+-parseInt(_0x55287f(0x193))/0x6*(parseInt(_0x55287f(0x212))/0x7)+parseInt(_0x55287f(0x1d8))/0x8+parseInt(_0x55287f(0x1b0))/0x9+parseInt(_0x55287f(0x1f7))/0xa;if(_0x48690a===_0x51d3e9)break;else _0x2a936f['push'](_0x2a936f['shift']());}catch(_0x39001c){_0x2a936f['push'](_0x2a936f['shift']());}}}(a73_0x50e4,0x7beff));function a73_0x243c(_0x29d81b,_0x5672bd){const _0x50e435=a73_0x50e4();return a73_0x243c=function(_0x243cb6,_0x51d89f){_0x243cb6=_0x243cb6-0x18b;let _0x490986=_0x50e435[_0x243cb6];return _0x490986;},a73_0x243c(_0x29d81b,_0x5672bd);}const util=require(a73_0x329265(0x1cb)),BaseModule=require(a73_0x329265(0x1c3)),{createClassLogger}=require(a73_0x329265(0x1b4)),{getFrameworkVersion}=require('../../../helpers/test-observability/utils'),{FRAMEWORKS}=require('../../utils/constants'),AutomationFramework=require(a73_0x329265(0x207)),AutomationFrameworkState=require(a73_0x329265(0x18d)),HookState=require(a73_0x329265(0x215)),{playwrightBstackJsExecutor,nestedKeyValue,playwrightAnnotate,getPlaywrightStatus,getPlaywrightSessionName}=require(a73_0x329265(0x210)),CLIUtils=require('../cliUtils.js'),BrowserstackCLI=require(a73_0x329265(0x218)),GrpcClient=require('../grpcClient.js'),PerformanceTester=require('../../../helpers/performance/performance-tester.js'),PerformanceEvents=require(a73_0x329265(0x1e4))[a73_0x329265(0x195)];class PlaywrightDriverModule extends BaseModule{static [a73_0x329265(0x1a2)]=a73_0x329265(0x1ef);static [a73_0x329265(0x1fc)]=a73_0x329265(0x1c2);static [a73_0x329265(0x18f)]=a73_0x329265(0x1d9);static [a73_0x329265(0x199)]=a73_0x329265(0x194);static [a73_0x329265(0x19b)]='platformIndex';static [a73_0x329265(0x20e)]=a73_0x329265(0x1b7);static [a73_0x329265(0x1f3)]=a73_0x329265(0x1bd);static ['KEY_PLATFORM_DETAILS']='platformDetails';static [a73_0x329265(0x1b2)]=a73_0x329265(0x1a0);[a73_0x329265(0x192)]=createClassLogger(a73_0x329265(0x203));constructor(){const _0x3f9a3c=a73_0x329265,_0xa6ead8={};_0xa6ead8[_0x3f9a3c(0x191)]=_0x3f9a3c(0x1bf),_0xa6ead8[_0x3f9a3c(0x18b)]='PlaywrightDriverModule';const _0x2ee773=_0xa6ead8,_0x2987dd=_0x2ee773[_0x3f9a3c(0x191)][_0x3f9a3c(0x198)]('|');let _0x242000=0x0;while(!![]){switch(_0x2987dd[_0x242000++]){case'0':this[_0x3f9a3c(0x1fb)]=_0x2ee773[_0x3f9a3c(0x18b)];continue;case'1':this[_0x3f9a3c(0x1ea)]=[];continue;case'2':AutomationFramework['registerObserver'](AutomationFrameworkState[_0x3f9a3c(0x190)],HookState[_0x3f9a3c(0x21c)],this[_0x3f9a3c(0x196)][_0x3f9a3c(0x1d2)](this));continue;case'3':AutomationFramework[_0x3f9a3c(0x21d)](AutomationFrameworkState[_0x3f9a3c(0x1ac)],HookState['PRE'],this[_0x3f9a3c(0x1b6)]['bind'](this));continue;case'4':super();continue;case'5':this['browserVersion']=null;continue;case'6':this[_0x3f9a3c(0x1df)]=null;continue;case'7':AutomationFramework['registerObserver'](AutomationFrameworkState[_0x3f9a3c(0x1ac)],HookState[_0x3f9a3c(0x21c)],this['onAfterDriverCreate'][_0x3f9a3c(0x1d2)](this));continue;case'8':this[_0x3f9a3c(0x1db)]=null;continue;case'9':this['testRunId']=null;continue;case'10':AutomationFramework[_0x3f9a3c(0x21d)](AutomationFrameworkState[_0x3f9a3c(0x21e)],HookState[_0x3f9a3c(0x21c)],this[_0x3f9a3c(0x1d3)]['bind'](this));continue;}break;}}[a73_0x329265(0x205)](){const _0x5373c6=a73_0x329265;return PlaywrightDriverModule[_0x5373c6(0x217)];}async[a73_0x329265(0x1b6)](_0x67c373){const _0x1f87ea=a73_0x329265,_0x30e05a={};_0x30e05a['jVoRi']=_0x1f87ea(0x211);const _0x2cc534=_0x30e05a;try{this[_0x1f87ea(0x192)][_0x1f87ea(0x1b3)](_0x2cc534[_0x1f87ea(0x1d6)]);const _0x3b53fd=_0x67c373['launchcaps'],_0x37f7aa=_0x67c373[_0x1f87ea(0x1bd)];AutomationFramework['setState'](_0x67c373[_0x1f87ea(0x1a1)],PlaywrightDriverModule[_0x1f87ea(0x20e)],_0x3b53fd),AutomationFramework[_0x1f87ea(0x216)](_0x67c373[_0x1f87ea(0x1a1)],PlaywrightDriverModule[_0x1f87ea(0x1f3)],_0x37f7aa);}catch(_0xcba9e2){this['logger']['error'](_0x1f87ea(0x208)+util[_0x1f87ea(0x1e7)](_0xcba9e2));}}async['onPlaywrightDispatch'](_0xc09430){const _0x4a2007=a73_0x329265,_0x432d14={};_0x432d14[_0x4a2007(0x1d7)]=function(_0x5debc5,_0x5b4f12){return _0x5debc5||_0x5b4f12;};const _0x22e645=_0x432d14;try{const _0x434304=_0xc09430?.[_0x4a2007(0x1b9)]&&_0xc09430?.['message']?.[_0x4a2007(0x209)]&&_0xc09430?.[_0x4a2007(0x1b9)]?.[_0x4a2007(0x209)]?.[_0x4a2007(0x219)],_0xb81a58=_0xc09430?.[_0x4a2007(0x1b9)]&&_0xc09430?.[_0x4a2007(0x1b9)]?.[_0x4a2007(0x19d)];if(_0x22e645['KfhzZ'](_0x434304,_0xb81a58)){this['logger'][_0x4a2007(0x1b3)](_0x4a2007(0x1fd)+util[_0x4a2007(0x1bc)](_0x434304)+_0x4a2007(0x1a7)+util[_0x4a2007(0x1bc)](_0xb81a58));const _0x3dff20=_0xc09430?.['instance'],_0x5d8a24=_0x434304?.[_0x4a2007(0x194)]||_0xb81a58?.['sessionId'],_0x3cfc43=_0x434304?.[_0x4a2007(0x1fa)]||_0xb81a58?.[_0x4a2007(0x1fa)];_0x5d8a24&&(this['logger']['debug'](_0x4a2007(0x1c7)+_0x5d8a24),AutomationFramework[_0x4a2007(0x216)](_0x3dff20,PlaywrightDriverModule[_0x4a2007(0x199)],_0x5d8a24)),_0x3cfc43&&(this[_0x4a2007(0x192)][_0x4a2007(0x1b3)](_0x4a2007(0x1e2)+util[_0x4a2007(0x1bc)](_0x3cfc43)),AutomationFramework[_0x4a2007(0x216)](_0x3dff20,PlaywrightDriverModule[_0x4a2007(0x19b)],_0x3cfc43));}}catch(_0x7e5202){this[_0x4a2007(0x192)][_0x4a2007(0x20b)](_0x4a2007(0x1aa)+util[_0x4a2007(0x1e7)](_0x7e5202));}}async[a73_0x329265(0x1ab)](_0x17cccd){const _0x3a3406=a73_0x329265,_0x4001d4={'lJyFr':_0x3a3406(0x1e5),'Dmxem':function(_0x53929c,_0x5da634){return _0x53929c(_0x5da634);},'HzmOc':'onAfterDriverCreate:\x20Setting\x20page\x20object','UdWUK':_0x3a3406(0x1c5),'jGfOU':_0x3a3406(0x202),'OiisM':_0x3a3406(0x1ba),'NAaWL':'base64'};try{this[_0x3a3406(0x192)][_0x3a3406(0x1b3)](_0x4001d4[_0x3a3406(0x1fe)]);const _0x793be9=_0x17cccd[_0x3a3406(0x1a1)];this[_0x3a3406(0x1db)]=_0x4001d4[_0x3a3406(0x1cd)](getFrameworkVersion,FRAMEWORKS[_0x3a3406(0x213)]);if(_0x17cccd['page']){this[_0x3a3406(0x192)][_0x3a3406(0x1b3)](_0x4001d4['HzmOc']),AutomationFramework[_0x3a3406(0x216)](_0x793be9,PlaywrightDriverModule['KEY_PAGE_OBJECT'],_0x17cccd[_0x3a3406(0x19e)]);if(_0x17cccd[_0x3a3406(0x1ca)]){this[_0x3a3406(0x192)][_0x3a3406(0x1b3)](_0x4001d4[_0x3a3406(0x20c)]);const _0x15a125=_0x17cccd[_0x3a3406(0x1ca)]?.['_test']?.['id']||_0x17cccd[_0x3a3406(0x1ca)]?.[_0x3a3406(0x1a0)];AutomationFramework[_0x3a3406(0x216)](_0x793be9,PlaywrightDriverModule[_0x3a3406(0x1b2)],_0x15a125),await this['markSessionName'](_0x17cccd[_0x3a3406(0x1ca)]);}}_0x17cccd[_0x3a3406(0x1a5)]&&(this[_0x3a3406(0x192)][_0x3a3406(0x1b3)](_0x4001d4['jGfOU']),AutomationFramework['setState'](_0x793be9,PlaywrightDriverModule[_0x3a3406(0x1fc)],_0x17cccd[_0x3a3406(0x1a5)]));if(_0x17cccd['browser']){this[_0x3a3406(0x192)]['debug'](_0x4001d4[_0x3a3406(0x201)]);const _0xffd62e=global[_0x3a3406(0x1e3)][_0x3a3406(0x1dc)][_0x3a3406(0x1b1)];AutomationFramework[_0x3a3406(0x216)](_0x793be9,PlaywrightDriverModule[_0x3a3406(0x1a2)],_0x17cccd['browser']),AutomationFramework[_0x3a3406(0x216)](_0x793be9,PlaywrightDriverModule['KEY_PLATFORM_INDEX'],_0xffd62e);const _0x5f2e0e={};_0x5f2e0e[_0x3a3406(0x20f)]=!![];const _0x434ee7=Buffer[_0x3a3406(0x18c)](JSON[_0x3a3406(0x1f9)](_0x5f2e0e)['toString'](_0x4001d4[_0x3a3406(0x18e)])),_0x3c7c0c=await GrpcClient['getInstance']()[_0x3a3406(0x1f2)]({'platformIndex':_0xffd62e,'ref':_0x793be9[_0x3a3406(0x1a4)](),'userInputParams':_0x434ee7});}}catch(_0x2b1853){this[_0x3a3406(0x192)]['error'](_0x3a3406(0x200)+util[_0x3a3406(0x1e7)](_0x2b1853));}}async[a73_0x329265(0x1d3)](_0x20cb54){const _0x36939b=a73_0x329265,_0x46a188={'xTXqQ':_0x36939b(0x204),'LiXsc':'Automation\x20onAfterTest:\x20Automation\x20instance\x20is\x20not\x20available','qSrfH':function(_0x56e22f,_0x2a68b3){return _0x56e22f(_0x2a68b3);},'tFmLK':function(_0x65fe4,_0x2af710){return _0x65fe4(_0x2af710);},'OfWdK':function(_0x15bbe9,_0x1eada0,_0x3048a9){return _0x15bbe9(_0x1eada0,_0x3048a9);},'oDGGW':_0x36939b(0x20b),'dGqCd':_0x36939b(0x1b9),'HTXEE':'Unable\x20to\x20mark\x20session\x20status,\x20received\x20status:\x20'};this[_0x36939b(0x192)][_0x36939b(0x1b3)](_0x46a188[_0x36939b(0x1cf)]);const _0x4b90a0=_0x20cb54[_0x36939b(0x1a1)];if(!_0x4b90a0){this[_0x36939b(0x192)][_0x36939b(0x1b3)](_0x46a188[_0x36939b(0x1de)]);return;}const _0x4edb7e=_0x20cb54[_0x36939b(0x1ca)],_0x3dc321=_0x4edb7e['id'],_0x35b0bc=_0x4edb7e[_0x36939b(0x1f4)],_0x5482d6=_0x46a188[_0x36939b(0x1eb)](getPlaywrightStatus,_0x35b0bc),_0x54f5d8=_0x46a188[_0x36939b(0x1d5)](getPlaywrightSessionName,_0x4edb7e),_0x48ad0e=_0x46a188[_0x36939b(0x1af)](nestedKeyValue,_0x35b0bc,[_0x46a188[_0x36939b(0x1be)],_0x46a188['dGqCd']]);this[_0x36939b(0x192)][_0x36939b(0x1b3)](_0x36939b(0x21b)+_0x5482d6);if(!_0x5482d6){this[_0x36939b(0x192)][_0x36939b(0x1b3)](_0x46a188[_0x36939b(0x1ed)],_0x35b0bc[_0x36939b(0x1f4)]);return;}this['logger']['debug'](_0x36939b(0x20d)+_0x3dc321),await this[_0x36939b(0x1ec)](_0x4b90a0,_0x54f5d8,_0x5482d6,_0x48ad0e);}async[a73_0x329265(0x1ec)](_0x344711,_0x365fe0,_0x37c72d,_0x402fa6){const _0x2bf572=a73_0x329265,_0x1c5a20={'YFroG':_0x2bf572(0x1e1),'ogRit':_0x2bf572(0x1a6),'VOAjb':_0x2bf572(0x206),'ubroU':_0x2bf572(0x1cc),'BLLsX':_0x2bf572(0x214),'SHBDm':_0x2bf572(0x1f5),'tCoZq':function(_0x5e5f69,_0x272227){return _0x5e5f69===_0x272227;},'xPSCg':'passed','Fvnic':'info','PCKwb':'error','iUAPy':function(_0x59fff5,_0x2908b2,_0x4d43d0,_0x623846){return _0x59fff5(_0x2908b2,_0x4d43d0,_0x623846);},'KlNpV':_0x2bf572(0x1ff),'CBHDi':'markSessionStatus:\x20Marking\x20session\x20status','ypnIi':function(_0x1d69f2,_0x4e1a98,_0x2d9689){return _0x1d69f2(_0x4e1a98,_0x2d9689);}};if(CLIUtils[_0x2bf572(0x1b5)](BrowserstackCLI[_0x2bf572(0x1a8)]()[_0x2bf572(0x1dd)]())){this[_0x2bf572(0x192)][_0x2bf572(0x1b3)](_0x1c5a20['YFroG']);return;}const _0x5cda70=_0x344711;if(!_0x5cda70){this['logger']['debug'](_0x1c5a20[_0x2bf572(0x1f6)]);return;}const _0x4e1541=AutomationFramework[_0x2bf572(0x1c1)](_0x5cda70,PlaywrightDriverModule['KEY_PAGE_OBJECT']);if(!_0x4e1541){this[_0x2bf572(0x192)][_0x2bf572(0x1b3)](_0x1c5a20[_0x2bf572(0x1f1)]);return;}const _0x13f49d=_0x37c72d;if(!_0x13f49d){this[_0x2bf572(0x192)]['debug'](_0x1c5a20[_0x2bf572(0x1e6)],_0x13f49d);return;}_0x402fa6&&(_0x34b65d[_0x2bf572(0x197)][_0x1c5a20[_0x2bf572(0x1ee)]]=_0x402fa6);const _0x371ef6=(_0x365fe0?_0x365fe0:_0x1c5a20[_0x2bf572(0x1f8)])+'\x20'+_0x13f49d+'\x20'+(_0x402fa6?_0x2bf572(0x1e0)+_0x402fa6:''),_0x4accab=_0x1c5a20['tCoZq'](_0x13f49d,_0x1c5a20['xPSCg'])?_0x1c5a20['Fvnic']:_0x1c5a20[_0x2bf572(0x1d4)];await _0x1c5a20[_0x2bf572(0x20a)](playwrightAnnotate,_0x4e1541,_0x371ef6,_0x4accab);const _0xc862e8={};_0xc862e8['status']=_0x13f49d;const _0x55642a={};_0x55642a[_0x2bf572(0x1a3)]=_0x1c5a20[_0x2bf572(0x19f)],_0x55642a['arguments']=_0xc862e8;const _0x34b65d=_0x55642a;PerformanceTester[_0x2bf572(0x1f0)](PerformanceEvents[_0x2bf572(0x1bb)]),this[_0x2bf572(0x192)][_0x2bf572(0x1b3)](_0x1c5a20[_0x2bf572(0x1c6)]),await _0x1c5a20[_0x2bf572(0x1c0)](playwrightBstackJsExecutor,_0x4e1541,_0x34b65d),PerformanceTester[_0x2bf572(0x1e9)](PerformanceEvents[_0x2bf572(0x1bb)]);}async[a73_0x329265(0x1d1)](_0x171d93){const _0x28e84b=a73_0x329265,_0x2b4d28={'kWhWa':_0x28e84b(0x19c),'FeRCv':_0x28e84b(0x1c8),'BJGSJ':function(_0x24cec4,_0x7291bc){return _0x24cec4(_0x7291bc);},'TbvvS':function(_0x249bfa,_0x377901,_0x8ec644){return _0x249bfa(_0x377901,_0x8ec644);}};try{if(CLIUtils[_0x28e84b(0x1ad)](BrowserstackCLI[_0x28e84b(0x1a8)]()['getConfig']())){this[_0x28e84b(0x192)][_0x28e84b(0x1b3)](_0x2b4d28[_0x28e84b(0x1b8)]);return;}const _0x127565=AutomationFramework[_0x28e84b(0x1c1)](AutomationFramework[_0x28e84b(0x1c9)](),PlaywrightDriverModule[_0x28e84b(0x18f)]),_0x124764={'action':_0x2b4d28[_0x28e84b(0x1ce)],'arguments':{'name':_0x2b4d28[_0x28e84b(0x21a)](getPlaywrightSessionName,_0x171d93)}};PerformanceTester[_0x28e84b(0x1f0)](PerformanceEvents[_0x28e84b(0x19a)]),await _0x2b4d28['TbvvS'](playwrightBstackJsExecutor,_0x127565,_0x124764),PerformanceTester['end'](PerformanceEvents[_0x28e84b(0x19a)]);}catch(_0x1f10ed){PerformanceTester[_0x28e84b(0x1e9)](PerformanceEvents['SESSION_NAME'],![],util[_0x28e84b(0x1e7)](_0x1f10ed)),this[_0x28e84b(0x192)][_0x28e84b(0x20b)](_0x28e84b(0x1c4)+util[_0x28e84b(0x1e7)](_0x1f10ed));}}}PlaywrightDriverModule[a73_0x329265(0x217)]=a73_0x329265(0x203),module['exports']=PlaywrightDriverModule;function a73_0x50e4(){const _0x4ea186=['shouldSkipSessionName','577660FWkNox','OfWdK','5227371pfmVuR','parallelIndex','KEY_TEST_ID','debug','../../../helpers/classLogger.js','shouldSkipSessionStatus','onBeforeDriverCreate','capabilities','kWhWa','message','onAfterDriverCreate:\x20Setting\x20browser\x20object','SESSION_STATUS','inspect','hubUrl','oDGGW','4|0|8|6|5|1|9|3|7|2|10','ypnIi','getState','contextObject','./baseModule','Error\x20in\x20markSessionName:\x20','onAfterDriverCreate:\x20Setting\x20Session\x20Name\x20from\x20testInfo','CBHDi','onDispatchExecute:\x20Playwright\x20sessionId:\x20','setSessionName','getTrackedInstance','testInfo','util','Unable\x20to\x20mark\x20session\x20status,\x20received\x20status:\x20','Dmxem','FeRCv','xTXqQ','64yNkGLI','markSessionName','bind','onAfterTest','PCKwb','tFmLK','jVoRi','KfhzZ','2480064HBjrWV','pageObject','223468XesCZz','playwrightVersion','workerInfo','getConfig','LiXsc','browserName','with\x20','markSessionStatus:\x20Skipping\x20session\x20status\x20marking','onDispatchExecute:\x20Playwright\x20platform\x20details:\x20','__workerDetails','../../../helpers/performance/constants.js','onAfterDriverCreate:\x20Playwright\x20driver\x20is\x20about\x20to\x20be\x20created','ubroU','format','86442YFdaVI','end','platforms','qSrfH','markSessionStatus','HTXEE','BLLsX','browserObject','start','VOAjb','driverInit','KEY_HUB_URL','status','Session','ogRit','4598470djNZbH','SHBDm','stringify','platformDetails','name','KEY_CONTEXT_OBJECT','onDispatchExecute:\x20Playwright\x20driver\x20is\x20executing\x20tests\x20','lJyFr','setSessionStatus','Error\x20in\x20onAfterDriverCreate:\x20','OiisM','onAfterDriverCreate:\x20Setting\x20context\x20object','PlaywrightDriverModule','Automation\x20onAfterTest:\x20Test\x20completed','getModuleName','markSessionStatus:\x20Page\x20object\x20is\x20not\x20available','../framework/automationFramework.js','Error\x20in\x20onBeforeDriverCreate:\x20','params','iUAPy','error','UdWUK','Automation\x20onAfterTest:\x20Setting\x20session\x20status\x20for\x20testId:\x20','KEY_CAPABILITIES','isPlaywright','../../../helpers/helper.js','onBeforeDriverCreate:\x20Playwright\x20driver\x20is\x20about\x20to\x20be\x20created','4010146tyGShN','PLAYWRIGHT','reason','../state/hookState.js','setState','MODULE_NAME','../browserstackCLI.js','bsParams','BJGSJ','Automation\x20onAfterTest:\x20Test\x20status:\x20','POST','registerObserver','EXECUTE','DQWCo','from','../state/automationFrameworkState.js','NAaWL','KEY_PAGE_OBJECT','PLAYWRIGHT_DISPATCH','eyjax','logger','6moMAqd','sessionId','AUTOMATE_EVENTS','onPlaywrightDispatch','arguments','split','KEY_SESSION_ID','SESSION_NAME','KEY_PLATFORM_INDEX','markSessionName:\x20Skipping\x20session\x20name\x20marking','bStackParams','page','KlNpV','testId','instance','KEY_BROWSER_OBJECT','action','getRef','context','markSessionStatus:\x20Automation\x20instance\x20is\x20not\x20available','\x20||\x20','getInstance','55lshnYR','Error\x20in\x20onDispatchExecute:\x20','onAfterDriverCreate','CREATE'];a73_0x50e4=function(){return _0x4ea186;};return a73_0x50e4();}