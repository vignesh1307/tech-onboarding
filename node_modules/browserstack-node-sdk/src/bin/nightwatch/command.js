#!/usr/bin/env node
'use strict';const a34_0x79e513=a34_0x186b;(function(_0x4a0aa9,_0x187608){const _0x44c758=a34_0x186b,_0x39b8f8=_0x4a0aa9();while(!![]){try{const _0x5af7cb=parseInt(_0x44c758(0x10f))/0x1*(-parseInt(_0x44c758(0xfc))/0x2)+parseInt(_0x44c758(0xf8))/0x3+parseInt(_0x44c758(0x110))/0x4+-parseInt(_0x44c758(0xe1))/0x5*(-parseInt(_0x44c758(0x108))/0x6)+parseInt(_0x44c758(0xf9))/0x7+-parseInt(_0x44c758(0xe8))/0x8*(parseInt(_0x44c758(0xf4))/0x9)+-parseInt(_0x44c758(0xed))/0xa*(parseInt(_0x44c758(0x111))/0xb);if(_0x5af7cb===_0x187608)break;else _0x39b8f8['push'](_0x39b8f8['shift']());}catch(_0x4e9959){_0x39b8f8['push'](_0x39b8f8['shift']());}}}(a34_0x30fb,0x99ac8));function a34_0x186b(_0x526961,_0x13c328){const _0x30fb18=a34_0x30fb();return a34_0x186b=function(_0x186b39,_0x507bfc){_0x186b39=_0x186b39-0xd2;let _0x556d52=_0x30fb18[_0x186b39];return _0x556d52;},a34_0x186b(_0x526961,_0x13c328);}const fs=require('fs'),path=require(a34_0x79e513(0xfb)),{spawn}=require('child_process'),logger=require(a34_0x79e513(0x113))[a34_0x79e513(0xda)],{default:BrowserStackSetup}=require(a34_0x79e513(0x10c)),helper=require(a34_0x79e513(0xe0)),constants=require(a34_0x79e513(0x112)),getUserNightwatchConfigs=(_0x39bb4b,_0x542682)=>{const _0x330023=a34_0x79e513,_0x22e8c4={'NHfzj':'nightwatch.conf.js','eDyBg':'nightwatch.json','wTeXG':function(_0x3bc600,_0x2aaade){return _0x3bc600(_0x2aaade);},'hOJmS':'Couldn\x27t\x20find\x20any\x20config\x20file.\x20Generating\x20new\x20config\x20file'};let _0x11ca24=null,_0x378de2={};const _0x2caaf3=_0x542682[_0x330023(0x11e)](_0x34810a=>_0x34810a===_0x330023(0x100));if(!helper[_0x330023(0xd3)](_0x39bb4b[_0x330023(0x109)])&&fs[_0x330023(0xde)](path[_0x330023(0xe5)](process[_0x330023(0x11b)](),_0x39bb4b[_0x330023(0x109)])))_0x11ca24=path[_0x330023(0xe5)](process['cwd'](),_0x39bb4b['config']),_0x542682[_0x330023(0x11a)](_0x2caaf3,0x2);else{if(fs['existsSync'](path[_0x330023(0xe5)](process[_0x330023(0x11b)](),_0x22e8c4[_0x330023(0xf5)])))_0x11ca24=path[_0x330023(0xe5)](process[_0x330023(0x11b)](),_0x22e8c4[_0x330023(0xf5)]);else fs[_0x330023(0xde)](path[_0x330023(0xe5)](process[_0x330023(0x11b)](),_0x22e8c4[_0x330023(0x114)]))&&(_0x11ca24=path['join'](process[_0x330023(0x11b)](),_0x22e8c4[_0x330023(0x114)]));}return _0x11ca24?(logger['info'](_0x330023(0xe3)+_0x11ca24),_0x378de2=_0x22e8c4[_0x330023(0x102)](require,_0x11ca24)):logger['info'](_0x22e8c4[_0x330023(0xdc)]),_0x378de2;},removeExistingEnvs=_0x2e111a=>{const _0x2ad8c5=a34_0x79e513,_0x6b793d={};_0x6b793d[_0x2ad8c5(0x106)]=function(_0x3f260a,_0x148da1){return _0x3f260a>_0x148da1;},_0x6b793d[_0x2ad8c5(0xd8)]=function(_0xc087cd,_0x1c7437){return _0xc087cd>_0x1c7437;};const _0x30f132=_0x6b793d;let _0x3a1251=_0x2e111a[_0x2ad8c5(0x11e)](_0x21922b=>_0x21922b===_0x2ad8c5(0x118));_0x30f132[_0x2ad8c5(0x106)](_0x3a1251,-0x1)&&_0x2e111a[_0x2ad8c5(0x11a)](_0x3a1251,0x2),_0x3a1251=_0x2e111a['findIndex'](_0x23c3dd=>_0x23c3dd==='-e'),_0x30f132['mxgnN'](_0x3a1251,-0x1)&&_0x2e111a['splice'](_0x3a1251,0x2);};function a34_0x30fb(){const _0x918e16=['24tMQfjF','jOZbA','umhNC','platform','test_settings','5880ydBDvz','nQHsV','forEach','Deleting\x20','getPlatformName','modifyBrowserStackW3CCaps','split','120159FMIbDt','NHfzj','stringify','map','1070538HXKmDj','11228ijhTmE','DXNiH','path','1104214yrvITU','nightwatch.cmd','iXVnd','iXExM','--config','webdriver','wTeXG','inherit','Adding\x20browserstack\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','length','KHfVH','selenium','12YAQzZk','config','CMqdE','BaPtx','../../helpers/BrowserStackSetup','info','env','1hOJBuR','3993432mdMxRC','17611ryIPFe','../utils/constants','../../helpers/logger','eDyBg','now','xPYpF','host','--env','QTEeu','splice','cwd','mergeDeep','BaeJj','findIndex','slice','isUndefined','writeFileSync','nightwatch','filter','PoNSq','mxgnN','nightwatch-browserstack.json','winstonLogger','ZmYiD','hOJmS','oazRi','existsSync','useW3C','../../helpers/helper','2015470vXoUoa','test','Getting\x20your\x20nightwatch\x20configs\x20from\x20','JSObW','join','hub.browserstack.com','platforms'];a34_0x30fb=function(){return _0x918e16;};return a34_0x30fb();}function run(_0x174446,_0x1fa7b3,_0x47f6cf){const _0x2a92d4=a34_0x79e513,_0x5adbb5={'CMqdE':_0x2a92d4(0xd5),'nQHsV':function(_0x5bddb9,_0x44935b){return _0x5bddb9+_0x44935b;},'PoNSq':'test_settings','BaeJj':function(_0x53f4e1,_0x1f0694,_0x30b16b){return _0x53f4e1(_0x1f0694,_0x30b16b);},'DXNiH':_0x2a92d4(0xe6),'QTEeu':_0x2a92d4(0x104),'JSObW':function(_0x150bdc,_0x4867b5){return _0x150bdc===_0x4867b5;},'jOZbA':_0x2a92d4(0xd9),'KaTbZ':function(_0x257e6f,_0x3cb679){return _0x257e6f(_0x3cb679);},'umhNC':function(_0x58bb55,_0x1671ca,_0x3f9499,_0x4f8d5b){return _0x58bb55(_0x1671ca,_0x3f9499,_0x4f8d5b);},'oazRi':_0x2a92d4(0xfd),'iXExM':_0x2a92d4(0x100),'BaPtx':_0x2a92d4(0x118),'xPYpF':_0x2a92d4(0x103),'rsGeb':'close'};if(!_0x47f6cf[_0x2a92d4(0x109)])return;const _0x450814=_0x5adbb5[_0x2a92d4(0x11d)](getUserNightwatchConfigs,_0x174446,_0x1fa7b3),_0x150116={};_0x150116['start_process']=![];const _0x277563={};_0x277563[_0x2a92d4(0x117)]=_0x5adbb5[_0x2a92d4(0xfa)],_0x277563['port']=0x1bb;const _0x2da99f={};_0x2da99f[_0x2a92d4(0x101)]=_0x150116,_0x2da99f[_0x2a92d4(0x107)]=_0x277563;const _0x1a7f01=_0x2da99f;logger['info'](_0x5adbb5[_0x2a92d4(0x119)]);const _0x4320da={..._0x450814},_0x2d4c10=_0x4320da,_0xa81b72=helper[_0x2a92d4(0xdf)](_0x47f6cf[_0x2a92d4(0x109)]),_0x4b6fb8=[];_0x47f6cf[_0x2a92d4(0x109)][_0x2a92d4(0xe7)][_0x2a92d4(0xef)]((_0x3dba88,_0x7807a0)=>{const _0x44a069=_0x2a92d4;_0xa81b72?_0x4b6fb8['push'](helper[_0x44a069(0xf2)](_0x47f6cf[_0x44a069(0x109)],_0x5adbb5['CMqdE'],_0x7807a0)):_0x4b6fb8['push'](helper['modifyBrowserStackCaps'](_0x47f6cf[_0x44a069(0x109)],_0x5adbb5['CMqdE'],_0x7807a0));});const _0x44dcef={},_0x290802=[];_0x174446['env']=_0x174446[_0x2a92d4(0x10e)]||_0x174446['e'];const _0x18b403=_0x174446[_0x2a92d4(0x10e)]?_0x174446[_0x2a92d4(0x10e)]['trim']()[_0x2a92d4(0xf3)](',')[_0x2a92d4(0xf7)](_0x5b68bf=>_0x5b68bf['trim']())[_0x2a92d4(0xd6)](_0x3a4eae=>_0x3a4eae!==''):[''];_0x5adbb5[_0x2a92d4(0xe4)](_0x18b403[_0x2a92d4(0x105)],0x0)&&_0x18b403['push']('');_0x18b403['forEach'](_0x30e067=>{const _0x432105=_0x2a92d4,_0x3b590b={'iXVnd':function(_0x3cf3a9,_0x441ad4){const _0x30a2ae=a34_0x186b;return _0x5adbb5[_0x30a2ae(0xee)](_0x3cf3a9,_0x441ad4);},'ZmYiD':_0x5adbb5[_0x432105(0xd7)]};_0x4b6fb8[_0x432105(0xef)](_0x333294=>{const _0x5f3b55=_0x432105;let _0x187827=_0x3b590b[_0x5f3b55(0xfe)](helper[_0x5f3b55(0xf1)](_0x333294,'_'),'_'+Date[_0x5f3b55(0x115)]());_0x30e067&&(_0x187827+='_'+_0x30e067);if(_0x30e067&&(!_0x450814[_0x3b590b['ZmYiD']]||!_0x450814[_0x3b590b[_0x5f3b55(0xdb)]][_0x30e067]))return;const _0x487707={..._0x1a7f01};_0x487707['desiredCapabilities']=_0x333294;const _0x33888d=_0x487707;_0x44dcef[_0x187827]=_0x30e067?helper[_0x5f3b55(0x11c)](_0x450814[_0x3b590b['ZmYiD']][_0x30e067],_0x33888d):_0x33888d,_0x290802['push'](_0x187827);});});!_0x2d4c10['test_settings']&&(_0x2d4c10[_0x2a92d4(0xec)]={});_0x2d4c10['test_settings']={..._0x2d4c10[_0x2a92d4(0xec)],..._0x44dcef};const _0x3eda59=path[_0x2a92d4(0xe5)](__dirname,_0x5adbb5[_0x2a92d4(0xe9)]);fs[_0x2a92d4(0xd4)](_0x3eda59,JSON[_0x2a92d4(0xf6)](_0x2d4c10)),_0x5adbb5['KaTbZ'](removeExistingEnvs,_0x1fa7b3);const _0x1a7181=_0x5adbb5[_0x2a92d4(0xea)](spawn,/^win/[_0x2a92d4(0xe2)](process[_0x2a92d4(0xeb)])?_0x5adbb5[_0x2a92d4(0xdd)]:_0x5adbb5[_0x2a92d4(0x10a)],[_0x5adbb5[_0x2a92d4(0xff)],_0x3eda59,..._0x1fa7b3[_0x2a92d4(0xd2)](0x1),_0x5adbb5[_0x2a92d4(0x10b)],_0x290802[_0x2a92d4(0xe5)](',')],{'stdio':_0x5adbb5[_0x2a92d4(0x116)]});_0x1a7181['on'](_0x5adbb5['rsGeb'],async _0x27332b=>{const _0x3a964a=_0x2a92d4;logger['debug']('child\x20process\x20exited\x20with\x20code\x20'+_0x27332b),logger[_0x3a964a(0x10d)](_0x3a964a(0xf0)+_0x3eda59),fs['unlinkSync'](_0x3eda59);});}module['exports']=run;