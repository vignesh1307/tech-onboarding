const a41_0x1aab9a=a41_0x32d6;function a41_0x32d6(_0x5a6d5a,_0x18873b){const _0x460a78=a41_0x460a();return a41_0x32d6=function(_0x32d6ff,_0x3537a7){_0x32d6ff=_0x32d6ff-0xae;let _0x2f5fdf=_0x460a78[_0x32d6ff];return _0x2f5fdf;},a41_0x32d6(_0x5a6d5a,_0x18873b);}(function(_0x50a060,_0x45d7de){const _0x186cbd=a41_0x32d6,_0x17ebe0=_0x50a060();while(!![]){try{const _0x13b8c1=parseInt(_0x186cbd(0xe1))/0x1*(parseInt(_0x186cbd(0xb0))/0x2)+parseInt(_0x186cbd(0x113))/0x3+-parseInt(_0x186cbd(0xe6))/0x4*(-parseInt(_0x186cbd(0x114))/0x5)+-parseInt(_0x186cbd(0x125))/0x6*(-parseInt(_0x186cbd(0xeb))/0x7)+parseInt(_0x186cbd(0xb6))/0x8*(-parseInt(_0x186cbd(0xe5))/0x9)+-parseInt(_0x186cbd(0x10a))/0xa*(-parseInt(_0x186cbd(0x135))/0xb)+-parseInt(_0x186cbd(0x13d))/0xc*(parseInt(_0x186cbd(0x155))/0xd);if(_0x13b8c1===_0x45d7de)break;else _0x17ebe0['push'](_0x17ebe0['shift']());}catch(_0x427351){_0x17ebe0['push'](_0x17ebe0['shift']());}}}(a41_0x460a,0x4fe63));const {debug,getFrameworkVersion,removeAnsiColors,failureData}=require(a41_0x1aab9a(0xe0)),PerformanceTester=require('../../../helpers/performance/performance-tester'),fs=require('fs'),{FRAMEWORKS,MAX_ALLOWED_PLAYWRIGHT_TRACE_SIZE}=require(a41_0x1aab9a(0x137)),helper=require(a41_0x1aab9a(0xf6)),path=require(a41_0x1aab9a(0xc9)),logger=require(a41_0x1aab9a(0x12a))[a41_0x1aab9a(0x13f)],SessionHandler=require(a41_0x1aab9a(0x157)),TestDetails=require(a41_0x1aab9a(0xfc)),util=require(a41_0x1aab9a(0x12c)),TestInfo=require(a41_0x1aab9a(0xd8));let BrowserstackCLIInstance=null;function getBrowserstackCLI(){const _0x28021c=a41_0x1aab9a,_0xfb168f={'fmMfp':function(_0xcac05d,_0x990bab){return _0xcac05d(_0x990bab);},'fXcGK':_0x28021c(0x120)};return!BrowserstackCLIInstance&&(BrowserstackCLIInstance=_0xfb168f[_0x28021c(0xea)](require,_0xfb168f[_0x28021c(0xc1)])),BrowserstackCLIInstance;}function a41_0x460a(){const _0x5b9474=['call','stack','cstpC','91LIWgew','ELKCb','../../../helpers/test-observability/sessionHandler','calculateTimesFromMultipleFiles','uTBXk','env','tags','Total\x20duration\x20for\x20whole\x20build\x20is\x20','1.42.0','14YTOWsY','WvWuk','sendEventData','uploadTraceZip','MeinY','LogCreated','3240YyaCJu','playwright/lib/common/configLoader.js','RmnOX','WxCyg','isRunning','hFWVu','BKFGc','VrgtL','JkTxY','Trace\x20file\x20size\x20exceeds\x20100MB:\x20','readdirSync','fXcGK','compareVersions','map','afterWorkerHook','PLAYWRIGHT','myYiC','1.35.0','\x20in\x20attachments','path','WkQav','npkzL','substr','find','RezAA','findNestedKey','Qxpuk','beforeTestHook','beforeWorkerHook','lqEvO','UwHyt','IUhLe','khyXG','jVnms','../../v2/TestInfo','playwright','UILDT','getTransformPath','JgbQa','KkmnV','LqHrn','title','../../../helpers/test-observability/utils','788vooKOh','sendTraceZip','dOSxM','doo11ySync','54GPDjNP','8BceAFF','getFailureData','includes','DPvnS','fmMfp','1253myfxlo','Percentage\x20of\x20increased\x20time\x20is\x20','validateFilePath','process.js','extname','qPrwv','xuQBC','ndLhW','.json','addTraceFilePath','DNfSg','../../../helpers/helper','rqOHi','Found\x20key:\x20','test','existsSync','ULUKa','./test-details','getInstance','Checking\x20if\x20trace\x20is\x20enabled\x20for\x20test:\x20','gmYDW','endsWith','kOzdk','ZPKaG','debug','nmbHN','Searching\x20for\x20key:\x20','1.38.0','getPlaywrightLibPath','size','common','10kfLDNi','filePath','szFnu','runner/projectUtils.js','TIhTu','qKTJk','length','onStepEnd','getTestTags','657864xDuIqK','1033685TyRPwN','\x20bytes','TEST_LOG','ezSmR','Error\x20in\x20sending\x20trace\x20file:\x20%s','Trace\x20enabled','@playwright/test/lib/common/transform.js','vmfdk','getProjectUtilsPath','sendTestLog','Invalid\x20file\x20format.\x20Expected\x20a\x20.zip\x20file,\x20but\x20got:\x20','\x20in\x20arguments','../../v2/browserstackCLI','toString','@playwright/test/lib/common/configLoader.js','YeYwQ','ixWOc','17382iYUczm','jCeuV','HqSdj','stopAndGenerate','error','../../../helpers/logger','JmAeV','util','VfUgA','syZiS','OkZjB','match','toLowerCase','cWViN','qRawj','YqcBn','6953067IkuTsP','ERROR','../../../helpers/test-observability/constants','iUHKS','getForkProcessPath','rtRQI','START_TIME','runner/loadUtils.js','2501556pAUmjQ','startsWith','winstonLogger','zuroa','join','performance-report-worker-','Arguments','slice','format','performance-reporter.html','@playwright/test','UgdTI','HuLcJ','getTime','RIiyn','yRVxC','vLaNs','rBhjZ','onTestEnd','playwright/lib/transform/transform.js','filter'];a41_0x460a=function(){return _0x5b9474;};return a41_0x460a();}const getTagsFromTitle=_0x48f4bd=>{const _0x545eb4=a41_0x1aab9a;return _0x48f4bd[_0x545eb4(0x130)](/@(\w+)/g)?.['map'](_0x3aea7c=>_0x3aea7c[_0x545eb4(0x144)](0x1))||[];};exports[a41_0x1aab9a(0x112)]=_0x177c3a=>{const _0x22af5f=a41_0x1aab9a,_0x31a662={'vLaNs':function(_0x30f272,_0x46d1b3){return _0x30f272(_0x46d1b3);}};if(_0x177c3a[_0x22af5f(0x15b)])return _0x177c3a[_0x22af5f(0x15b)]['map'](_0x24d40c=>_0x24d40c['startsWith']('@')?_0x24d40c[_0x22af5f(0xcc)](0x1):_0x24d40c);return _0x31a662[_0x22af5f(0x14d)](getTagsFromTitle,_0x177c3a[_0x22af5f(0xdf)]);},exports['calculatePerformance']=async()=>{const _0x42864b=a41_0x1aab9a,_0x3d2e62={'cWViN':function(_0x565166,_0xd2ff4){return _0x565166-_0xd2ff4;},'qKTJk':_0x42864b(0x146),'TIhTu':'onBegin','lqEvO':'endSession','npkzL':'onTestBegin','UOMPt':_0x42864b(0x14f),'MeinY':'onStepBegin','xXWCU':_0x42864b(0x111),'KSOYO':_0x42864b(0xd2),'yRVxC':_0x42864b(0xc4),'JcVaS':_0x42864b(0xd1),'RIiyn':'afterTestHook','KMYzS':_0x42864b(0xe4),'RmnOX':'processPageScreenshot','Zjnnn':'sendSessionDetails','dOSxM':'setupBrowserDetails','BBpaa':'requestSpyCallback','RezAA':_0x42864b(0x11d),'szFnu':function(_0x35b332,_0x458e44){return _0x35b332(_0x458e44);},'ndLhW':function(_0x4de57e,_0x2068da){return _0x4de57e/_0x2068da;},'myYiC':function(_0x2fd706,_0x2ba75f){return _0x2fd706(_0x2ba75f);},'zuroa':function(_0x327a86,_0x33f53e){return _0x327a86+_0x33f53e;},'kOzdk':function(_0x3e18ef,_0x21c897){return _0x3e18ef*_0x21c897;},'TEahn':function(_0x38df26,_0x250df4){return _0x38df26/_0x250df4;},'ZPKaG':function(_0x4a4ce4,_0x507498){return _0x4a4ce4+_0x507498;}};if(!process['env'][_0x42864b(0x13b)])return;const _0x579c60=_0x3d2e62[_0x42864b(0x132)](new Date()[_0x42864b(0x14a)](),new Date(process[_0x42864b(0x15a)][_0x42864b(0x13b)])[_0x42864b(0x14a)]()),_0x2ccfe7=await PerformanceTester[_0x42864b(0x128)](_0x3d2e62[_0x42864b(0x10f)],[_0x3d2e62[_0x42864b(0x10e)],_0x3d2e62[_0x42864b(0xd3)],_0x3d2e62[_0x42864b(0xcb)],_0x3d2e62['UOMPt'],_0x3d2e62[_0x42864b(0xb4)],_0x3d2e62['xXWCU']]),_0x27d4b9=fs[_0x42864b(0xc0)]('.'),_0x2788ed=_0x27d4b9[_0x42864b(0x151)](_0x418a33=>_0x418a33['startsWith'](_0x42864b(0x142))&&_0x418a33[_0x42864b(0x100)](_0x42864b(0xf3))),_0x2d7dea=await PerformanceTester[_0x42864b(0x158)](_0x2788ed,[_0x3d2e62['KSOYO'],_0x3d2e62[_0x42864b(0x14c)],_0x3d2e62['JcVaS'],_0x3d2e62[_0x42864b(0x14b)],_0x3d2e62['KMYzS'],_0x3d2e62[_0x42864b(0xb8)],_0x3d2e62['Zjnnn'],_0x3d2e62[_0x42864b(0xe3)],_0x3d2e62['BBpaa'],_0x3d2e62[_0x42864b(0xce)]]);_0x3d2e62[_0x42864b(0x10c)](debug,_0x42864b(0xae)+_0x3d2e62[_0x42864b(0xf2)](_0x579c60,0x3e8)+'\x20s'),_0x3d2e62[_0x42864b(0xc6)](debug,'Total\x20time\x20taken\x20by\x20O11y\x20is\x20'+_0x3d2e62[_0x42864b(0x140)](_0x2d7dea,_0x2ccfe7)),_0x3d2e62[_0x42864b(0xc6)](debug,_0x42864b(0xec)+_0x3d2e62[_0x42864b(0x101)](_0x3d2e62['TEahn'](_0x3d2e62[_0x42864b(0x102)](_0x2d7dea,_0x2ccfe7),_0x579c60),0x64));},exports[a41_0x1aab9a(0xdb)]=()=>{const _0x230bca=a41_0x1aab9a,_0x492ac4={'UILDT':function(_0x56fa1a,_0x779251){return _0x56fa1a(_0x779251);},'jCeuV':function(_0x1d87f8,_0x5a8364){return _0x1d87f8>=_0x5a8364;},'hFWVu':'1.38.0','erytK':_0x230bca(0x150),'uTBXk':_0x230bca(0xd9),'ELKCb':_0x230bca(0xc7),'JkTxY':'@playwright/test/lib/transform/transform.js','IUhLe':_0x230bca(0x147),'VrgtL':_0x230bca(0x11a)},_0x215bfe=_0x492ac4[_0x230bca(0xda)](getFrameworkVersion,FRAMEWORKS[_0x230bca(0xc5)]);if(_0x492ac4[_0x230bca(0x126)](helper[_0x230bca(0xc2)](_0x215bfe,_0x492ac4[_0x230bca(0xbb)]),0x0))return[_0x492ac4['erytK'],_0x492ac4[_0x230bca(0x159)]];if(_0x492ac4[_0x230bca(0x126)](helper[_0x230bca(0xc2)](_0x215bfe,_0x492ac4[_0x230bca(0x156)]),0x0))return[_0x492ac4[_0x230bca(0xbe)],_0x492ac4[_0x230bca(0xd5)]];return[_0x492ac4[_0x230bca(0xbd)],_0x492ac4[_0x230bca(0xd5)]];},exports['getConfigLoaderPath']=()=>{const _0x23ae87=a41_0x1aab9a,_0x245209={'HuLcJ':function(_0x17823f,_0x582bc1){return _0x17823f(_0x582bc1);},'ULUKa':function(_0x80c796,_0x46c1aa){return _0x80c796>=_0x46c1aa;},'KkmnV':_0x23ae87(0x106),'VfUgA':_0x23ae87(0xb7),'WvWuk':_0x23ae87(0xd9),'DPvnS':_0x23ae87(0x122),'UwHyt':_0x23ae87(0x147)},_0x35cce4=_0x245209[_0x23ae87(0x149)](getFrameworkVersion,FRAMEWORKS[_0x23ae87(0xc5)]);if(_0x245209[_0x23ae87(0xfb)](helper[_0x23ae87(0xc2)](_0x35cce4,_0x245209[_0x23ae87(0xdd)]),0x0))return[_0x245209[_0x23ae87(0x12d)],_0x245209[_0x23ae87(0xb1)]];return[_0x245209[_0x23ae87(0xe9)],_0x245209[_0x23ae87(0xd4)]];},exports['getLoadUtilsPath']=()=>{const _0x1ec7c8=a41_0x1aab9a,_0xd5df6a={};_0xd5df6a[_0x1ec7c8(0xff)]=_0x1ec7c8(0x13c);const _0x5090e9=_0xd5df6a;return helper[_0x1ec7c8(0x107)](_0x5090e9['gmYDW']);},exports[a41_0x1aab9a(0x11c)]=()=>{const _0x35bf19=a41_0x1aab9a,_0x2f4ea7={};_0x2f4ea7[_0x35bf19(0x12e)]=_0x35bf19(0x10d);const _0x3341b2=_0x2f4ea7;return helper[_0x35bf19(0x107)](_0x3341b2[_0x35bf19(0x12e)]);},exports[a41_0x1aab9a(0x139)]=()=>{const _0x57eb38=a41_0x1aab9a,_0x177da6={'VFuOF':function(_0x465031,_0x4e90ca){return _0x465031(_0x4e90ca);},'HqSdj':function(_0x7de10d,_0x4a34e7){return _0x7de10d>=_0x4a34e7;},'UgdTI':'1.38.0','OkZjB':'lib','nmbHN':_0x57eb38(0x109),'WkQav':_0x57eb38(0xee),'LqHrn':_0x57eb38(0xf9)},_0x5875f4=_0x177da6['VFuOF'](getFrameworkVersion,FRAMEWORKS[_0x57eb38(0xc5)]);if(_0x177da6[_0x57eb38(0x127)](helper[_0x57eb38(0xc2)](_0x5875f4,_0x177da6[_0x57eb38(0x148)]),0x0))return path['join'](_0x177da6[_0x57eb38(0x12f)],_0x177da6[_0x57eb38(0x104)],_0x177da6[_0x57eb38(0xca)]);return path[_0x57eb38(0x141)](_0x177da6[_0x57eb38(0xde)],_0x177da6[_0x57eb38(0x12f)],_0x177da6['nmbHN'],_0x177da6[_0x57eb38(0xca)]);},exports[a41_0x1aab9a(0xe7)]=(_0x441912,{test_run_uuid:_0x1979dd})=>{const _0x40108a=a41_0x1aab9a,_0xe59a5a={'WxCyg':_0x40108a(0x136),'iUHKS':_0x40108a(0x116),'xuQBC':function(_0x1842e6,_0x5c6eed){return _0x1842e6<=_0x5c6eed;},'JgbQa':function(_0x134b7a,_0x423d6b){return _0x134b7a(_0x423d6b);},'dNzoH':'Test\x20timeout\x20of','ezSmR':function(_0x1c418f,_0x535d66){return _0x1c418f(_0x535d66);},'FkNJt':function(_0x1b90fd,_0x541caf){return _0x1b90fd>=_0x541caf;},'YqcBn':_0x40108a(0xaf),'YeYwQ':function(_0x206beb,_0x561bd8){return _0x206beb>_0x561bd8;},'qPrwv':function(_0x4dd2a6,_0xd160ee,_0x424f17){return _0x4dd2a6(_0xd160ee,_0x424f17);},'Qxpuk':_0x40108a(0xf9)};if(!_0x441912||_0xe59a5a[_0x40108a(0xf1)](_0x441912[_0x40108a(0x110)],0x0))return[];const _0x429e57=_0xe59a5a[_0x40108a(0xdc)](removeAnsiColors,_0x441912[0x0]['message']);if(_0x429e57[_0x40108a(0x13e)](_0xe59a5a['dNzoH'])){const _0x35452e=_0x441912[0x0],_0x17ede0=_0xe59a5a[_0x40108a(0x117)](getFrameworkVersion,FRAMEWORKS[_0x40108a(0xc5)]);if((!_0x35452e['stack']||_0xe59a5a['FkNJt'](_0x17ede0,_0xe59a5a[_0x40108a(0x134)]))&&_0xe59a5a[_0x40108a(0x123)](_0x441912[_0x40108a(0x110)],0x1))return{'failureData':[{'backtrace':[_0x429e57,_0xe59a5a[_0x40108a(0xdc)](removeAnsiColors,_0x441912[0x1][_0x40108a(0x153)])]}],'logs':_0x441912['slice'](0x2)[_0x40108a(0xc3)](_0x5cd561=>{const _0x4bf1e9=_0x40108a;return{'timestamp':new Date()['toISOString'](),'level':_0xe59a5a[_0x4bf1e9(0xb9)],'message':''+_0x5cd561['message'],'kind':_0xe59a5a[_0x4bf1e9(0x138)],'http_response':{},'test_run_uuid':_0x1979dd};})};}return{'failureData':_0xe59a5a[_0x40108a(0xf0)](failureData,_0x441912,_0xe59a5a[_0x40108a(0xd0)]),'logs':[]};},exports[a41_0x1aab9a(0xed)]=_0x10fcc5=>{const _0x100022=a41_0x1aab9a,_0x22dbd0={};_0x22dbd0[_0x100022(0xf5)]=function(_0x118411,_0x2e3f4d){return _0x118411!==_0x2e3f4d;},_0x22dbd0['jVnms']='.zip',_0x22dbd0[_0x100022(0x133)]=function(_0x4959a,_0x9485a1){return _0x4959a>_0x9485a1;};const _0x3b4fe6=_0x22dbd0;if(_0x10fcc5&&fs[_0x100022(0xfa)](_0x10fcc5)){if(_0x3b4fe6[_0x100022(0xf5)](path[_0x100022(0xef)](_0x10fcc5)[_0x100022(0x131)](),_0x3b4fe6[_0x100022(0xd7)]))return logger[_0x100022(0x129)](_0x100022(0x11e)+_0x10fcc5),![];const _0x3e2676=fs['statSync'](_0x10fcc5)[_0x100022(0x108)];if(_0x3b4fe6['qRawj'](_0x3e2676,MAX_ALLOWED_PLAYWRIGHT_TRACE_SIZE))return logger[_0x100022(0x129)](_0x100022(0xbf)+_0x3e2676+_0x100022(0x115)),![];return!![];}return![];},exports['findNestedKey']=(_0x526e87,_0x4989ac)=>{const _0x3acf00=a41_0x1aab9a,_0x444f40={};_0x444f40[_0x3acf00(0x13a)]=_0x3acf00(0x143);const _0x36a962=_0x444f40;logger[_0x3acf00(0x103)](_0x3acf00(0x105)+_0x4989ac);if(_0x526e87&&_0x526e87['attachments']){const _0x29b4d5=_0x526e87['attachments'][_0x3acf00(0xcd)](_0x235e21=>_0x235e21['name']==='trace');if(_0x29b4d5)return logger[_0x3acf00(0x103)](_0x3acf00(0xf8)+_0x4989ac+_0x3acf00(0xc8)),_0x29b4d5[_0x4989ac];}else{if(_0x526e87&&Object['prototype'][_0x3acf00(0x121)][_0x3acf00(0x152)](_0x526e87)[_0x3acf00(0xe8)](_0x36a962[_0x3acf00(0x13a)]))for(const _0x26f7a9 of _0x526e87){if(_0x26f7a9[_0x4989ac])return logger[_0x3acf00(0x103)](_0x3acf00(0xf8)+_0x4989ac+_0x3acf00(0x11f)),_0x26f7a9[_0x4989ac];}};return'';},exports[a41_0x1aab9a(0xb3)]=async(_0x990ec1,_0x28ee1d)=>{const _0x53bd12=a41_0x1aab9a,_0x1fb695={};_0x1fb695[_0x53bd12(0x124)]=_0x53bd12(0xb5),_0x1fb695[_0x53bd12(0xf7)]='TEST_ATTACHMENT',_0x1fb695['rBhjZ']='sendTraceZip',_0x1fb695[_0x53bd12(0x154)]=_0x53bd12(0x118);const _0x57c731=_0x1fb695;try{const _0x372b80={'event_type':_0x57c731[_0x53bd12(0x124)],'logs':[{'data':_0x990ec1?fs['createReadStream'](_0x990ec1):'','test_run_uuid':_0x28ee1d,'kind':_0x57c731[_0x53bd12(0xf7)],'fileName':_0x990ec1?path['basename'](_0x990ec1):''}]};return await SessionHandler[_0x53bd12(0xb2)](_0x372b80,0x0,_0x57c731[_0x53bd12(0x14e)]);}catch(_0x2419da){logger['error'](util[_0x53bd12(0x145)](_0x57c731[_0x53bd12(0x154)],_0x2419da));}},exports[a41_0x1aab9a(0xe2)]=async(_0x3e27c7,_0x167240)=>{const _0x45bb79=a41_0x1aab9a,_0x4864e2={'BKFGc':_0x45bb79(0xc9),'khyXG':_0x45bb79(0x119),'vmfdk':function(_0x45d7b3){return _0x45d7b3();},'JmAeV':'Error\x20in\x20sending\x20trace\x20file:\x20%s'};try{logger['debug'](_0x45bb79(0xfe)+_0x167240);let _0x27b43a=await exports[_0x45bb79(0xcf)](_0x3e27c7,_0x4864e2[_0x45bb79(0xbc)]);if(exports[_0x45bb79(0xed)](_0x27b43a)){logger[_0x45bb79(0x103)](_0x4864e2[_0x45bb79(0xd6)]),_0x27b43a=path['resolve'](_0x27b43a);const _0x4aee78={};_0x4aee78['testUId']=_0x167240,_0x4aee78[_0x45bb79(0x10b)]=_0x27b43a;const _0x3f03de=_0x4aee78;_0x4864e2[_0x45bb79(0x11b)](getBrowserstackCLI)[_0x45bb79(0xfd)]()[_0x45bb79(0xba)]()?TestInfo[_0x45bb79(0xf4)](_0x3f03de):TestDetails[_0x45bb79(0xf4)](_0x3f03de);};}catch(_0x97abf3){logger[_0x45bb79(0x129)](util[_0x45bb79(0x145)](_0x4864e2[_0x45bb79(0x12b)],_0x97abf3));}};