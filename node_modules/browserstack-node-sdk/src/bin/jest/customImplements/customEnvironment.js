function a16_0x20fb(){const _0x4508e0=['debug','Builder','../test-observability/obsReporter','browserStackGlobals','mqEkr','qZFiK','percy','LgSvf','setup','shouldFailFast','info','failFastActive','XyaSg','resolveTestEnvironment','handleTestEvent','framework','browserstackAgentV2','DZqLQ','FRAMEWORKS','77UecjAm','global','builder','configuration','sessionNameProvided','message','shutdown','OGTRy','__jestRetries','getTestEnvironment','PTXXX','37452ifDErl','aBMzH','nestedKeyValue','1209466ZVztrR','failFast','2084792GFWQfe','driver','bZkUX','jest-config','name','retries__','cwd','__drivers','requireModule','browserstackPercyBestPlatform','browserstackPlatformIndex','node','600624lFqzMT','mode','projectConfig','capability','platformCaps','skip','errors','uSLvi','OuSaU','quit','env','XFIbl','117CrxAyR','__webdriver','BSTACK_JEST_TEST_ENV','__timeout','../../../helpers/logger','sLLAS','BSTACK_DELTA','dYYhH','test_start','test_done','cleanup','6759360wfewLp','5|9|1|7|2|0|3|4|8|6','requireSeleniumWebdriver','test','winstonLogger','split','../../../helpers/test-orchestration/failfastManager','piJcu','projectName','JEST','jest-environment-node','qLXSQ','shouldProcessEventForTesthub','EoIrZ','SpjvC','teardown','mkVdn','uCAWn','PUMIM','default','join','browserStackPercyOptions','registerListeners','cleanupDrivers','../../../index','../../../helpers/testhub/utils','10779896PROCOJ','buildName','isNotUndefined','__driversArray','testEnvironmentOptions','onTestDone','BhIGN','../../../helpers/test-observability/utils','XWtNQ','__platformCaps','HtfMV','failFastOptions','testPath','skipSessionStatus','__esModule','yGHIZ','19491606MCfeKn','percyCaptureMode','bstack:options','isTrue','modifyCommand','jNLRh'];a16_0x20fb=function(){return _0x4508e0;};return a16_0x20fb();}const a16_0x425183=a16_0x1ded;(function(_0x575b99,_0x35a8e3){const _0x3079e6=a16_0x1ded,_0x2db213=_0x575b99();while(!![]){try{const _0x33390d=parseInt(_0x3079e6(0x195))/0x1+parseInt(_0x3079e6(0x197))/0x2+-parseInt(_0x3079e6(0x1af))/0x3*(parseInt(_0x3079e6(0x192))/0x4)+parseInt(_0x3079e6(0x1ba))/0x5+parseInt(_0x3079e6(0x1a3))/0x6*(parseInt(_0x3079e6(0x1fd))/0x7)+-parseInt(_0x3079e6(0x1d4))/0x8+-parseInt(_0x3079e6(0x1e4))/0x9;if(_0x33390d===_0x35a8e3)break;else _0x2db213['push'](_0x2db213['shift']());}catch(_0x800482){_0x2db213['push'](_0x2db213['shift']());}}}(a16_0x20fb,0xc9c84));const helper=require('../../../helpers/helper'),constants=require('../../utils/constants'),{isTestObservabilitySession}=require(a16_0x425183(0x1db)),RequestQueueHandler=require('../../../helpers/test-observability/requestQueueHandler'),ObservabilityReporter=require(a16_0x425183(0x1ec)),testhubUtils=require(a16_0x425183(0x1d3)),logger=require(a16_0x425183(0x1b3))[a16_0x425183(0x1be)],getTestEnvironment=((()=>{const _0x27e32b=a16_0x425183,_0x14eb6e={};_0x14eb6e[_0x27e32b(0x1da)]='jest-resolve',_0x14eb6e[_0x27e32b(0x193)]=_0x27e32b(0x19a);const _0x1ac320=_0x14eb6e;try{const _0x42ef41=helper[_0x27e32b(0x19f)](_0x1ac320['BhIGN']);if(_0x42ef41[_0x27e32b(0x1f7)])return _0x42ef41['resolveTestEnvironment'];const _0x45639f=helper[_0x27e32b(0x19f)](_0x1ac320[_0x27e32b(0x193)]);if(_0x45639f[_0x27e32b(0x190)])return _0x45639f[_0x27e32b(0x190)];}catch{return()=>null;}return()=>null;})()),_jestUserEnvironment=((()=>{const _0x1efdc7=a16_0x425183,_0x211929={'jNLRh':function(_0x5a3475,_0x93ef58){return _0x5a3475(_0x93ef58);},'OuSaU':_0x1efdc7(0x1a2),'hssST':function(_0x7ad83b,_0x316e04){return _0x7ad83b(_0x316e04);},'DZqLQ':_0x1efdc7(0x1c4),'mqEkr':function(_0xb061f7,_0x37e816){return _0xb061f7(_0x37e816);}},_0x395ab8=_0x211929[_0x1efdc7(0x1e9)](getTestEnvironment,{'rootDir':process[_0x1efdc7(0x19d)](),'testEnvironment':process[_0x1efdc7(0x1ad)][_0x1efdc7(0x1b1)]||_0x211929[_0x1efdc7(0x1ab)]});if(!_0x395ab8)return _0x211929['hssST'](_interopRequireDefault,helper[_0x1efdc7(0x19f)](_0x211929[_0x1efdc7(0x1fb)]));return _0x211929[_0x1efdc7(0x1ee)](_interopRequireDefault,helper[_0x1efdc7(0x19f)](_0x395ab8));})()),_seleniumWebdriver2=((()=>{const _0x4059b6=a16_0x425183,_0x21bc59={'qLXSQ':function(_0x459643,_0x2aed42){return _0x459643(_0x2aed42);}};try{const _0x167ab5=helper[_0x4059b6(0x1bc)]();return helper[_0x4059b6(0x1e8)](),_0x21bc59[_0x4059b6(0x1c5)](_interopRequireDefault,_0x167ab5);}catch{return null;}})());function _interopRequireDefault(_0x136964){const _0x5eff6a=a16_0x425183;return _0x136964&&_0x136964[_0x5eff6a(0x1e2)]?_0x136964:{'default':_0x136964};}const originalBuilder=_seleniumWebdriver2?_seleniumWebdriver2[a16_0x425183(0x1cd)][a16_0x425183(0x1eb)]:null;class CustomEnvironment extends _jestUserEnvironment['default']{constructor(_0x2808e9){const _0x3209b8=a16_0x425183,_0x171810={'LgSvf':_0x3209b8(0x1ac),'PTXXX':function(_0xef21ee,_0x500d01){return _0xef21ee+_0x500d01;},'uCAWn':_0x3209b8(0x1e6),'XFIbl':function(_0x35c7a8,_0x23f36a){return _0x35c7a8(_0x23f36a);},'PUMIM':_0x3209b8(0x1c0),'mkVdn':_0x3209b8(0x1bb),'HtfMV':_0x3209b8(0x1d8),'SpjvC':_0x3209b8(0x1cf),'eBSnp':_0x3209b8(0x1e5),'OGTRy':_0x3209b8(0x1f0),'sLLAS':_0x3209b8(0x1a7),'qZFiK':_0x3209b8(0x1a0),'VRgMA':_0x3209b8(0x1d2)};super(_0x2808e9),this[_0x3209b8(0x1fe)][_0x3209b8(0x1b2)]=0x0,this[_0x3209b8(0x200)]={};!_0x2808e9[_0x3209b8(0x1d8)]&&(_0x2808e9[_0x3209b8(0x1d8)]={});if(helper['isBrowserstackInfra']()){_0x2808e9[_0x3209b8(0x1d8)]=_0x2808e9[_0x3209b8(0x1a5)]?_0x2808e9['projectConfig'][_0x3209b8(0x1d8)]:_0x2808e9[_0x3209b8(0x1d8)],this[_0x3209b8(0x1ff)]=new _seleniumWebdriver2[(_0x3209b8(0x1cd))][(_0x3209b8(0x1eb))](),this['capability']=_0x2808e9[_0x3209b8(0x1a5)]?_0x2808e9[_0x3209b8(0x1a5)][_0x3209b8(0x1a6)]:_0x2808e9[_0x3209b8(0x1a6)],this[_0x3209b8(0x1fe)]['__timeout']=_0x171810[_0x3209b8(0x191)](this['configuration']['timeout__'],constants[_0x3209b8(0x1b5)]),this[_0x3209b8(0x1df)]=_0x2808e9['testEnvironmentOptions'][_0x3209b8(0x196)];if(this[_0x3209b8(0x1df)]){const _0x20284=this['capability'][_0x171810['uCAWn']]?.[_0x3209b8(0x1d5)]||'',_0x3bc180=this['capability'][_0x171810[_0x3209b8(0x1cb)]]?.[_0x3209b8(0x1c2)]||'';this[_0x3209b8(0x196)]=new(_0x171810[_0x3209b8(0x1ae)](require,_0x171810[_0x3209b8(0x1cc)]))(this[_0x3209b8(0x1df)],_0x20284,_0x3bc180),this['global']['failFastActive']=![];}helper[_0x3209b8(0x1d6)](this[_0x3209b8(0x200)][_0x3209b8(0x19c)])&&(this[_0x3209b8(0x1fe)][_0x3209b8(0x18f)]=this['configuration'][_0x3209b8(0x19c)]);}if(testhubUtils[_0x3209b8(0x1c6)]()){const _0x2bc11b=new ObservabilityReporter();_0x2bc11b[_0x3209b8(0x1d0)]();}this['global'][_0x3209b8(0x1ed)]={},this[_0x3209b8(0x200)]=_0x2808e9[_0x3209b8(0x1d8)],this[_0x3209b8(0x200)][_0x3209b8(0x1f9)]=constants[_0x3209b8(0x1fc)][_0x3209b8(0x1c3)];if(_seleniumWebdriver2){const _0x3d2c07=_0x171810[_0x3209b8(0x1ca)][_0x3209b8(0x1bf)]('|');let _0x5d8579=0x0;while(!![]){switch(_0x3d2c07[_0x5d8579++]){case'0':this[_0x3209b8(0x1fe)][_0x3209b8(0x1e5)]=helper[_0x3209b8(0x194)](_0x2808e9,[_0x171810['HtfMV'],_0x171810[_0x3209b8(0x1c8)],_0x171810['eBSnp']]);continue;case'1':this['global'][_0x3209b8(0x1a1)]=(_0x2808e9['projectConfig']?_0x2808e9[_0x3209b8(0x1a5)]['browserstackPlatformIndex']:_0x2808e9[_0x3209b8(0x1a1)])||0x0;continue;case'2':this[_0x3209b8(0x1fe)][_0x3209b8(0x1f0)]=helper[_0x3209b8(0x194)](_0x2808e9,[_0x171810[_0x3209b8(0x1de)],_0x171810[_0x3209b8(0x1c8)],_0x171810[_0x3209b8(0x18e)]]);continue;case'3':this['global'][_0x3209b8(0x1dd)]=helper[_0x3209b8(0x194)](this[_0x3209b8(0x200)],[_0x171810[_0x3209b8(0x1b4)],this['global'][_0x3209b8(0x1a1)]])||{};continue;case'4':helper[_0x3209b8(0x1e7)](this[_0x3209b8(0x200)]['skipSessionName'])?this['global'][_0x3209b8(0x201)]=!![]:this[_0x3209b8(0x1fe)][_0x3209b8(0x201)]=![];continue;case'5':this[_0x3209b8(0x1fe)][_0x3209b8(0x19e)]=[];continue;case'6':this[_0x3209b8(0x1fe)][_0x3209b8(0x1b9)]=async()=>{const _0x40e154=_0x3209b8;await this[_0x40e154(0x1fe)][_0x40e154(0x198)][_0x40e154(0x1ac)](_0x171810[_0x40e154(0x1f1)]);};continue;case'7':this[_0x3209b8(0x1fe)][_0x3209b8(0x1a0)]=helper['nestedKeyValue'](_0x2808e9,[_0x171810[_0x3209b8(0x1de)],_0x171810[_0x3209b8(0x1c8)],_0x171810[_0x3209b8(0x1ef)]]);continue;case'8':this[_0x3209b8(0x1fe)]['__skipSessionStatus']=helper[_0x3209b8(0x1e7)](this['configuration'][_0x3209b8(0x1e1)]);continue;case'9':this[_0x3209b8(0x1fe)]['__webdriver']=_0x171810[_0x3209b8(0x1ae)](require,_0x171810['VRgMA'])[_0x3209b8(0x1fa)]({...this[_0x3209b8(0x200)],'capability':this[_0x3209b8(0x1a6)]||{}},this,testhubUtils['shouldProcessEventForTesthub']());continue;}break;}}}async[a16_0x425183(0x1c9)](){const _0x5d1dc3=a16_0x425183;_seleniumWebdriver2&&(await helper[_0x5d1dc3(0x1d1)](this[_0x5d1dc3(0x1fe)][_0x5d1dc3(0x1d7)]),this['global'][_0x5d1dc3(0x1b0)][_0x5d1dc3(0x1eb)]=originalBuilder),await RequestQueueHandler['getInstance']()[_0x5d1dc3(0x203)]();}async[a16_0x425183(0x1f2)](){}async[a16_0x425183(0x1f8)](_0x50839e,_0x28ddde){const _0x5ab718=a16_0x425183,_0x49c76f={};_0x49c76f['XyaSg']=function(_0x1c5d86,_0x57e317){return _0x1c5d86===_0x57e317;},_0x49c76f[_0x5ab718(0x1b6)]=_0x5ab718(0x1b7),_0x49c76f[_0x5ab718(0x1c1)]=function(_0x35df6e,_0x53bb08){return _0x35df6e===_0x53bb08;},_0x49c76f['hdhrN']=_0x5ab718(0x1a8),_0x49c76f[_0x5ab718(0x1e3)]=_0x5ab718(0x1b8),_0x49c76f[_0x5ab718(0x1c7)]='\x20>\x20',_0x49c76f[_0x5ab718(0x199)]=function(_0x102bdc,_0x10106){return _0x102bdc===_0x10106;},_0x49c76f[_0x5ab718(0x1aa)]='Error\x20in\x20fail-fast\x20test_done\x20handler:',_0x49c76f[_0x5ab718(0x1dc)]=_0x5ab718(0x1c9);const _0x2576c5=_0x49c76f,{name:_0x357ebf}=_0x50839e;if(_0x2576c5['XyaSg'](_0x357ebf,_0x2576c5[_0x5ab718(0x1b6)])){this[_0x5ab718(0x1fe)]['testContext']=_0x50839e[_0x5ab718(0x1bd)];if(_0x2576c5[_0x5ab718(0x1c1)](this[_0x5ab718(0x1fe)][_0x5ab718(0x1f5)],!![])){const _0x5a5618=_0x50839e['test'][_0x5ab718(0x19b)];logger[_0x5ab718(0x1f4)]('Fail-fast\x20is\x20active,\x20skipping\x20test::\x20'+_0x5a5618),_0x50839e[_0x5ab718(0x1bd)][_0x5ab718(0x1a4)]=_0x2576c5['hdhrN'];}}if(this['failFast']&&_0x2576c5[_0x5ab718(0x1f6)](_0x357ebf,_0x2576c5[_0x5ab718(0x1e3)]))try{const _0xcfd932=_0x50839e['test'][_0x5ab718(0x1e0)][_0x5ab718(0x1ce)](_0x2576c5['EoIrZ']),_0x43acb0=_0x50839e[_0x5ab718(0x1bd)][_0x5ab718(0x1a9)];await this[_0x5ab718(0x196)][_0x5ab718(0x1d9)](_0xcfd932,_0x43acb0);const _0x545512=await this[_0x5ab718(0x196)][_0x5ab718(0x1f3)]();_0x2576c5[_0x5ab718(0x199)](this['global'][_0x5ab718(0x1f5)],![])&&_0x2576c5[_0x5ab718(0x1f6)](_0x545512,!![])&&(this[_0x5ab718(0x1fe)][_0x5ab718(0x1f5)]=!![]);}catch(_0x38261a){logger[_0x5ab718(0x1ea)](_0x2576c5[_0x5ab718(0x1aa)],_0x38261a[_0x5ab718(0x202)]);}_0x2576c5[_0x5ab718(0x1c1)](_0x357ebf,_0x2576c5[_0x5ab718(0x1dc)])&&(this[_0x5ab718(0x196)]&&this[_0x5ab718(0x196)][_0x5ab718(0x1b9)]());}}function a16_0x1ded(_0x932679,_0x5e4a72){const _0x20fbaf=a16_0x20fb();return a16_0x1ded=function(_0x1ded0c,_0x374994){_0x1ded0c=_0x1ded0c-0x18e;let _0xb45b5f=_0x20fbaf[_0x1ded0c];return _0xb45b5f;},a16_0x1ded(_0x932679,_0x5e4a72);}module['exports']=CustomEnvironment;