#!/usr/bin/env node
'use strict';const a5_0x33b8bc=a5_0x1e82;(function(_0x545c10,_0x6749eb){const _0x9a3165=a5_0x1e82,_0x11c3d2=_0x545c10();while(!![]){try{const _0xfd7c4c=-parseInt(_0x9a3165(0x246))/0x1+parseInt(_0x9a3165(0x1ce))/0x2*(-parseInt(_0x9a3165(0x1f0))/0x3)+-parseInt(_0x9a3165(0x1db))/0x4+parseInt(_0x9a3165(0x1cd))/0x5*(-parseInt(_0x9a3165(0x236))/0x6)+-parseInt(_0x9a3165(0x221))/0x7+parseInt(_0x9a3165(0x21c))/0x8+parseInt(_0x9a3165(0x22e))/0x9;if(_0xfd7c4c===_0x6749eb)break;else _0x11c3d2['push'](_0x11c3d2['shift']());}catch(_0x4243d5){_0x11c3d2['push'](_0x11c3d2['shift']());}}}(a5_0x585d,0x90a8c));const fs=require('fs'),path=require(a5_0x33b8bc(0x242)),util=require('util'),logger=require('../../helpers/logger')[a5_0x33b8bc(0x212)],{default:BrowserStackSetup}=require(a5_0x33b8bc(0x235)),helper=require(a5_0x33b8bc(0x1de)),utilities=require(a5_0x33b8bc(0x241)),constants=require(a5_0x33b8bc(0x23a)),{parallelCucumberRun}=require(a5_0x33b8bc(0x1ee)),TestHubHandler=require('../../helpers/testhub/testhubHandler'),testOpsHelper=require(a5_0x33b8bc(0x1dc)),chalk=require(a5_0x33b8bc(0x214)),PerformanceTester=require(a5_0x33b8bc(0x1d0)),PerformanceEvents=require(a5_0x33b8bc(0x219))['EVENTS'];function a5_0x1e82(_0x213a0d,_0x1f801a){const _0x585de6=a5_0x585d();return a5_0x1e82=function(_0x1e82fe,_0x3af722){_0x1e82fe=_0x1e82fe-0x1ca;let _0x2f3568=_0x585de6[_0x1e82fe];return _0x2f3568;},a5_0x1e82(_0x213a0d,_0x1f801a);}function printCucumberStats(_0x13c5de){const _0x2286a4=a5_0x33b8bc,_0x2e5eb5={};_0x2e5eb5['EgfVI']=function(_0x23b4cc,_0x44495e){return _0x23b4cc>_0x44495e;},_0x2e5eb5[_0x2286a4(0x22d)]=function(_0x4c53cb,_0x4d43fc){return _0x4c53cb-_0x4d43fc;},_0x2e5eb5[_0x2286a4(0x217)]=function(_0x51d9f5,_0x110833){return _0x51d9f5-_0x110833;},_0x2e5eb5[_0x2286a4(0x20c)]=function(_0x5173d7,_0x464a32){return _0x5173d7>_0x464a32;},_0x2e5eb5['kXBeu']=function(_0x27e89a,_0x596956){return _0x27e89a>_0x596956;},_0x2e5eb5[_0x2286a4(0x218)]=function(_0xc2eab1,_0x48b20e){return _0xc2eab1>_0x48b20e;},_0x2e5eb5['hrGSn']=function(_0x3f6c6c,_0x13f59d){return _0x3f6c6c>_0x13f59d;},_0x2e5eb5[_0x2286a4(0x22b)]=function(_0x363416,_0x3cf38d){return _0x363416>_0x3cf38d;},_0x2e5eb5[_0x2286a4(0x1e5)]=function(_0x4e2def,_0x1398c5){return _0x4e2def>_0x1398c5;},_0x2e5eb5['qiuDY']=function(_0x7cb0f7,_0x2212d3){return _0x7cb0f7>_0x2212d3;},_0x2e5eb5[_0x2286a4(0x201)]=function(_0x2037d6,_0x7ee8d8){return _0x2037d6>_0x7ee8d8;},_0x2e5eb5['Dtyzs']=function(_0x178652,_0xf02ec7){return _0x178652>_0xf02ec7;},_0x2e5eb5[_0x2286a4(0x1e2)]=function(_0x46b728,_0x5456d6){return _0x46b728>_0x5456d6;},_0x2e5eb5[_0x2286a4(0x222)]=function(_0x2753cb,_0x410431){return _0x2753cb+_0x410431;},_0x2e5eb5[_0x2286a4(0x200)]=function(_0x5283ff,_0x41c21b){return _0x5283ff+_0x41c21b;},_0x2e5eb5[_0x2286a4(0x23c)]=function(_0x2e60a0,_0x3f3938){return _0x2e60a0+_0x3f3938;},_0x2e5eb5[_0x2286a4(0x204)]=function(_0x31be91,_0x48a6f7){return _0x31be91===_0x48a6f7;},_0x2e5eb5[_0x2286a4(0x247)]=_0x2286a4(0x248);const _0x4c874e=_0x2e5eb5;let _0x3b0c70=0x0;if(_0x4c874e['lsweh'](_0x13c5de['length'],0x0))return _0x3b0c70;return console[_0x2286a4(0x1f2)](chalk['bold'][_0x2286a4(0x237)](_0x4c874e['LkIys'])),_0x13c5de[_0x2286a4(0x243)](_0x485bc1=>{const _0x122aa9=_0x2286a4,_0x23b360=_0x485bc1[0x0],_0xaffdf8=_0x485bc1[0x1];helper[_0x122aa9(0x1df)]()&&console[_0x122aa9(0x1f2)]('\x0a'+chalk['bold'][_0x122aa9(0x225)](''+helper[_0x122aa9(0x20a)](_0x23b360)));const _0x544c9b=_0xaffdf8[_0x122aa9(0x21d)],_0x567ebd=_0xaffdf8[_0x122aa9(0x207)],_0x4ea6d6=_0xaffdf8[_0x122aa9(0x23b)],_0x343800=_0xaffdf8[_0x122aa9(0x1ec)],_0x166175=_0xaffdf8[_0x122aa9(0x1f3)],_0x3b79b2=_0xaffdf8[_0x122aa9(0x1e8)],_0x56554d=_0xaffdf8[_0x122aa9(0x20e)],_0x2adf72=_0xaffdf8[_0x122aa9(0x244)],_0x565884=_0xaffdf8['stepsUnknown'],_0x328722=_0xaffdf8[_0x122aa9(0x21b)],_0x308c60=_0xaffdf8[_0x122aa9(0x1d2)];let _0x1bceda=_0x544c9b+_0x122aa9(0x21a);const _0xf23da2=_0x4c874e[_0x122aa9(0x215)](_0x4c874e[_0x122aa9(0x22d)](_0x544c9b,_0x4ea6d6),0x0)?_0x4c874e[_0x122aa9(0x217)](_0x544c9b,_0x4ea6d6):0x0;if(_0x4c874e[_0x122aa9(0x20c)](_0x4ea6d6,0x0)&&_0x4c874e[_0x122aa9(0x230)](_0xf23da2,0x0))_0x1bceda+='\x20('+chalk[_0x122aa9(0x1eb)][_0x122aa9(0x1ff)](_0x4ea6d6+_0x122aa9(0x220))+',\x20'+chalk[_0x122aa9(0x1eb)][_0x122aa9(0x1e7)](_0xf23da2+_0x122aa9(0x233))+')';else(_0x4c874e[_0x122aa9(0x218)](_0x4ea6d6,0x0)||_0x4c874e[_0x122aa9(0x208)](_0xf23da2,0x0))&&(_0x1bceda+=_0x4c874e[_0x122aa9(0x22b)](_0x4ea6d6,0x0)?'\x20('+chalk['bold'][_0x122aa9(0x1ff)](_0x4ea6d6+'\x20failed')+')':'\x20('+chalk[_0x122aa9(0x1eb)][_0x122aa9(0x1e7)](_0xf23da2+_0x122aa9(0x233))+')');const _0x3c6d98=_0x567ebd+_0x122aa9(0x211),_0x1b3402=[];_0x4c874e[_0x122aa9(0x1e5)](_0x328722,0x0)&&_0x1b3402[_0x122aa9(0x1d9)](''+chalk['bold'][_0x122aa9(0x1ff)](_0x328722+'\x20ambiguous'));_0x4c874e['qiuDY'](_0x343800,0x0)&&_0x1b3402[_0x122aa9(0x1d9)](''+chalk['bold'][_0x122aa9(0x1ff)](_0x343800+'\x20failed'));_0x4c874e[_0x122aa9(0x201)](_0x166175,0x0)&&_0x1b3402['push'](''+chalk[_0x122aa9(0x1eb)][_0x122aa9(0x1e7)](_0x166175+'\x20passed'));_0x4c874e['EgfVI'](_0x56554d,0x0)&&_0x1b3402['push'](''+chalk[_0x122aa9(0x1eb)][_0x122aa9(0x225)](_0x56554d+'\x20pending'));_0x4c874e[_0x122aa9(0x232)](_0x3b79b2,0x0)&&_0x1b3402['push'](''+chalk[_0x122aa9(0x1eb)]['cyan'](_0x3b79b2+_0x122aa9(0x1d7)));_0x4c874e[_0x122aa9(0x1e2)](_0x2adf72,0x0)&&_0x1b3402[_0x122aa9(0x1d9)](''+chalk['bold']['yellow'](_0x2adf72+_0x122aa9(0x205)));_0x4c874e[_0x122aa9(0x215)](_0x565884,0x0)&&_0x1b3402[_0x122aa9(0x1d9)](''+chalk[_0x122aa9(0x1eb)][_0x122aa9(0x225)](_0x565884+'\x20skipped'));const _0xebe00a=_0x4c874e['bVHzx'](_0x4c874e['FIpoK'](_0x4c874e['bVHzx'](_0x3c6d98,'('),_0x1b3402[_0x122aa9(0x23d)](',\x20')),')');console[_0x122aa9(0x1f2)](_0x4c874e[_0x122aa9(0x23c)](_0x4c874e[_0x122aa9(0x200)](_0x4c874e[_0x122aa9(0x222)](_0x4c874e[_0x122aa9(0x200)]('\x0a',_0x1bceda),'\x0a'),_0xebe00a),'\x0a')),_0x4c874e[_0x122aa9(0x204)](_0x308c60,![])&&(_0x3b0c70=0x1);}),_0x3b0c70;}function a5_0x585d(){const _0x8c1ede=['CUCUMBER','lsweh','\x20undefined','getUserWorkerCount','steps','hrGSn','handleApp','getPlatformName','testObservability','olJWl','useW3C','stepsPending','cwd','getHubUrl','\x20steps','winstonLogger','finalExecution','chalk','EgfVI','errorMessage','JSLfI','HgLvS','../../helpers/performance/constants','\x20scenarios','stepsAmbiguous','2204240LUcWpz','scenarios','accessibilityOptions','KEIYQ','\x20failed','708701deqPnZ','bVHzx','turboScaleUrl','end','yellow','platforms','setupTCGAuth','stringify','splice','ePQqE','mYOum','debug','QSTFd','21436110nUmmOH','Generating\x20consolidated\x20report...','kXBeu','cucumber','Dtyzs','\x20passed','mergeOutputFiles','../../helpers/BrowserStackSetup','30ilmNpo','bgWhite','unlinkSync','fbVZE','../utils/constants','scenariosFailed','sujPj','join','FRAMEWORKS','BROWSERSTACK_TEST_OBSERVABILITY_YML','isUndefined','../../helpers/utilities','path','forEach','stepsUndefined','Removing\x20tmp\x20directory\x20created\x20for\x20reports','835564ClmhgD','LkIys','****\x20RESULTS\x20****','exports','SDK_SETUP','getErrorMessageFromResults','261605DmCHFi','26WGBeLW','OqZJx','../../helpers/performance/performance-tester','parallelsPerPlatform','processSuccess','true','BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML','printBuildLink','logLevel','\x20skipped','bgyHH','push','then','1351632LhYsDa','../../helpers/test-observability/utils','setUserConfigPath','../../helpers/helper','isBrowserstackInfra','exitCode','removeDir','eMXXA','oIMlL','SDK_CLEANUP','RQETS','assign','green','stepsSkipped','skipSessionStatus','env','bold','stepsFailed','slMgz','../test-runner','hpJcF','121956oBHrRV','length','log','stepsPassed','format','config','bUTfM','createDir','PGiZp','tmp','proxySettings','EZZqe','prepareCapabilities','parseFormatters','testContextOptions','red','FIpoK','ogpQp','start'];a5_0x585d=function(){return _0x8c1ede;};return a5_0x585d();}async function run(_0x10931b,_0x507f61,_0x786340){const _0x13eca0=a5_0x33b8bc,_0xdb399a={'XdpXf':function(_0x224d66,_0x428edf){return _0x224d66(_0x428edf);},'bUTfM':function(_0x31d81f,_0x527890){return _0x31d81f>_0x527890;},'EZZqe':_0x13eca0(0x22f),'OqZJx':_0x13eca0(0x245),'slMgz':_0x13eca0(0x231),'ePQqE':'error\x20removing\x20tcg\x20config\x20file','KEIYQ':_0x13eca0(0x1f9),'hpJcF':function(_0x24a900,_0x3f47c9){return _0x24a900>_0x3f47c9;},'gNxXA':function(_0x5a05b6,_0x4e7ba0){return _0x5a05b6-_0x4e7ba0;},'PGiZp':function(_0x35de71,_0x3f1496){return _0x35de71>=_0x3f1496;},'fbVZE':function(_0x1ff347,_0x1975d8){return _0x1ff347!=_0x1975d8;},'oIMlL':_0x13eca0(0x1d3),'bgyHH':function(_0x3e7472,_0x1a163c,_0x4f5404,_0x3cef79,_0x16e897,_0x4ee3f1){return _0x3e7472(_0x1a163c,_0x4f5404,_0x3cef79,_0x16e897,_0x4ee3f1);}};await _0x786340['initialize'](_0x10931b),helper[_0x13eca0(0x1dd)](_0x786340['framework'],_0x10931b);!helper[_0x13eca0(0x1df)]()&&await _0x786340[_0x13eca0(0x227)]();await helper[_0x13eca0(0x209)](_0x786340['config']);const _0x1b6579=helper[_0x13eca0(0x20d)](_0x786340[_0x13eca0(0x1f5)]);!helper[_0x13eca0(0x240)](_0x786340[_0x13eca0(0x1f5)][_0x13eca0(0x21e)])&&(process['env'][_0x13eca0(0x1d4)]=JSON[_0x13eca0(0x228)](_0x786340[_0x13eca0(0x1f5)]['accessibilityOptions']));const _0x1c3098=await TestHubHandler['launchBuild'](constants['FRAMEWORKS'][_0x13eca0(0x203)],_0x786340);let _0x314ee2=[];if(!helper[_0x13eca0(0x1df)]()){const _0x3d6ce3={};_0x3d6ce3[_0x13eca0(0x226)]=[],_0x314ee2=helper[_0x13eca0(0x1fc)](Object[_0x13eca0(0x1e6)]({},_0x786340['config'],_0x3d6ce3),_0x1b6579,constants[_0x13eca0(0x23e)][_0x13eca0(0x203)]);}else _0x314ee2=helper['prepareCapabilities'](_0x786340[_0x13eca0(0x1f5)],_0x1b6579,constants['FRAMEWORKS'][_0x13eca0(0x203)]);if(!_0x786340[_0x13eca0(0x1f5)])return;const _0x3a5d0d=_0x786340[_0x13eca0(0x1f5)][_0x13eca0(0x1d1)]||helper[_0x13eca0(0x206)](_0x10931b,_0x507f61,_0x786340[_0x13eca0(0x1f5)],constants[_0x13eca0(0x23e)][_0x13eca0(0x203)])||0x1,_0x3d9284={'server':helper[_0x13eca0(0x210)](_0x786340[_0x13eca0(0x1f5)]),'proxySettings':_0x786340[_0x13eca0(0x1f5)][_0x13eca0(0x1fa)],'maxWorkers':_0x3a5d0d,'browserStackLogLevel':_0x786340['config'][_0x13eca0(0x1d6)],'skipSessionName':_0x786340['config'][_0x13eca0(0x1fe)]['skipSessionName'],'skipSessionStatus':_0x786340[_0x13eca0(0x1f5)][_0x13eca0(0x1fe)][_0x13eca0(0x1e9)],'turboScaleUrl':_0x786340[_0x13eca0(0x1f5)][_0x13eca0(0x223)]},_0x5df485=process['argv'],[_0x203ecf,_0x1a5349]=helper[_0x13eca0(0x1fd)](_0x5df485),_0x1a1a92=path[_0x13eca0(0x23d)](process[_0x13eca0(0x20f)](),_0xdb399a[_0x13eca0(0x21f)]);if(_0xdb399a[_0x13eca0(0x1ef)](_0x1a5349[_0x13eca0(0x1f1)],0x0)){helper[_0x13eca0(0x1f7)](_0x1a1a92);for(let _0xf6b2ea=_0xdb399a['gNxXA'](_0x203ecf['length'],0x1);_0xdb399a[_0x13eca0(0x1f8)](_0xf6b2ea,0x0);_0xf6b2ea--){_0x5df485[_0x13eca0(0x229)](_0x203ecf[_0xf6b2ea],0x2);}}_0xdb399a[_0x13eca0(0x239)](_0x786340[_0x13eca0(0x1f5)][_0x13eca0(0x20b)],null)?process['env'][_0x13eca0(0x23f)]=_0x786340[_0x13eca0(0x1f5)][_0x13eca0(0x20b)]:process[_0x13eca0(0x1ea)][_0x13eca0(0x23f)]=_0xdb399a[_0x13eca0(0x1e3)];PerformanceTester[_0x13eca0(0x224)](PerformanceEvents[_0x13eca0(0x1cb)]);let _0x5d598d;_0xdb399a[_0x13eca0(0x1d8)](parallelCucumberRun,_0x314ee2,_0x3d9284,_0x786340['config'],_0x5df485,_0x1a5349)[_0x13eca0(0x1da)](async _0x270cca=>{const _0x4fa1ca=_0x13eca0;PerformanceTester[_0x4fa1ca(0x202)](PerformanceEvents['SDK_CLEANUP']),_0x5d598d=_0x270cca;const _0x496191=_0xdb399a['XdpXf'](printCucumberStats,_0x270cca);process[_0x4fa1ca(0x1e0)]=_0x496191,_0xdb399a[_0x4fa1ca(0x1f6)](_0x1a5349[_0x4fa1ca(0x1f1)],0x0)&&(logger[_0x4fa1ca(0x22c)](_0xdb399a[_0x4fa1ca(0x1fb)]),helper[_0x4fa1ca(0x234)](_0x1a1a92,_0x1a5349),logger[_0x4fa1ca(0x22c)](_0xdb399a[_0x4fa1ca(0x1cf)]),helper[_0x4fa1ca(0x1e1)](_0x1a1a92));})['finally'](async()=>{const _0x5a4b24=_0x13eca0;PerformanceTester[_0x5a4b24(0x202)](PerformanceEvents[_0x5a4b24(0x1e4)]),_0x786340[_0x5a4b24(0x216)]=helper[_0x5a4b24(0x1cc)](_0x5d598d,_0xdb399a[_0x5a4b24(0x1ed)]),testOpsHelper[_0x5a4b24(0x1d5)]();try{await TestHubHandler['stop']();}catch(_0xbf1727){logger[_0x5a4b24(0x22c)]('Exception\x20in\x20stop\x20build\x20request\x20to\x20testhub\x20:\x20'+util[_0x5a4b24(0x1f4)](_0xbf1727));}try{const {browserstackFolderPath:_0x2c8338,tcgConfigPath:_0x8ebb38}=helper['getTCGConfigFilePaths']();fs[_0x5a4b24(0x238)](_0x8ebb38),fs['rmdirSync'](_0x2c8338);}catch(_0x50ee3f){logger['debug'](_0xdb399a[_0x5a4b24(0x22a)],_0x50ee3f);}await utilities[_0x5a4b24(0x213)](_0x786340);});}module[a5_0x33b8bc(0x1ca)]=run;