const a113_0x11a80d=a113_0x3f47;(function(_0x4e40e4,_0x948177){const _0x5b1a11=a113_0x3f47,_0x3fcacd=_0x4e40e4();while(!![]){try{const _0x59149d=-parseInt(_0x5b1a11(0x165))/0x1+parseInt(_0x5b1a11(0x187))/0x2+-parseInt(_0x5b1a11(0x182))/0x3+parseInt(_0x5b1a11(0x159))/0x4+parseInt(_0x5b1a11(0x17b))/0x5*(parseInt(_0x5b1a11(0x169))/0x6)+parseInt(_0x5b1a11(0x191))/0x7+parseInt(_0x5b1a11(0x16f))/0x8*(-parseInt(_0x5b1a11(0x188))/0x9);if(_0x59149d===_0x948177)break;else _0x3fcacd['push'](_0x3fcacd['shift']());}catch(_0xb4f14e){_0x3fcacd['push'](_0x3fcacd['shift']());}}}(a113_0x1b6b,0x25491));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require('./constants'),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a113_0x11a80d(0x189)),{nestedKeyValue}=require(a113_0x11a80d(0x16a)),util=require(a113_0x11a80d(0x15b));class RequestQueueHandler{static [a113_0x11a80d(0x17a)];[a113_0x11a80d(0x13f)]=0x0;constructor(){const _0x40b92f=a113_0x11a80d,_0x2c9005={};_0x2c9005[_0x40b92f(0x186)]='5|3|1|2|0|6|4',_0x2c9005['ZioDv']=_0x40b92f(0x177),_0x2c9005[_0x40b92f(0x144)]='api/v1/batch',_0x2c9005[_0x40b92f(0x194)]=_0x40b92f(0x179),_0x2c9005['WLXMt']=_0x40b92f(0x167),_0x2c9005['hHjLN']=_0x40b92f(0x17c),_0x2c9005['dzbBf']=_0x40b92f(0x190),_0x2c9005[_0x40b92f(0x16b)]=_0x40b92f(0x153),_0x2c9005[_0x40b92f(0x13b)]='HookRunFinished',_0x2c9005[_0x40b92f(0x173)]='TestRunStarted',_0x2c9005[_0x40b92f(0x199)]='HookRunStarted';const _0x3f82f0=_0x2c9005,_0x570e43=_0x3f82f0['UCfpq'][_0x40b92f(0x178)]('|');let _0x40e979=0x0;while(!![]){switch(_0x570e43[_0x40e979++]){case'0':this[_0x40b92f(0x162)]=_0x3f82f0[_0x40b92f(0x14e)];continue;case'1':this[_0x40b92f(0x170)]=_0x3f82f0[_0x40b92f(0x144)];continue;case'2':this['screenshotEventUrl']=_0x3f82f0[_0x40b92f(0x194)];continue;case'3':this[_0x40b92f(0x15f)]=![];continue;case'4':this[_0x40b92f(0x13d)]=null;continue;case'5':this['queue']=[];continue;case'6':this['BATCH_EVENT_TYPES']=[_0x3f82f0['WLXMt'],_0x3f82f0[_0x40b92f(0x176)],_0x3f82f0[_0x40b92f(0x197)],_0x3f82f0[_0x40b92f(0x16b)],_0x3f82f0['AdEeI'],_0x3f82f0[_0x40b92f(0x173)],_0x3f82f0[_0x40b92f(0x199)]];continue;}break;}}static[a113_0x11a80d(0x141)](){const _0x2b098a=a113_0x11a80d;return!RequestQueueHandler['instance']&&(RequestQueueHandler[_0x2b098a(0x17a)]=new RequestQueueHandler()),RequestQueueHandler[_0x2b098a(0x17a)];}['start']=()=>{const _0x5d10bc=a113_0x11a80d;!this[_0x5d10bc(0x15f)]&&(this[_0x5d10bc(0x15f)]=!![],this[_0x5d10bc(0x18f)]());};[a113_0x11a80d(0x193)]=_0x21fe1f=>{const _0x438c5e=a113_0x11a80d,_0x1ca54b={'iaZdt':function(_0x402e44,_0x2d9980){return _0x402e44===_0x2d9980;},'nQXlN':_0x438c5e(0x156),'fsIeI':function(_0x49ebea,_0xe47193){return _0x49ebea>_0xe47193;},'hzbMM':'TEST_ATTACHMENT','gtlib':function(_0x3876ff,_0x2f4744){return _0x3876ff!==_0x2f4744;},'gOgtu':_0x438c5e(0x190),'VSega':function(_0x26d5be,_0x8fc921){return _0x26d5be(_0x8fc921);},'NfNtr':_0x438c5e(0x181)};if(this['BATCH_EVENT_TYPES'][_0x438c5e(0x14d)](_0x21fe1f[_0x438c5e(0x172)])){if(_0x21fe1f[_0x438c5e(0x17f)]&&_0x21fe1f[_0x438c5e(0x17f)][0x0]&&_0x1ca54b[_0x438c5e(0x195)](_0x21fe1f['logs'][0x0][_0x438c5e(0x158)],_0x1ca54b['nQXlN'])){const _0x5de4a0={};return _0x5de4a0[_0x438c5e(0x18a)]=!![],_0x5de4a0[_0x438c5e(0x185)]=[_0x21fe1f],_0x5de4a0[_0x438c5e(0x157)]=this['screenshotEventUrl'],_0x5de4a0;}if(_0x21fe1f[_0x438c5e(0x17f)]&&_0x1ca54b[_0x438c5e(0x14c)](_0x21fe1f['logs'][_0x438c5e(0x183)],0x0)&&_0x1ca54b[_0x438c5e(0x195)](_0x21fe1f[_0x438c5e(0x17f)][0x0][_0x438c5e(0x158)],_0x1ca54b[_0x438c5e(0x13c)])&&_0x1ca54b['gtlib'](_0x21fe1f['event_type'],_0x1ca54b[_0x438c5e(0x13e)])){const _0x33243f={};return _0x33243f['shouldProceed']=!![],_0x33243f[_0x438c5e(0x185)]=[_0x21fe1f],_0x33243f['proceedWithUrl']=this[_0x438c5e(0x162)],_0x33243f;}this[_0x438c5e(0x18d)][_0x438c5e(0x163)](_0x21fe1f);let _0x2499f3=null;const _0x219fb4=this['shouldProceed']();_0x219fb4&&(_0x1ca54b[_0x438c5e(0x148)](trace,_0x1ca54b['NfNtr']),_0x2499f3=this[_0x438c5e(0x18d)][_0x438c5e(0x168)](0x0,BATCH_SIZE),this[_0x438c5e(0x18d)][_0x438c5e(0x16d)](0x0,BATCH_SIZE),this[_0x438c5e(0x166)]());const _0x138a1a={};return _0x138a1a[_0x438c5e(0x18a)]=_0x219fb4,_0x138a1a['proceedWithData']=_0x2499f3,_0x138a1a['proceedWithUrl']=this[_0x438c5e(0x170)],_0x138a1a;}const _0xb3c598={};return _0xb3c598[_0x438c5e(0x18a)]=!![],_0xb3c598;};[a113_0x11a80d(0x152)]=async()=>{const _0x53dbcb=a113_0x11a80d,_0x34eeaf={'QXCgJ':_0x53dbcb(0x19c),'gDOTQ':function(_0x1871e2,_0x1f7184){return _0x1871e2>_0x1f7184;},'TNKJF':'Shutdown-Queue','sdgek':function(_0x191247,_0x1ad836){return _0x191247(_0x1ad836);}};await this[_0x53dbcb(0x154)](),this[_0x53dbcb(0x180)](_0x34eeaf['QXCgJ']);while(_0x34eeaf[_0x53dbcb(0x19a)](this[_0x53dbcb(0x18d)]['length'],0x0)){const _0x19a6dc=this[_0x53dbcb(0x18d)]['slice'](0x0,BATCH_SIZE);this[_0x53dbcb(0x18d)][_0x53dbcb(0x16d)](0x0,BATCH_SIZE),await this['batchAndPostEvents'](this[_0x53dbcb(0x170)],_0x34eeaf[_0x53dbcb(0x175)],_0x19a6dc);}_0x34eeaf[_0x53dbcb(0x19a)](this[_0x53dbcb(0x13f)],0x0)&&_0x34eeaf[_0x53dbcb(0x143)](debug,'Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20'+this[_0x53dbcb(0x13f)]);};[a113_0x11a80d(0x161)]=async(_0x409cc3,_0x3bfe3d,_0x294f21)=>{const _0x9ec2b3=a113_0x11a80d,_0x48605e={'Tpldb':function(_0x53d0f3,_0xf060ac){return _0x53d0f3(_0xf060ac);},'zXLLt':'utf8','QXsPv':function(_0x16b171,_0x5c35fe){return _0x16b171(_0x5c35fe);},'GnjhU':function(_0x3aaeee){return _0x3aaeee();},'cRXKo':function(_0x4020eb,_0x4d57e3,_0x49f4c6,_0x3bb9f4,_0x444e7a){return _0x4020eb(_0x4d57e3,_0x49f4c6,_0x3bb9f4,_0x444e7a);},'yljdM':'POST','AgYDL':function(_0x5891f7,_0x566e3f){return _0x5891f7-_0x566e3f;},'AhWAo':function(_0x3c20f1,_0x309ec0){return _0x3c20f1(_0x309ec0);}};let _0x39c67c='';try{_0x39c67c=_0x294f21[_0x9ec2b3(0x18c)](_0x43909d=>'\x27'+_0x43909d[_0x9ec2b3(0x172)]+'\x27:'+(nestedKeyValue(_0x43909d,[_0x9ec2b3(0x151),'uuid'])||nestedKeyValue(_0x43909d,['hook_run','uuid'])))[_0x9ec2b3(0x15a)](','),_0x48605e[_0x9ec2b3(0x198)](debug,_0x9ec2b3(0x171)+_0x3bfe3d+'.\x20Request\x20Size\x20-\x20'+Buffer[_0x9ec2b3(0x140)](util[_0x9ec2b3(0x18b)]('%j',_0x294f21),_0x48605e['zXLLt'])+'\x20bytes.\x20Events\x20are\x20'+_0x39c67c);}catch(_0x35f564){_0x48605e[_0x9ec2b3(0x16e)](debug,_0x9ec2b3(0x17d)+util['format'](_0x35f564)+'}');}const _0x105708={'headers':_0x48605e['GnjhU'](getDefaultHeaders)};try{const _0x25001f=await _0x48605e[_0x9ec2b3(0x15d)](nodeRequest,_0x48605e[_0x9ec2b3(0x15c)],_0x409cc3,_0x294f21,_0x105708);if(_0x25001f[_0x9ec2b3(0x196)][_0x9ec2b3(0x150)]){const _0x426c1b={};_0x426c1b[_0x9ec2b3(0x164)]=_0x25001f['data'][_0x9ec2b3(0x150)];throw _0x426c1b;}else _0x48605e[_0x9ec2b3(0x198)](debug,_0x3bfe3d+_0x9ec2b3(0x174)+_0x39c67c+_0x9ec2b3(0x146)+util[_0x9ec2b3(0x18b)]('%j',_0x25001f[_0x9ec2b3(0x196)])),this['pendingUploads']=Math[_0x9ec2b3(0x17e)](0x0,_0x48605e[_0x9ec2b3(0x18e)](this[_0x9ec2b3(0x13f)],_0x294f21[_0x9ec2b3(0x183)]));}catch(_0x276bca){_0x276bca[_0x9ec2b3(0x19d)]?_0x48605e['AhWAo'](debug,_0x9ec2b3(0x142)+_0x3bfe3d+_0x9ec2b3(0x155)+_0x276bca[_0x9ec2b3(0x19d)][_0x9ec2b3(0x160)]+'\x20'+_0x276bca['response'][_0x9ec2b3(0x145)]+'\x20'+util['format']('%j',_0x276bca[_0x9ec2b3(0x19d)])):_0x48605e[_0x9ec2b3(0x16e)](debug,_0x9ec2b3(0x142)+_0x3bfe3d+_0x9ec2b3(0x155)+(_0x276bca[_0x9ec2b3(0x164)]||_0x276bca)),this['pendingUploads']=Math[_0x9ec2b3(0x17e)](0x0,_0x48605e['AgYDL'](this[_0x9ec2b3(0x13f)],_0x294f21[_0x9ec2b3(0x183)]));}};[a113_0x11a80d(0x18f)]=()=>{const _0x581851=a113_0x11a80d,_0x2bae1a={'Ztayq':function(_0xf3db3f,_0x5d856e){return _0xf3db3f>_0x5d856e;},'RVhsz':function(_0xed3d8b,_0x541403){return _0xed3d8b(_0x541403);},'wqdQk':'Interval-Queue','ohiFD':function(_0xbadf30,_0x25691c){return _0xbadf30(_0x25691c);},'WhwKR':function(_0x5ce8ba,_0x19963d,_0x568b84){return _0x5ce8ba(_0x19963d,_0x568b84);}};this[_0x581851(0x13d)]=_0x2bae1a['WhwKR'](setInterval,async()=>{const _0x2dfd3c=_0x581851;if(_0x2bae1a[_0x2dfd3c(0x16c)](this['queue'][_0x2dfd3c(0x183)],0x0)){_0x2bae1a['RVhsz'](trace,_0x2dfd3c(0x15e)+this[_0x2dfd3c(0x18d)]['length']);const _0x574f23=this[_0x2dfd3c(0x18d)]['slice'](0x0,BATCH_SIZE);this[_0x2dfd3c(0x18d)][_0x2dfd3c(0x16d)](0x0,BATCH_SIZE),await this[_0x2dfd3c(0x161)](this['eventUrl'],_0x2bae1a['wqdQk'],_0x574f23),_0x2bae1a[_0x2dfd3c(0x14a)](trace,'Remaining\x20Queue\x20Length\x20-\x20'+this[_0x2dfd3c(0x18d)][_0x2dfd3c(0x183)]);}},BATCH_INTERVAL);};[a113_0x11a80d(0x166)]=()=>{const _0x5ce5f7=a113_0x11a80d,_0x599198={};_0x599198[_0x5ce5f7(0x184)]='RESETTING';const _0x13cc04=_0x599198;this[_0x5ce5f7(0x180)](_0x13cc04['NvOym']),this['startEventBatchPolling']();};[a113_0x11a80d(0x180)]=_0x3fd3af=>{const _0x182bc3=a113_0x11a80d,_0x4f6fd6={'cQuzn':function(_0x5916e0,_0x529a61){return _0x5916e0(_0x529a61);},'VzMdf':function(_0x258001,_0x2c48dd){return _0x258001===_0x2c48dd;},'GfbKa':_0x182bc3(0x19c)};this[_0x182bc3(0x13d)]&&(_0x4f6fd6[_0x182bc3(0x19b)](clearInterval,this[_0x182bc3(0x13d)]),this['pollEventBatchInterval']=null,_0x4f6fd6['VzMdf'](_0x3fd3af,_0x4f6fd6['GfbKa'])&&(this[_0x182bc3(0x15f)]=![]));};[a113_0x11a80d(0x18a)]=()=>{const _0x2710eb=a113_0x11a80d,_0x2d6998={};_0x2d6998[_0x2710eb(0x14b)]=function(_0x130b18,_0xb26e5b){return _0x130b18>=_0xb26e5b;};const _0x3d4c50=_0x2d6998;return _0x3d4c50[_0x2710eb(0x14b)](this[_0x2710eb(0x18d)][_0x2710eb(0x183)],BATCH_SIZE);};async[a113_0x11a80d(0x154)](_0x341d38=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x1f0de2=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x192527=a113_0x11a80d,_0x4e45bd={'ZYWcw':function(_0x34a547,_0x2e7bc9){return _0x34a547<=_0x2e7bc9;},'mhSyv':function(_0x5067b7,_0x41fc86){return _0x5067b7(_0x41fc86);},'bxCnz':function(_0x3a5239,_0x2393de){return _0x3a5239-_0x2393de;}};if(_0x4e45bd['ZYWcw'](this[_0x192527(0x13f)],0x0)||_0x4e45bd[_0x192527(0x149)](_0x341d38,0x0))return;return await _0x4e45bd[_0x192527(0x147)](sleep,_0x1f0de2),this[_0x192527(0x154)](_0x4e45bd[_0x192527(0x192)](_0x341d38,_0x1f0de2));}}module[a113_0x11a80d(0x14f)]=RequestQueueHandler;function a113_0x3f47(_0xd681cd,_0x262f48){const _0x1b6b34=a113_0x1b6b();return a113_0x3f47=function(_0x3f47db,_0x2c47f9){_0x3f47db=_0x3f47db-0x13b;let _0xc016c4=_0x1b6b34[_0x3f47db];return _0xc016c4;},a113_0x3f47(_0xd681cd,_0x262f48);}function a113_0x1b6b(){const _0xd7ac2d=['280106atPxSv','605358fiyuCg','./utils','shouldProceed','format','map','queue','AgYDL','startEventBatchPolling','TestRunFinished','1089508LYToKt','bxCnz','add','ElOIx','iaZdt','data','dzbBf','Tpldb','vBXnl','gDOTQ','cQuzn','REMOVING','response','AdEeI','hzbMM','pollEventBatchInterval','gOgtu','pendingUploads','byteLength','getInstance','EXCEPTION\x20IN\x20','sdgek','zVRpe','statusText','\x20--\x20','mhSyv','VSega','ZYWcw','ohiFD','syoax','fsIeI','includes','ZioDv','exports','error','test_run','shutdown','TestRunSkipped','uploadPending','\x20REQUEST\x20TO\x20TEST\x20OBSERVABILITY\x20:\x20','TEST_SCREENSHOT','proceedWithUrl','kind','63360NKbteq','join','util','yljdM','cRXKo','Processing\x20events.\x20Queue\x20Length\x20-\x20','started','status','batchAndPostEvents','uploadAttachmentUrl','push','message','173396jbgKfZ','resetEventBatchPolling','LogCreated','slice','6VLzSoO','../helper','gLihX','Ztayq','splice','QXsPv','24OQeGNI','eventUrl','Processing\x20batch\x20events\x20for\x20','event_type','pASzw','\x20event\x20successful\x20for\x20events\x20','TNKJF','hHjLN','upload-attachments','split','api/v1/screenshots','instance','1470515iGtgbO','CBTSessionCreated','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','max','logs','removeEventBatchPolling','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','233211esXWYM','length','NvOym','proceedWithData','UCfpq'];a113_0x1b6b=function(){return _0xd7ac2d;};return a113_0x1b6b();}