const a85_0x2a69bc=a85_0x2e1d;function a85_0x2b30(){const _0xb8b3d=['using','framework','../../helpers/timeoutPromise','DVxLi','locatorType','IFGoi','../logger','forEach','30176630XuSPUi','s://','Atvub','VLnPK','MRpcd','get','getProjectName','Error\x20in\x20initialising\x20healing\x20capabilities\x20,\x20error:\x20','RJEWg','log','edgeOptions_','1617979aKZBaS','chromeOptions_','setTcgToken','gCvXZ','message','winstonLogger','BIFNt','898OilhnH','LCJBs','2342382zJQWno','initializeHealingCapabilities','aiHealing','config','../../ai-sdk-node/bundle','UzSOP','fromEntries','handleFailure','join','initializeCapabilities','aiHeal_isGroupAIEnabled','QzRFI','IaYno','TCG_URL','2628437QguHhI','firefox','selector','ieOptions_','\x22:\x20{\x22endpoint\x22:\x20\x22','SWkfA','isSelfHealEnabled','POLL_HEALING_RESULT_TIMEOUT','getTestName','set','paeNI','SET_TCG_TOKEN_TIMEOUT','getGlobal','firefoxOptions_','aiHeal_groupId','mYWev','{\x22region\x22:\x20\x22','parameters_','yjKEU','keys','ztPEo','race','debug','info','toLowerCase','RcNSs','278284hyjBCQ','browserstackSessionName','\x22,\x20\x22tcgUrls\x22:\x20{\x22','rqQBE','cancel','BrowserstackHealing.pollResult\x20method\x20timed\x20out','pollResult','hIDcF','Error\x20in\x20(healing)\x20handling\x20failure\x20event.\x20ERROR:\x20','145520cPBuHc','browserName','BTloI','getId','hyLwB','map_','Unable\x20to\x20load\x20healing\x20module,\x20error:\x20','\x22}}}','name_','../../bin/utils/constants','HEALING_LOG_DATA_TIMEOUT','getCommands','vmYod','replace','ycFCq','uryHW','1518OZeAoK','BrowserstackHealing','BrowserstackHealing.logData\x20method\x20timed\x20out','8HCmEQZ','getSession','aiHeal_sessionToken','value','string','414XUBAyI','WZHnP','TJIDR','115RKOHZJ','safariOptions_','BrowserstackHealingHealFailureFailed','BrowserstackHealingSetTcgTokenFailed','locatorValue','then','./autoHealHelper','aiHeal_userId','healFailure','Healing\x20Failed,\x20Browserstack\x20AI\x20could\x20not\x20heal\x20the\x20','error','TCG_REGION','\x20command','_handleEvent','chrome'];a85_0x2b30=function(){return _0xb8b3d;};return a85_0x2b30();}(function(_0x507972,_0x2821f3){const _0x48e319=a85_0x2e1d,_0x5ef1cb=_0x507972();while(!![]){try{const _0x150e88=parseInt(_0x48e319(0x1a8))/0x1+parseInt(_0x48e319(0x138))/0x2*(-parseInt(_0x48e319(0x17b))/0x3)+-parseInt(_0x48e319(0x162))/0x4*(-parseInt(_0x48e319(0x186))/0x5)+-parseInt(_0x48e319(0x13a))/0x6+parseInt(_0x48e319(0x148))/0x7*(parseInt(_0x48e319(0x17e))/0x8)+parseInt(_0x48e319(0x183))/0x9*(parseInt(_0x48e319(0x16b))/0xa)+-parseInt(_0x48e319(0x19d))/0xb;if(_0x150e88===_0x2821f3)break;else _0x5ef1cb['push'](_0x5ef1cb['shift']());}catch(_0x21d3c9){_0x5ef1cb['push'](_0x5ef1cb['shift']());}}}(a85_0x2b30,0xdc3ba));function a85_0x2e1d(_0x5d2771,_0x2b44a6){const _0x2b305b=a85_0x2b30();return a85_0x2e1d=function(_0x2e1da1,_0x48c32c){_0x2e1da1=_0x2e1da1-0x133;let _0x4da6e0=_0x2b305b[_0x2e1da1];return _0x4da6e0;},a85_0x2e1d(_0x5d2771,_0x2b44a6);}const path=require('path'),{commandRepository}=require(a85_0x2a69bc(0x18c)),constants=require(a85_0x2a69bc(0x174)),logger=require(a85_0x2a69bc(0x19b))[a85_0x2a69bc(0x136)],globals=require('../globals'),timeoutPromise=require(a85_0x2a69bc(0x197)),isUndefinedOrNull=_0x12c604=>_0x12c604===undefined||_0x12c604===null||_0x12c604==='',isNotUndefinedOrNull=_0x6cdff3=>!isUndefinedOrNull(_0x6cdff3),isString=_0x4e0738=>isNotUndefinedOrNull(_0x4e0738)&&typeof _0x4e0738===a85_0x2a69bc(0x182);class AiSdkWrapper{constructor(){const _0x309ea9=a85_0x2a69bc,_0x56dd8c={'yjKEU':function(_0x16ad5f,_0x1cba1a){return _0x16ad5f(_0x1cba1a);},'rqQBE':_0x309ea9(0x13e)};this[_0x309ea9(0x17c)]=undefined;try{this[_0x309ea9(0x17c)]=_0x56dd8c[_0x309ea9(0x15a)](require,path[_0x309ea9(0x142)](__dirname,_0x56dd8c[_0x309ea9(0x165)]));}catch(_0x5ae897){logger[_0x309ea9(0x190)](_0x309ea9(0x171)+(_0x5ae897&&_0x5ae897[_0x309ea9(0x135)]?_0x5ae897['message']:''));}}[a85_0x2a69bc(0x13b)](_0x17b4ad){const _0x5481b4=a85_0x2a69bc,_0x5f553b={};_0x5f553b[_0x5481b4(0x1a1)]='newCapabilities',_0x5f553b[_0x5481b4(0x145)]=function(_0xb71d44,_0x2d58e6){return _0xb71d44===_0x2d58e6;},_0x5f553b[_0x5481b4(0x134)]=_0x5481b4(0x194),_0x5f553b[_0x5481b4(0x137)]=_0x5481b4(0x149),_0x5f553b[_0x5481b4(0x152)]='safari',_0x5f553b[_0x5481b4(0x169)]=function(_0x45e03e,_0x11fc25){return _0x45e03e===_0x11fc25;},_0x5f553b['vmYod']='edge',_0x5f553b[_0x5481b4(0x19a)]='microsoftedge';const _0x5c4c01=_0x5f553b;try{const _0x433b1d=this[_0x5481b4(0x17c)][_0x5481b4(0x143)](Object[_0x5481b4(0x140)](_0x17b4ad['getCapabilities']()[_0x5481b4(0x170)]));console[_0x5481b4(0x1a6)](_0x5c4c01[_0x5481b4(0x1a1)],_0x433b1d);if(_0x5c4c01[_0x5481b4(0x145)](_0x433b1d?.[_0x5481b4(0x16c)]?.[_0x5481b4(0x160)](),_0x5c4c01[_0x5481b4(0x134)]))_0x17b4ad[_0x5481b4(0x1a9)]=_0x433b1d;else{if(_0x5c4c01['QzRFI'](_0x433b1d?.[_0x5481b4(0x16c)]?.[_0x5481b4(0x160)](),_0x5c4c01[_0x5481b4(0x137)]))_0x17b4ad[_0x5481b4(0x155)]=_0x433b1d;else{if(_0x5c4c01[_0x5481b4(0x145)](_0x433b1d?.['browserName']?.[_0x5481b4(0x160)](),_0x5c4c01[_0x5481b4(0x152)]))_0x17b4ad[_0x5481b4(0x187)]=_0x433b1d;else{if(_0x5c4c01['hIDcF'](_0x433b1d?.[_0x5481b4(0x16c)]?.[_0x5481b4(0x160)](),_0x5c4c01[_0x5481b4(0x177)])||_0x5c4c01['hIDcF'](_0x433b1d?.[_0x5481b4(0x16c)]?.[_0x5481b4(0x160)](),_0x5c4c01[_0x5481b4(0x19a)]))_0x17b4ad[_0x5481b4(0x1a7)]=_0x433b1d;else _0x5c4c01[_0x5481b4(0x145)](_0x433b1d?.[_0x5481b4(0x16c)]?.[_0x5481b4(0x160)](),'ie')&&(_0x17b4ad[_0x5481b4(0x14b)]=_0x433b1d);}}}Object[_0x5481b4(0x15b)](_0x433b1d)[_0x5481b4(0x19c)](_0x5b150e=>{const _0x14c228=_0x5481b4,_0x5f2df8=_0x17b4ad['capabilities_'][_0x14c228(0x1a2)](_0x5b150e);_0x17b4ad['capabilities_'][_0x14c228(0x151)](_0x5b150e,_0x433b1d[_0x5b150e]);});}catch(_0x42a7f8){logger[_0x5481b4(0x190)](_0x5481b4(0x1a4)+(_0x42a7f8&&_0x42a7f8[_0x5481b4(0x135)]?_0x42a7f8['message']:''));}}async[a85_0x2a69bc(0x133)](_0x3485a7){const _0x320651=a85_0x2a69bc,_0x440a2c={'DVxLi':function(_0x17241a,_0x31eaa2,_0x3be302,_0x5d98c4,_0x200263,_0x5ba3d1,_0x1c3f52){return _0x17241a(_0x31eaa2,_0x3be302,_0x5d98c4,_0x200263,_0x5ba3d1,_0x1c3f52);},'dSyPC':'BrowserstackHealing.setToken\x20method\x20timed\x20out','LCJBs':_0x320651(0x189),'KFYQi':_0x320651(0x180)},_0x32c7e8=new Date(),_0x32788b=_0x440a2c[_0x320651(0x198)](timeoutPromise,constants[_0x320651(0x153)],_0x440a2c['dSyPC'],_0x440a2c[_0x320651(0x139)],_0x32c7e8,this[_0x320651(0x13d)],this[_0x320651(0x196)]);await Promise['race']([this[_0x320651(0x17c)]['setToken'](_0x3485a7,globals[_0x320651(0x154)](_0x440a2c['KFYQi']),constants[_0x320651(0x147)])[_0x320651(0x18b)](()=>{const _0x4eab5c=_0x320651;_0x32788b[_0x4eab5c(0x166)]();}),_0x32788b]);}async['_handleEvent'](_0x5461bc,_0x5170f7,_0x1d66b5,_0xa611b9){const _0x463df9=a85_0x2a69bc,_0x1dac32={'hyLwB':function(_0x2bb951,_0x19f770){return _0x2bb951===_0x19f770;},'WZHnP':function(_0x5b7c46,_0x47a1d4){return _0x5b7c46(_0x47a1d4);},'kcaoh':function(_0x4989d1,_0x392efc){return _0x4989d1(_0x392efc);},'UzSOP':function(_0x11634d,_0x2fac76){return _0x11634d(_0x2fac76);},'uryHW':function(_0x518fc0,_0x4c8598){return _0x518fc0(_0x4c8598);},'ztPEo':function(_0x127fc5,_0x490199){return _0x127fc5(_0x490199);},'VLnPK':function(_0x24b465,_0x397866){return _0x24b465(_0x397866);},'Atvub':function(_0x59f1ee,_0x373d6f){return _0x59f1ee(_0x373d6f);},'RJEWg':_0x463df9(0x19e),'BTloI':function(_0x3cae21,_0x2be278){return _0x3cae21(_0x2be278);},'ycFCq':_0x463df9(0x18d),'GOIHb':_0x463df9(0x156),'CFvPW':_0x463df9(0x144),'SWkfA':function(_0x36cacc,_0x3b1c97,_0x52ac51,_0x49bd3b,_0xe897bb,_0x2612c8,_0x466d8b){return _0x36cacc(_0x3b1c97,_0x52ac51,_0x49bd3b,_0xe897bb,_0x2612c8,_0x466d8b);},'IaYno':_0x463df9(0x17d),'TJIDR':'BrowserstackHealingLogDataFailed','mYWev':function(_0x43e274,_0x24ee48,_0x167660,_0x4ae3ab,_0x17bf0f,_0x39b71e,_0x1d002d){return _0x43e274(_0x24ee48,_0x167660,_0x4ae3ab,_0x17bf0f,_0x39b71e,_0x1d002d);},'Bbdxw':'BrowserstackHealing.healFailure\x20method\x20timed\x20out','CzbXq':_0x463df9(0x188)},_0x2d3f27=(await _0x5170f7[_0x463df9(0x17f)]())['getId']();let _0x4e73c3='';if(commandRepository['isSelfHealEnabled']()&&_0x1dac32[_0x463df9(0x16f)](_0xa611b9,![])||_0x1dac32['hyLwB'](_0xa611b9,!![])){const _0x4f4527=_0x1dac32[_0x463df9(0x184)](isNotUndefinedOrNull,_0x1d66b5[_0x463df9(0x159)][_0x463df9(0x195)])&&_0x1dac32['kcaoh'](isString,_0x1d66b5[_0x463df9(0x159)][_0x463df9(0x195)])?_0x1d66b5[_0x463df9(0x159)][_0x463df9(0x195)]['replace'](/'/g,'\x5c\x27')[_0x463df9(0x178)](/"/g,'\x5c\x22'):'',_0x2badf4=_0x1dac32[_0x463df9(0x13f)](isNotUndefinedOrNull,_0x1d66b5[_0x463df9(0x159)][_0x463df9(0x195)])&&_0x1dac32[_0x463df9(0x17a)](isString,_0x1d66b5[_0x463df9(0x159)][_0x463df9(0x181)])?_0x1d66b5[_0x463df9(0x159)]['value'][_0x463df9(0x178)](/'/g,'\x5c\x27')[_0x463df9(0x178)](/"/g,'\x5c\x22'):'',_0x1bf9b1=_0x1dac32[_0x463df9(0x15c)](isNotUndefinedOrNull,commandRepository[_0x463df9(0x1a3)]())&&_0x1dac32[_0x463df9(0x1a0)](isString,commandRepository[_0x463df9(0x1a3)]())?commandRepository[_0x463df9(0x1a3)]()[_0x463df9(0x178)](/'/g,'\x5c\x27')[_0x463df9(0x178)](/"/g,'\x5c\x22'):'';let _0x2e6399=_0x1dac32['WZHnP'](isNotUndefinedOrNull,global['browserstackSessionName'])&&_0x1dac32[_0x463df9(0x13f)](isString,global['browserstackSessionName'])?global[_0x463df9(0x163)][_0x463df9(0x178)](/'/g,'\x5c\x27')[_0x463df9(0x178)](/"/g,'\x5c\x22'):'';!_0x2e6399&&(_0x2e6399=_0x1dac32[_0x463df9(0x15c)](isNotUndefinedOrNull,commandRepository['getTestName']())&&_0x1dac32[_0x463df9(0x19f)](isString,commandRepository[_0x463df9(0x150)]())?commandRepository[_0x463df9(0x150)]()['replace'](/'/g,'\x5c\x27')[_0x463df9(0x178)](/"/g,'\x5c\x22'):'');let _0x237a52=_0x463df9(0x158)+constants[_0x463df9(0x191)]+_0x463df9(0x164)+constants[_0x463df9(0x191)]+_0x463df9(0x14c)+constants[_0x463df9(0x147)]['split'](_0x1dac32[_0x463df9(0x1a5)])[0x1]+_0x463df9(0x172);_0x237a52=_0x1dac32[_0x463df9(0x17a)](isNotUndefinedOrNull,_0x237a52)&&_0x1dac32[_0x463df9(0x16d)](isString,_0x237a52)?_0x237a52['replace'](/'/g,'\x5c\x27')['replace'](/"/g,'\x5c\x22'):'';const _0x5e51f6=commandRepository[_0x463df9(0x176)](_0x2d3f27),_0x575df9=globals[_0x463df9(0x154)](_0x1dac32[_0x463df9(0x179)]),_0x458d87=globals[_0x463df9(0x154)](_0x1dac32['GOIHb']),_0x3259c5=globals['getGlobal'](_0x1dac32['CFvPW']),_0x32df80=![],_0xc33eb0=new Date();if(_0xa611b9){const _0xfbf52a=_0x1dac32[_0x463df9(0x14d)](timeoutPromise,constants[_0x463df9(0x175)],_0x1dac32[_0x463df9(0x146)],_0x1dac32[_0x463df9(0x185)],_0xc33eb0,this['config'],this['framework']);_0x4e73c3=await Promise[_0x463df9(0x15d)]([this[_0x463df9(0x17c)]['logData'](_0x4f4527,_0x2badf4,_0x1bf9b1,_0x2e6399,_0x458d87,_0x2d3f27,_0x5e51f6,_0x237a52)['then'](_0x18c1f5=>{const _0x41791d=_0x463df9;return _0xfbf52a[_0x41791d(0x166)](),_0x18c1f5;}),_0xfbf52a]);}else{if(commandRepository[_0x463df9(0x14e)]()){const _0x5e6ac0=_0x1dac32[_0x463df9(0x157)](timeoutPromise,constants['HEALING_FAILURE_TIMEOUT'],_0x1dac32['Bbdxw'],_0x1dac32['CzbXq'],_0xc33eb0,this[_0x463df9(0x13d)],this[_0x463df9(0x196)]);_0x4e73c3=await Promise[_0x463df9(0x15d)]([this['BrowserstackHealing'][_0x463df9(0x18e)](_0x4f4527,_0x2badf4,_0x1bf9b1,_0x2e6399,_0x575df9,_0x458d87,_0x2d3f27,_0x5e51f6,_0x32df80,_0x3259c5,_0x237a52)[_0x463df9(0x18b)](_0x555a74=>{return _0x5e6ac0['cancel'](),_0x555a74;}),_0x5e6ac0]);}}_0x4e73c3&&await _0x5170f7['executeScript'](_0x4e73c3);}}async['handleSuccess'](_0x571e03,_0x4fab0c,_0x48aee5){const _0x5bb253=a85_0x2a69bc;try{await this[_0x5bb253(0x193)](_0x571e03,_0x4fab0c,_0x48aee5,!![]);}catch(_0x7e2724){return logger[_0x5bb253(0x190)]('Error\x20in\x20(healing)\x20success\x20event.\x20ERROR:\x20'+(_0x7e2724&&_0x7e2724[_0x5bb253(0x135)]?_0x7e2724[_0x5bb253(0x135)]:'')),![];}return!![];}async[a85_0x2a69bc(0x141)](_0x11b2b3,_0xd5a7b4,_0x2eb312){const _0x1cfcc4=a85_0x2a69bc,_0x1243ab={'ECyqq':function(_0x4af353,_0x277274,_0x49f3d5,_0x3441c7,_0x1e3281,_0x421cb1,_0x34d970){return _0x4af353(_0x277274,_0x49f3d5,_0x3441c7,_0x1e3281,_0x421cb1,_0x34d970);},'HmwwP':_0x1cfcc4(0x167),'FvzaX':'BrowserstackHealingPollResultFailed','RcNSs':_0x1cfcc4(0x180)};try{await this[_0x1cfcc4(0x193)](_0x11b2b3,_0xd5a7b4,_0x2eb312,![]);const _0x49e13f=(await _0xd5a7b4[_0x1cfcc4(0x17f)]())[_0x1cfcc4(0x16e)](),_0xceda86=new Date(),_0x55fe0f=_0x1243ab['ECyqq'](timeoutPromise,constants[_0x1cfcc4(0x14f)],_0x1243ab['HmwwP'],_0x1243ab['FvzaX'],_0xceda86,this['config'],this['framework']),_0x4c0e3a=await Promise[_0x1cfcc4(0x15d)]([this[_0x1cfcc4(0x17c)][_0x1cfcc4(0x168)](constants[_0x1cfcc4(0x147)],_0x49e13f,globals[_0x1cfcc4(0x154)](_0x1243ab[_0x1cfcc4(0x161)]))['then'](_0x44aa15=>{return _0x55fe0f['cancel'](),_0x44aa15;}),_0x55fe0f]);if(_0x4c0e3a&&_0x4c0e3a[_0x1cfcc4(0x14a)]&&_0x4c0e3a[_0x1cfcc4(0x181)]){const _0x485c92={};return _0x485c92[_0x1cfcc4(0x199)]=_0x4c0e3a[_0x1cfcc4(0x14a)],_0x485c92['locatorValue']=_0x4c0e3a[_0x1cfcc4(0x181)],_0x485c92[_0x1cfcc4(0x13c)]=!![],_0x485c92;}const _0x13545d={};return _0x13545d[_0x1cfcc4(0x199)]=_0x2eb312[_0x1cfcc4(0x159)]['using'],_0x13545d[_0x1cfcc4(0x18a)]=_0x4c0e3a[_0x1cfcc4(0x181)],_0x13545d['aiHealing']=!![],_0x13545d;}catch(_0x3d0178){return logger[_0x1cfcc4(0x15e)](_0x1cfcc4(0x16a)+(_0x3d0178&&_0x3d0178[_0x1cfcc4(0x135)]?_0x3d0178[_0x1cfcc4(0x135)]:'')),logger[_0x1cfcc4(0x15f)](_0x1cfcc4(0x18f)+_0x2eb312[_0x1cfcc4(0x173)]+_0x1cfcc4(0x192)),_0x2eb312;}}}exports['aiSdkWrapper']=Object['freeze'](new AiSdkWrapper());